(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ip(n,e){const t=new Set(n.split(","));return r=>t.has(r)}const ct={},oo=[],Ln=()=>{},_x=()=>!1,Su=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),sp=n=>n.startsWith("onUpdate:"),Nt=Object.assign,op=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},wx=Object.prototype.hasOwnProperty,Ve=(n,e)=>wx.call(n,e),we=Array.isArray,ao=n=>hl(n)==="[object Map]",Fo=n=>hl(n)==="[object Set]",Vm=n=>hl(n)==="[object Date]",Me=n=>typeof n=="function",wt=n=>typeof n=="string",yr=n=>typeof n=="symbol",rt=n=>n!==null&&typeof n=="object",Ib=n=>(rt(n)||Me(n))&&Me(n.then)&&Me(n.catch),Pb=Object.prototype.toString,hl=n=>Pb.call(n),Cx=n=>hl(n).slice(8,-1),Nb=n=>hl(n)==="[object Object]",ap=n=>wt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,_a=ip(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xu=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Sx=/-(\w)/g,xs=xu(n=>n.replace(Sx,(e,t)=>t?t.toUpperCase():"")),xx=/\B([A-Z])/g,Rs=xu(n=>n.replace(xx,"-$1").toLowerCase()),Rb=xu(n=>n.charAt(0).toUpperCase()+n.slice(1)),kf=xu(n=>n?`on${Rb(n)}`:""),Si=(n,e)=>!Object.is(n,e),kc=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Lb=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Gc=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Ax=n=>{const e=wt(n)?Number(n):NaN;return isNaN(e)?n:e};let zm;const Db=()=>zm||(zm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wn(n){if(we(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=wt(r)?Ox(r):wn(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(wt(n)||rt(n))return n}const kx=/;(?![^(]*\))/g,Ex=/:([^]+)/,Tx=/\/\*[^]*?\*\//g;function Ox(n){const e={};return n.replace(Tx,"").split(kx).forEach(t=>{if(t){const r=t.split(Ex);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Sn(n){let e="";if(wt(n))e=n;else if(we(n))for(let t=0;t<n.length;t++){const r=Sn(n[t]);r&&(e+=r+" ")}else if(rt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Mx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ix=ip(Mx);function Fb(n){return!!n||n===""}function Px(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=dl(n[r],e[r]);return t}function dl(n,e){if(n===e)return!0;let t=Vm(n),r=Vm(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=yr(n),r=yr(e),t||r)return n===e;if(t=we(n),r=we(e),t||r)return t&&r?Px(n,e):!1;if(t=rt(n),r=rt(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!dl(n[o],e[o]))return!1}}return String(n)===String(e)}function lp(n,e){return n.findIndex(t=>dl(t,e))}const Bb=n=>!!(n&&n.__v_isRef===!0),ge=n=>wt(n)?n:n==null?"":we(n)||rt(n)&&(n.toString===Pb||!Me(n.toString))?Bb(n)?ge(n.value):JSON.stringify(n,$b,2):String(n),$b=(n,e)=>Bb(e)?$b(n,e.value):ao(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Ef(r,s)+" =>"]=i,t),{})}:Fo(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ef(t))}:yr(e)?Ef(e):rt(e)&&!we(e)&&!Nb(e)?String(e):e,Ef=(n,e="")=>{var t;return yr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let gn;class jb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=gn,!e&&gn&&(this.index=(gn.scopes||(gn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=gn;try{return gn=this,e()}finally{gn=t}}}on(){gn=this}off(){gn=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Nx(n){return new jb(n)}function Rx(n,e=gn){e&&e.active&&e.effects.push(n)}function Hb(){return gn}function Lx(n){gn&&gn.cleanups.push(n)}let fs,cp=class{constructor(e,t,r,i){this.fn=e,this.trigger=t,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Rx(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ii();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(Dx(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Pi()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=pi,t=fs;try{return pi=!0,fs=this,this._runnings++,Gm(this),this.fn()}finally{Wm(this),this._runnings--,fs=t,pi=e}}stop(){this.active&&(Gm(this),Wm(this),this.onStop&&this.onStop(),this.active=!1)}};function Dx(n){return n.value}function Gm(n){n._trackId++,n._depsLength=0}function Wm(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)Vb(n.deps[e],n);n.deps.length=n._depsLength}}function Vb(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let pi=!0,Ph=0;const zb=[];function Ii(){zb.push(pi),pi=!1}function Pi(){const n=zb.pop();pi=n===void 0?!0:n}function up(){Ph++}function fp(){for(Ph--;!Ph&&Nh.length;)Nh.shift()()}function Gb(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const r=n.deps[n._depsLength];r!==e?(r&&Vb(r,n),n.deps[n._depsLength++]=e):n._depsLength++}}const Nh=[];function Wb(n,e,t){up();for(const r of n.keys()){let i;r._dirtyLevel<e&&(i??(i=n.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=n.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Nh.push(r.scheduler)))}fp()}const Ub=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},Rh=new WeakMap,hs=Symbol(""),Lh=Symbol("");function pn(n,e,t){if(pi&&fs){let r=Rh.get(n);r||Rh.set(n,r=new Map);let i=r.get(t);i||r.set(t,i=Ub(()=>r.delete(t))),Gb(fs,i)}}function Rr(n,e,t,r,i,s){const o=Rh.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&we(n)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!yr(u)&&u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":we(n)?ap(t)&&a.push(o.get("length")):(a.push(o.get(hs)),ao(n)&&a.push(o.get(Lh)));break;case"delete":we(n)||(a.push(o.get(hs)),ao(n)&&a.push(o.get(Lh)));break;case"set":ao(n)&&a.push(o.get(hs));break}up();for(const l of a)l&&Wb(l,4);fp()}const Fx=ip("__proto__,__v_isRef,__isVue"),Kb=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(yr)),Um=Bx();function Bx(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const r=Ke(this);for(let s=0,o=this.length;s<o;s++)pn(r,"get",s+"");const i=r[e](...t);return i===-1||i===!1?r[e](...t.map(Ke)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Ii(),up();const r=Ke(this)[e].apply(this,t);return fp(),Pi(),r}}),n}function $x(n){yr(n)||(n=String(n));const e=Ke(this);return pn(e,"has",n),e.hasOwnProperty(n)}let Yb=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?Qx:Qb:s?Jb:Xb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=we(e);if(!i){if(o&&Ve(Um,t))return Reflect.get(Um,t,r);if(t==="hasOwnProperty")return $x}const a=Reflect.get(e,t,r);return(yr(t)?Kb.has(t):Fx(t))||(i||pn(e,"get",t),s)?a:bt(a)?o&&ap(t)?a:a.value:rt(a)?i?Zb(a):Ha(a):a}},qb=class extends Yb{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=As(s);if(!bo(r)&&!As(r)&&(s=Ke(s),r=Ke(r)),!we(e)&&bt(s)&&!bt(r))return l?!1:(s.value=r,!0)}const o=we(e)&&ap(t)?Number(t)<e.length:Ve(e,t),a=Reflect.set(e,t,r,i);return e===Ke(i)&&(o?Si(r,s)&&Rr(e,"set",t,r):Rr(e,"add",t,r)),a}deleteProperty(e,t){const r=Ve(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Rr(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!yr(t)||!Kb.has(t))&&pn(e,"has",t),r}ownKeys(e){return pn(e,"iterate",we(e)?"length":hs),Reflect.ownKeys(e)}},jx=class extends Yb{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}};const Hx=new qb,Vx=new jx,zx=new qb(!0);const hp=n=>n,Au=n=>Reflect.getPrototypeOf(n);function Nl(n,e,t=!1,r=!1){n=n.__v_raw;const i=Ke(n),s=Ke(e);t||(Si(e,s)&&pn(i,"get",e),pn(i,"get",s));const{has:o}=Au(i),a=r?hp:t?mp:Va;if(o.call(i,e))return a(n.get(e));if(o.call(i,s))return a(n.get(s));n!==i&&n.get(e)}function Rl(n,e=!1){const t=this.__v_raw,r=Ke(t),i=Ke(n);return e||(Si(n,i)&&pn(r,"has",n),pn(r,"has",i)),n===i?t.has(n):t.has(n)||t.has(i)}function Ll(n,e=!1){return n=n.__v_raw,!e&&pn(Ke(n),"iterate",hs),Reflect.get(n,"size",n)}function Km(n,e=!1){!e&&!bo(n)&&!As(n)&&(n=Ke(n));const t=Ke(this);return Au(t).has.call(t,n)||(t.add(n),Rr(t,"add",n,n)),this}function Ym(n,e,t=!1){!t&&!bo(e)&&!As(e)&&(e=Ke(e));const r=Ke(this),{has:i,get:s}=Au(r);let o=i.call(r,n);o||(n=Ke(n),o=i.call(r,n));const a=s.call(r,n);return r.set(n,e),o?Si(e,a)&&Rr(r,"set",n,e):Rr(r,"add",n,e),this}function qm(n){const e=Ke(this),{has:t,get:r}=Au(e);let i=t.call(e,n);i||(n=Ke(n),i=t.call(e,n)),r&&r.call(e,n);const s=e.delete(n);return i&&Rr(e,"delete",n,void 0),s}function Xm(){const n=Ke(this),e=n.size!==0,t=n.clear();return e&&Rr(n,"clear",void 0,void 0),t}function Dl(n,e){return function(r,i){const s=this,o=s.__v_raw,a=Ke(o),l=e?hp:n?mp:Va;return!n&&pn(a,"iterate",hs),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Fl(n,e,t){return function(...r){const i=this.__v_raw,s=Ke(i),o=ao(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...r),u=t?hp:e?mp:Va;return!e&&pn(s,"iterate",l?Lh:hs),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Ur(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Gx(){const n={get(s){return Nl(this,s)},get size(){return Ll(this)},has:Rl,add:Km,set:Ym,delete:qm,clear:Xm,forEach:Dl(!1,!1)},e={get(s){return Nl(this,s,!1,!0)},get size(){return Ll(this)},has:Rl,add(s){return Km.call(this,s,!0)},set(s,o){return Ym.call(this,s,o,!0)},delete:qm,clear:Xm,forEach:Dl(!1,!0)},t={get(s){return Nl(this,s,!0)},get size(){return Ll(this,!0)},has(s){return Rl.call(this,s,!0)},add:Ur("add"),set:Ur("set"),delete:Ur("delete"),clear:Ur("clear"),forEach:Dl(!0,!1)},r={get(s){return Nl(this,s,!0,!0)},get size(){return Ll(this,!0)},has(s){return Rl.call(this,s,!0)},add:Ur("add"),set:Ur("set"),delete:Ur("delete"),clear:Ur("clear"),forEach:Dl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Fl(s,!1,!1),t[s]=Fl(s,!0,!1),e[s]=Fl(s,!1,!0),r[s]=Fl(s,!0,!0)}),[n,t,e,r]}const[Wx,Ux,Kx,Yx]=Gx();function dp(n,e){const t=e?n?Yx:Kx:n?Ux:Wx;return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Ve(t,i)&&i in r?t:r,i,s)}const qx={get:dp(!1,!1)},Xx={get:dp(!1,!0)},Jx={get:dp(!0,!1)};const Xb=new WeakMap,Jb=new WeakMap,Qb=new WeakMap,Qx=new WeakMap;function Zx(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function eA(n){return n.__v_skip||!Object.isExtensible(n)?0:Zx(Cx(n))}function Ha(n){return As(n)?n:pp(n,!1,Hx,qx,Xb)}function tA(n){return pp(n,!1,zx,Xx,Jb)}function Zb(n){return pp(n,!0,Vx,Jx,Qb)}function pp(n,e,t,r,i){if(!rt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=eA(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function wa(n){return As(n)?wa(n.__v_raw):!!(n&&n.__v_isReactive)}function As(n){return!!(n&&n.__v_isReadonly)}function bo(n){return!!(n&&n.__v_isShallow)}function e1(n){return n?!!n.__v_raw:!1}function Ke(n){const e=n&&n.__v_raw;return e?Ke(e):n}function t1(n){return Object.isExtensible(n)&&Lb(n,"__v_skip",!0),n}const Va=n=>rt(n)?Ha(n):n,mp=n=>rt(n)?Zb(n):n;let n1=class{constructor(e,t,r,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new cp(()=>e(this._value),()=>Ca(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Ke(this);return(!e._cacheable||e.effect.dirty)&&Si(e._value,e._value=e.effect.run())&&Ca(e,4),gp(e),e.effect._dirtyLevel>=2&&Ca(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}};function nA(n,e,t=!1){let r,i;const s=Me(n);return s?(r=n,i=Ln):(r=n.get,i=n.set),new n1(r,i,s||!i,t)}function gp(n){var e;pi&&fs&&(n=Ke(n),Gb(fs,(e=n.dep)!=null?e:n.dep=Ub(()=>n.dep=void 0,n instanceof n1?n:void 0)))}function Ca(n,e=4,t,r){n=Ke(n);const i=n.dep;i&&Wb(i,e)}function bt(n){return!!(n&&n.__v_isRef===!0)}function bn(n){return r1(n,!1)}function vp(n){return r1(n,!0)}function r1(n,e){return bt(n)?n:new rA(n,e)}let rA=class{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ke(e),this._value=t?e:Va(e)}get value(){return gp(this),this._value}set value(e){const t=this.__v_isShallow||bo(e)||As(e);e=t?e:Ke(e),Si(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:Va(e),Ca(this,4))}};function P(n){return bt(n)?n.value:n}const iA={get:(n,e,t)=>P(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return bt(i)&&!bt(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function i1(n){return wa(n)?n:new Proxy(n,iA)}class sA{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:r}=e(()=>gp(this),()=>Ca(this));this._get=t,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function oA(n){return new sA(n)}/**
* @vue/runtime-core v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mi(n,e,t,r){try{return r?n(...r):n()}catch(i){ku(i,e,t)}}function Fn(n,e,t,r){if(Me(n)){const i=mi(n,e,t,r);return i&&Ib(i)&&i.catch(s=>{ku(s,e,t)}),i}if(we(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Fn(n[s],e,t,r));return i}}function ku(n,e,t,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ii(),mi(l,null,10,[n,o,a]),Pi();return}}aA(n,t,i,r)}function aA(n,e,t,r=!0){console.error(n)}let za=!1,Dh=!1;const Vt=[];let ur=0;const lo=[];let ei=null,es=0;const s1=Promise.resolve();let yp=null;function Eu(n){const e=yp||s1;return n?e.then(this?n.bind(this):n):e}function lA(n){let e=ur+1,t=Vt.length;for(;e<t;){const r=e+t>>>1,i=Vt[r],s=Ga(i);s<n||s===n&&i.pre?e=r+1:t=r}return e}function bp(n){(!Vt.length||!Vt.includes(n,za&&n.allowRecurse?ur+1:ur))&&(n.id==null?Vt.push(n):Vt.splice(lA(n.id),0,n),o1())}function o1(){!za&&!Dh&&(Dh=!0,yp=s1.then(l1))}function cA(n){const e=Vt.indexOf(n);e>ur&&Vt.splice(e,1)}function uA(n){we(n)?lo.push(...n):(!ei||!ei.includes(n,n.allowRecurse?es+1:es))&&lo.push(n),o1()}function Jm(n,e,t=za?ur+1:0){for(;t<Vt.length;t++){const r=Vt[t];if(r&&r.pre){if(n&&r.id!==n.uid)continue;Vt.splice(t,1),t--,r()}}}function a1(n){if(lo.length){const e=[...new Set(lo)].sort((t,r)=>Ga(t)-Ga(r));if(lo.length=0,ei){ei.push(...e);return}for(ei=e,es=0;es<ei.length;es++){const t=ei[es];t.active!==!1&&t()}ei=null,es=0}}const Ga=n=>n.id==null?1/0:n.id,fA=(n,e)=>{const t=Ga(n)-Ga(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function l1(n){Dh=!1,za=!0,Vt.sort(fA);try{for(ur=0;ur<Vt.length;ur++){const e=Vt[ur];e&&e.active!==!1&&mi(e,e.i,e.i?15:14)}}finally{ur=0,Vt.length=0,a1(),za=!1,yp=null,(Vt.length||lo.length)&&l1()}}let Bt=null,c1=null;function Wc(n){const e=Bt;return Bt=n,c1=n&&n.type.__scopeId||null,e}function se(n,e=Bt,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&cg(-1);const s=Wc(e);let o;try{o=n(...i)}finally{Wc(s),r._d&&cg(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Tu(n,e){if(Bt===null)return n;const t=Ru(Bt),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=ct]=e[i];s&&(Me(s)&&(s={mounted:s,updated:s}),s.deep&&oi(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Ui(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ii(),Fn(l,t,8,[n.el,a,n,e]),Pi())}}const ti=Symbol("_leaveCb"),Bl=Symbol("_enterCb");function hA(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bo(()=>{n.isMounted=!0}),pl(()=>{n.isUnmounting=!0}),n}const On=[Function,Array],u1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:On,onEnter:On,onAfterEnter:On,onEnterCancelled:On,onBeforeLeave:On,onLeave:On,onAfterLeave:On,onLeaveCancelled:On,onBeforeAppear:On,onAppear:On,onAfterAppear:On,onAppearCancelled:On},f1=n=>{const e=n.subTree;return e.component?f1(e.component):e},dA={name:"BaseTransition",props:u1,setup(n,{slots:e}){const t=br(),r=hA();return()=>{const i=e.default&&d1(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const h of i)if(h.type!==un){s=h;break}}const o=Ke(n),{mode:a}=o;if(r.isLeaving)return Tf(s);const l=Qm(s);if(!l)return Tf(s);let c=Fh(l,o,r,t,h=>c=h);Uc(l,c);const u=t.subTree,f=u&&Qm(u);if(f&&f.type!==un&&!ts(l,f)&&f1(t).type!==un){const h=Fh(f,o,r,t);if(Uc(f,h),a==="out-in"&&l.type!==un)return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,t.update.active!==!1&&(t.effect.dirty=!0,t.update())},Tf(s);a==="in-out"&&l.type!==un&&(h.delayLeave=(p,d,g)=>{const m=h1(r,f);m[String(f.key)]=f,p[ti]=()=>{d(),p[ti]=void 0,delete c.delayedLeave},c.delayedLeave=g})}return s}}},pA=dA;function h1(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Fh(n,e,t,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:h,onLeave:p,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:y,onAfterAppear:w,onAppearCancelled:b}=e,v=String(n.key),S=h1(t,n),_=(E,F)=>{E&&Fn(E,r,9,F)},k=(E,F)=>{const j=F[1];_(E,F),we(E)?E.every(L=>L.length<=1)&&j():E.length<=1&&j()},M={mode:o,persisted:a,beforeEnter(E){let F=l;if(!t.isMounted)if(s)F=m||l;else return;E[ti]&&E[ti](!0);const j=S[v];j&&ts(n,j)&&j.el[ti]&&j.el[ti](),_(F,[E])},enter(E){let F=c,j=u,L=f;if(!t.isMounted)if(s)F=y||c,j=w||u,L=b||f;else return;let V=!1;const ue=E[Bl]=ke=>{V||(V=!0,ke?_(L,[E]):_(j,[E]),M.delayedLeave&&M.delayedLeave(),E[Bl]=void 0)};F?k(F,[E,ue]):ue()},leave(E,F){const j=String(n.key);if(E[Bl]&&E[Bl](!0),t.isUnmounting)return F();_(h,[E]);let L=!1;const V=E[ti]=ue=>{L||(L=!0,F(),ue?_(g,[E]):_(d,[E]),E[ti]=void 0,S[j]===n&&delete S[j])};S[j]=n,p?k(p,[E,V]):V()},clone(E){const F=Fh(E,e,t,r,i);return i&&i(F),F}};return M}function Tf(n){if(Ou(n))return n=xi(n),n.children=null,n}function Qm(n){if(!Ou(n))return n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Me(t.default))return t.default()}}function Uc(n,e){n.shapeFlag&6&&n.component?Uc(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function d1(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===ze?(o.patchFlag&128&&i++,r=r.concat(d1(o.children,e,a))):(e||o.type!==un)&&r.push(a!=null?xi(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ge(n,e){return Me(n)?Nt({name:n.name},e,{setup:n}):n}const Sa=n=>!!n.type.__asyncLoader,Ou=n=>n.type.__isKeepAlive;function mA(n,e){p1(n,"a",e)}function gA(n,e){p1(n,"da",e)}function p1(n,e,t=zt){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Mu(e,r,t),t){let i=t.parent;for(;i&&i.parent;)Ou(i.parent.vnode)&&vA(r,e,t,i),i=i.parent}}function vA(n,e,t,r){const i=Mu(e,n,r,!0);Iu(()=>{op(r[e],i)},t)}function Mu(n,e,t=zt,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{Ii();const a=gl(t),l=Fn(e,t,n,o);return a(),Pi(),l});return r?i.unshift(s):i.push(s),s}}const jr=n=>(e,t=zt)=>{(!Nu||n==="sp")&&Mu(n,(...r)=>e(...r),t)},m1=jr("bm"),Bo=jr("m"),yA=jr("bu"),bA=jr("u"),pl=jr("bum"),Iu=jr("um"),_A=jr("sp"),wA=jr("rtg"),CA=jr("rtc");function SA(n,e=zt){Mu("ec",n,e)}const xA=Symbol.for("v-ndc");function en(n,e,t,r){let i;const s=t;if(we(n)||wt(n)){i=new Array(n.length);for(let o=0,a=n.length;o<a;o++)i[o]=e(n[o],o,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let o=0;o<n;o++)i[o]=e(o+1,o,void 0,s)}else if(rt(n))if(n[Symbol.iterator])i=Array.from(n,(o,a)=>e(o,a,void 0,s));else{const o=Object.keys(n);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(n[c],c,a,s)}}else i=[];return i}function Bn(n,e,t={},r,i){if(Bt.isCE||Bt.parent&&Sa(Bt.parent)&&Bt.parent.isCE)return e!=="default"&&(t.name=e),z("slot",t,r);let s=n[e];s&&s._c&&(s._d=!1),K();const o=s&&g1(s(t)),a=mt(ze,{key:(t.key||o&&o.key||`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&n._===1?64:-2);return a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function g1(n){return n.some(e=>Yc(e)?!(e.type===un||e.type===ze&&!g1(e.children)):!0)?n:null}const Bh=n=>n?R1(n)?Ru(n):Bh(n.parent):null,xa=Nt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Bh(n.parent),$root:n=>Bh(n.root),$emit:n=>n.emit,$options:n=>_p(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,bp(n.update)}),$nextTick:n=>n.n||(n.n=Eu.bind(n.proxy)),$watch:n=>qA.bind(n)}),Of=(n,e)=>n!==ct&&!n.__isScriptSetup&&Ve(n,e),AA={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Of(r,e))return o[e]=1,r[e];if(i!==ct&&Ve(i,e))return o[e]=2,i[e];if((c=n.propsOptions[0])&&Ve(c,e))return o[e]=3,s[e];if(t!==ct&&Ve(t,e))return o[e]=4,t[e];$h&&(o[e]=0)}}const u=xa[e];let f,h;if(u)return e==="$attrs"&&pn(n.attrs,"get",""),u(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==ct&&Ve(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,Ve(h,e))return h[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Of(i,e)?(i[e]=t,!0):r!==ct&&Ve(r,e)?(r[e]=t,!0):Ve(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==ct&&Ve(n,o)||Of(e,o)||(a=s[0])&&Ve(a,o)||Ve(r,o)||Ve(xa,o)||Ve(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ve(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Zm(n){return we(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let $h=!0;function kA(n){const e=_p(n),t=n.proxy,r=n.ctx;$h=!1,e.beforeCreate&&eg(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:p,updated:d,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:w,destroyed:b,unmounted:v,render:S,renderTracked:_,renderTriggered:k,errorCaptured:M,serverPrefetch:E,expose:F,inheritAttrs:j,components:L,directives:V,filters:ue}=e;if(c&&EA(c,r,null),o)for(const le in o){const ce=o[le];Me(ce)&&(r[le]=ce.bind(t))}if(i){const le=i.call(t,t);rt(le)&&(n.data=Ha(le))}if($h=!0,s)for(const le in s){const ce=s[le],Re=Me(ce)?ce.bind(t,t):Me(ce.get)?ce.get.bind(t,t):Ln,me=!Me(ce)&&Me(ce.set)?ce.set.bind(t):Ln,Ce=At({get:Re,set:me});Object.defineProperty(r,le,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:Ae=>Ce.value=Ae})}if(a)for(const le in a)v1(a[le],r,t,le);if(l){const le=Me(l)?l.call(t):l;Reflect.ownKeys(le).forEach(ce=>{NA(ce,le[ce])})}u&&eg(u,n,"c");function re(le,ce){we(ce)?ce.forEach(Re=>le(Re.bind(t))):ce&&le(ce.bind(t))}if(re(m1,f),re(Bo,h),re(yA,p),re(bA,d),re(mA,g),re(gA,m),re(SA,M),re(CA,_),re(wA,k),re(pl,w),re(Iu,v),re(_A,E),we(F))if(F.length){const le=n.exposed||(n.exposed={});F.forEach(ce=>{Object.defineProperty(le,ce,{get:()=>t[ce],set:Re=>t[ce]=Re})})}else n.exposed||(n.exposed={});S&&n.render===Ln&&(n.render=S),j!=null&&(n.inheritAttrs=j),L&&(n.components=L),V&&(n.directives=V)}function EA(n,e,t=Ln){we(n)&&(n=jh(n));for(const r in n){const i=n[r];let s;rt(i)?"default"in i?s=ka(i.from||r,i.default,!0):s=ka(i.from||r):s=ka(i),bt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function eg(n,e,t){Fn(we(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function v1(n,e,t,r){const i=r.includes(".")?M1(t,r):()=>t[r];if(wt(n)){const s=e[n];Me(s)&&gr(i,s)}else if(Me(n))gr(i,n.bind(t));else if(rt(n))if(we(n))n.forEach(s=>v1(s,e,t,r));else{const s=Me(n.handler)?n.handler.bind(t):e[n.handler];Me(s)&&gr(i,s,n)}}function _p(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(c=>Kc(l,c,o,!0)),Kc(l,e,o)),rt(e)&&s.set(e,l),l}function Kc(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Kc(n,s,t,!0),i&&i.forEach(o=>Kc(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=TA[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const TA={data:tg,props:ng,emits:ng,methods:fa,computed:fa,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:fa,directives:fa,watch:MA,provide:tg,inject:OA};function tg(n,e){return e?n?function(){return Nt(Me(n)?n.call(this,this):n,Me(e)?e.call(this,this):e)}:e:n}function OA(n,e){return fa(jh(n),jh(e))}function jh(n){if(we(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Qt(n,e){return n?[...new Set([].concat(n,e))]:e}function fa(n,e){return n?Nt(Object.create(null),n,e):e}function ng(n,e){return n?we(n)&&we(e)?[...new Set([...n,...e])]:Nt(Object.create(null),Zm(n),Zm(e??{})):e}function MA(n,e){if(!n)return e;if(!e)return n;const t=Nt(Object.create(null),n);for(const r in e)t[r]=Qt(n[r],e[r]);return t}function y1(){return{app:null,config:{isNativeTag:_x,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IA=0;function PA(n,e){return function(r,i=null){Me(r)||(r=Nt({},r)),i!=null&&!rt(i)&&(i=null);const s=y1(),o=new WeakSet;let a=!1;const l=s.app={_uid:IA++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:v2,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Me(c.install)?(o.add(c),c.install(l,...u)):Me(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!a){const h=z(r,i);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(h,c):n(h,c,f),a=!0,l._container=c,c.__vue_app__=l,Ru(h.component)}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Aa;Aa=l;try{return c()}finally{Aa=u}}};return l}}let Aa=null;function NA(n,e){if(zt){let t=zt.provides;const r=zt.parent&&zt.parent.provides;r===t&&(t=zt.provides=Object.create(r)),t[n]=e}}function ka(n,e,t=!1){const r=zt||Bt;if(r||Aa){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Aa._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Me(e)?e.call(r&&r.proxy):e}}const b1={},_1=()=>Object.create(b1),w1=n=>Object.getPrototypeOf(n)===b1;function RA(n,e,t,r=!1){const i={},s=_1();n.propsDefaults=Object.create(null),C1(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:tA(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function LA(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Ke(i),[l]=n.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(Pu(n.emitsOptions,h))continue;const p=e[h];if(l)if(Ve(s,h))p!==s[h]&&(s[h]=p,c=!0);else{const d=xs(h);i[d]=Hh(l,a,d,p,n,!1)}else p!==s[h]&&(s[h]=p,c=!0)}}}else{C1(n,e,i,s)&&(c=!0);let u;for(const f in a)(!e||!Ve(e,f)&&((u=Rs(f))===f||!Ve(e,u)))&&(l?t&&(t[f]!==void 0||t[u]!==void 0)&&(i[f]=Hh(l,a,f,void 0,n,!0)):delete i[f]);if(s!==a)for(const f in s)(!e||!Ve(e,f))&&(delete s[f],c=!0)}c&&Rr(n.attrs,"set","")}function C1(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(_a(l))continue;const c=e[l];let u;i&&Ve(i,u=xs(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:Pu(n.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Ke(t),c=a||ct;for(let u=0;u<s.length;u++){const f=s[u];t[f]=Hh(i,l,f,c[f],n,!Ve(c,f))}}return o}function Hh(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=Ve(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Me(l)){const{propsDefaults:c}=i;if(t in c)r=c[t];else{const u=gl(i);r=c[t]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Rs(t))&&(r=!0))}return r}const DA=new WeakMap;function S1(n,e,t=!1){const r=t?DA:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!Me(n)){const u=f=>{l=!0;const[h,p]=S1(f,e,!0);Nt(o,h),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return rt(n)&&r.set(n,oo),oo;if(we(s))for(let u=0;u<s.length;u++){const f=xs(s[u]);rg(f)&&(o[f]=ct)}else if(s)for(const u in s){const f=xs(u);if(rg(f)){const h=s[u],p=o[f]=we(h)||Me(h)?{type:h}:Nt({},h);if(p){const d=og(Boolean,p.type),g=og(String,p.type);p[0]=d>-1,p[1]=g<0||d<g,(d>-1||Ve(p,"default"))&&a.push(f)}}}const c=[o,a];return rt(n)&&r.set(n,c),c}function rg(n){return n[0]!=="$"&&!_a(n)}function ig(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function sg(n,e){return ig(n)===ig(e)}function og(n,e){return we(e)?e.findIndex(t=>sg(t,n)):Me(e)&&sg(e,n)?0:-1}const x1=n=>n[0]==="_"||n==="$stable",wp=n=>we(n)?n.map(lr):[lr(n)],FA=(n,e,t)=>{if(e._n)return e;const r=se((...i)=>wp(e(...i)),t);return r._c=!1,r},A1=(n,e,t)=>{const r=n._ctx;for(const i in n){if(x1(i))continue;const s=n[i];if(Me(s))e[i]=FA(i,s,r);else if(s!=null){const o=wp(s);e[i]=()=>o}}},k1=(n,e)=>{const t=wp(e);n.slots.default=()=>t},E1=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},BA=(n,e,t)=>{const r=n.slots=_1();if(n.vnode.shapeFlag&32){const i=e._;i?(E1(r,e,t),t&&Lb(r,"_",i,!0)):A1(e,r)}else e&&k1(n,e)},$A=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=ct;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:E1(i,e,t):(s=!e.$stable,A1(e,i)),o=e}else e&&(k1(n,e),o={default:1});if(s)for(const a in i)!x1(a)&&o[a]==null&&delete i[a]};function Vh(n,e,t,r,i=!1){if(we(n)){n.forEach((h,p)=>Vh(h,e&&(we(e)?e[p]:e),t,r,i));return}if(Sa(r)&&!i)return;const s=r.shapeFlag&4?Ru(r.component):r.el,o=i?null:s,{i:a,r:l}=n,c=e&&e.r,u=a.refs===ct?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(wt(c)?(u[c]=null,Ve(f,c)&&(f[c]=null)):bt(c)&&(c.value=null)),Me(l))mi(l,a,12,[o,u]);else{const h=wt(l),p=bt(l);if(h||p){const d=()=>{if(n.f){const g=h?Ve(f,l)?f[l]:u[l]:l.value;i?we(g)&&op(g,s):we(g)?g.includes(s)||g.push(s):h?(u[l]=[s],Ve(f,l)&&(f[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else h?(u[l]=o,Ve(f,l)&&(f[l]=o)):p&&(l.value=o,n.k&&(u[n.k]=o))};o?(d.id=-1,cn(d,t)):d()}}}const jA=Symbol("_vte"),HA=n=>n.__isTeleport,cn=r2;function VA(n){return zA(n)}function zA(n,e){const t=Db();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:p=Ln,insertStaticContent:d}=n,g=(O,A,D,W=null,G=null,Y=null,ne=void 0,C=null,x=!!A.dynamicChildren)=>{if(O===A)return;O&&!ts(O,A)&&(W=jt(O),Ae(O,G,Y,!0),O=null),A.patchFlag===-2&&(x=!1,A.dynamicChildren=null);const{type:I,ref:$,shapeFlag:Z}=A;switch(I){case ml:m(O,A,D,W);break;case un:y(O,A,D,W);break;case Ec:O==null&&w(A,D,W,ne);break;case ze:L(O,A,D,W,G,Y,ne,C,x);break;default:Z&1?S(O,A,D,W,G,Y,ne,C,x):Z&6?V(O,A,D,W,G,Y,ne,C,x):(Z&64||Z&128)&&I.process(O,A,D,W,G,Y,ne,C,x,gt)}$!=null&&G&&Vh($,O&&O.ref,Y,A||O,!A)},m=(O,A,D,W)=>{if(O==null)r(A.el=a(A.children),D,W);else{const G=A.el=O.el;A.children!==O.children&&c(G,A.children)}},y=(O,A,D,W)=>{O==null?r(A.el=l(A.children||""),D,W):A.el=O.el},w=(O,A,D,W)=>{[O.el,O.anchor]=d(O.children,A,D,W,O.el,O.anchor)},b=({el:O,anchor:A},D,W)=>{let G;for(;O&&O!==A;)G=h(O),r(O,D,W),O=G;r(A,D,W)},v=({el:O,anchor:A})=>{let D;for(;O&&O!==A;)D=h(O),i(O),O=D;i(A)},S=(O,A,D,W,G,Y,ne,C,x)=>{A.type==="svg"?ne="svg":A.type==="math"&&(ne="mathml"),O==null?_(A,D,W,G,Y,ne,C,x):E(O,A,G,Y,ne,C,x)},_=(O,A,D,W,G,Y,ne,C)=>{let x,I;const{props:$,shapeFlag:Z,transition:U,dirs:N}=O;if(x=O.el=o(O.type,Y,$&&$.is,$),Z&8?u(x,O.children):Z&16&&M(O.children,x,null,W,G,Mf(O,Y),ne,C),N&&Ui(O,null,W,"created"),k(x,O,O.scopeId,ne,W),$){for(const ve in $)ve!=="value"&&!_a(ve)&&s(x,ve,null,$[ve],Y,W);"value"in $&&s(x,"value",null,$.value,Y),(I=$.onVnodeBeforeMount)&&or(I,W,O)}N&&Ui(O,null,W,"beforeMount");const B=GA(G,U);B&&U.beforeEnter(x),r(x,A,D),((I=$&&$.onVnodeMounted)||B||N)&&cn(()=>{I&&or(I,W,O),B&&U.enter(x),N&&Ui(O,null,W,"mounted")},G)},k=(O,A,D,W,G)=>{if(D&&p(O,D),W)for(let Y=0;Y<W.length;Y++)p(O,W[Y]);if(G){let Y=G.subTree;if(A===Y){const ne=G.vnode;k(O,ne,ne.scopeId,ne.slotScopeIds,G.parent)}}},M=(O,A,D,W,G,Y,ne,C,x=0)=>{for(let I=x;I<O.length;I++){const $=O[I]=C?ni(O[I]):lr(O[I]);g(null,$,A,D,W,G,Y,ne,C)}},E=(O,A,D,W,G,Y,ne)=>{const C=A.el=O.el;let{patchFlag:x,dynamicChildren:I,dirs:$}=A;x|=O.patchFlag&16;const Z=O.props||ct,U=A.props||ct;let N;if(D&&Ki(D,!1),(N=U.onVnodeBeforeUpdate)&&or(N,D,A,O),$&&Ui(A,O,D,"beforeUpdate"),D&&Ki(D,!0),(Z.innerHTML&&U.innerHTML==null||Z.textContent&&U.textContent==null)&&u(C,""),I?F(O.dynamicChildren,I,C,D,W,Mf(A,G),Y):ne||ce(O,A,C,null,D,W,Mf(A,G),Y,!1),x>0){if(x&16)j(C,Z,U,D,G);else if(x&2&&Z.class!==U.class&&s(C,"class",null,U.class,G),x&4&&s(C,"style",Z.style,U.style,G),x&8){const B=A.dynamicProps;for(let ve=0;ve<B.length;ve++){const _e=B[ve],Xe=Z[_e],Tt=U[_e];(Tt!==Xe||_e==="value")&&s(C,_e,Xe,Tt,G,D)}}x&1&&O.children!==A.children&&u(C,A.children)}else!ne&&I==null&&j(C,Z,U,D,G);((N=U.onVnodeUpdated)||$)&&cn(()=>{N&&or(N,D,A,O),$&&Ui(A,O,D,"updated")},W)},F=(O,A,D,W,G,Y,ne)=>{for(let C=0;C<A.length;C++){const x=O[C],I=A[C],$=x.el&&(x.type===ze||!ts(x,I)||x.shapeFlag&70)?f(x.el):D;g(x,I,$,null,W,G,Y,ne,!0)}},j=(O,A,D,W,G)=>{if(A!==D){if(A!==ct)for(const Y in A)!_a(Y)&&!(Y in D)&&s(O,Y,A[Y],null,G,W);for(const Y in D){if(_a(Y))continue;const ne=D[Y],C=A[Y];ne!==C&&Y!=="value"&&s(O,Y,C,ne,G,W)}"value"in D&&s(O,"value",A.value,D.value,G)}},L=(O,A,D,W,G,Y,ne,C,x)=>{const I=A.el=O?O.el:a(""),$=A.anchor=O?O.anchor:a("");let{patchFlag:Z,dynamicChildren:U,slotScopeIds:N}=A;N&&(C=C?C.concat(N):N),O==null?(r(I,D,W),r($,D,W),M(A.children||[],D,$,G,Y,ne,C,x)):Z>0&&Z&64&&U&&O.dynamicChildren?(F(O.dynamicChildren,U,D,G,Y,ne,C),(A.key!=null||G&&A===G.subTree)&&T1(O,A,!0)):ce(O,A,D,$,G,Y,ne,C,x)},V=(O,A,D,W,G,Y,ne,C,x)=>{A.slotScopeIds=C,O==null?A.shapeFlag&512?G.ctx.activate(A,D,W,ne,x):ue(A,D,W,G,Y,ne,x):ke(O,A,x)},ue=(O,A,D,W,G,Y,ne)=>{const C=O.component=f2(O,W,G);if(Ou(O)&&(C.ctx.renderer=gt),h2(C,!1,ne),C.asyncDep){if(G&&G.registerDep(C,re,ne),!O.el){const x=C.subTree=z(un);y(null,x,A,D)}}else re(C,O,A,D,G,Y,ne)},ke=(O,A,D)=>{const W=A.component=O.component;if(e2(O,A,D))if(W.asyncDep&&!W.asyncResolved){le(W,A,D);return}else W.next=A,cA(W.update),W.effect.dirty=!0,W.update();else A.el=O.el,W.vnode=A},re=(O,A,D,W,G,Y,ne)=>{const C=()=>{if(O.isMounted){let{next:$,bu:Z,u:U,parent:N,vnode:B}=O;{const Xt=O1(O);if(Xt){$&&($.el=B.el,le(O,$,ne)),Xt.asyncDep.then(()=>{O.isUnmounted||C()});return}}let ve=$,_e;Ki(O,!1),$?($.el=B.el,le(O,$,ne)):$=B,Z&&kc(Z),(_e=$.props&&$.props.onVnodeBeforeUpdate)&&or(_e,N,$,B),Ki(O,!0);const Xe=If(O),Tt=O.subTree;O.subTree=Xe,g(Tt,Xe,f(Tt.el),jt(Tt),O,G,Y),$.el=Xe.el,ve===null&&t2(O,Xe.el),U&&cn(U,G),(_e=$.props&&$.props.onVnodeUpdated)&&cn(()=>or(_e,N,$,B),G)}else{let $;const{el:Z,props:U}=A,{bm:N,m:B,parent:ve}=O,_e=Sa(A);if(Ki(O,!1),N&&kc(N),!_e&&($=U&&U.onVnodeBeforeMount)&&or($,ve,A),Ki(O,!0),Z&&mn){const Xe=()=>{O.subTree=If(O),mn(Z,O.subTree,O,G,null)};_e?A.type.__asyncLoader().then(()=>!O.isUnmounted&&Xe()):Xe()}else{const Xe=O.subTree=If(O);g(null,Xe,D,W,O,G,Y),A.el=Xe.el}if(B&&cn(B,G),!_e&&($=U&&U.onVnodeMounted)){const Xe=A;cn(()=>or($,ve,Xe),G)}(A.shapeFlag&256||ve&&Sa(ve.vnode)&&ve.vnode.shapeFlag&256)&&O.a&&cn(O.a,G),O.isMounted=!0,A=D=W=null}},x=O.effect=new cp(C,Ln,()=>bp(I),O.scope),I=O.update=()=>{x.dirty&&x.run()};I.i=O,I.id=O.uid,Ki(O,!0),I()},le=(O,A,D)=>{A.component=O;const W=O.vnode.props;O.vnode=A,O.next=null,LA(O,A.props,W,D),$A(O,A.children,D),Ii(),Jm(O),Pi()},ce=(O,A,D,W,G,Y,ne,C,x=!1)=>{const I=O&&O.children,$=O?O.shapeFlag:0,Z=A.children,{patchFlag:U,shapeFlag:N}=A;if(U>0){if(U&128){me(I,Z,D,W,G,Y,ne,C,x);return}else if(U&256){Re(I,Z,D,W,G,Y,ne,C,x);return}}N&8?($&16&&dt(I,G,Y),Z!==I&&u(D,Z)):$&16?N&16?me(I,Z,D,W,G,Y,ne,C,x):dt(I,G,Y,!0):($&8&&u(D,""),N&16&&M(Z,D,W,G,Y,ne,C,x))},Re=(O,A,D,W,G,Y,ne,C,x)=>{O=O||oo,A=A||oo;const I=O.length,$=A.length,Z=Math.min(I,$);let U;for(U=0;U<Z;U++){const N=A[U]=x?ni(A[U]):lr(A[U]);g(O[U],N,D,null,G,Y,ne,C,x)}I>$?dt(O,G,Y,!0,!1,Z):M(A,D,W,G,Y,ne,C,x,Z)},me=(O,A,D,W,G,Y,ne,C,x)=>{let I=0;const $=A.length;let Z=O.length-1,U=$-1;for(;I<=Z&&I<=U;){const N=O[I],B=A[I]=x?ni(A[I]):lr(A[I]);if(ts(N,B))g(N,B,D,null,G,Y,ne,C,x);else break;I++}for(;I<=Z&&I<=U;){const N=O[Z],B=A[U]=x?ni(A[U]):lr(A[U]);if(ts(N,B))g(N,B,D,null,G,Y,ne,C,x);else break;Z--,U--}if(I>Z){if(I<=U){const N=U+1,B=N<$?A[N].el:W;for(;I<=U;)g(null,A[I]=x?ni(A[I]):lr(A[I]),D,B,G,Y,ne,C,x),I++}}else if(I>U)for(;I<=Z;)Ae(O[I],G,Y,!0),I++;else{const N=I,B=I,ve=new Map;for(I=B;I<=U;I++){const pe=A[I]=x?ni(A[I]):lr(A[I]);pe.key!=null&&ve.set(pe.key,I)}let _e,Xe=0;const Tt=U-B+1;let Xt=!1,Gs=0;const H=new Array(Tt);for(I=0;I<Tt;I++)H[I]=0;for(I=N;I<=Z;I++){const pe=O[I];if(Xe>=Tt){Ae(pe,G,Y,!0);continue}let Ne;if(pe.key!=null)Ne=ve.get(pe.key);else for(_e=B;_e<=U;_e++)if(H[_e-B]===0&&ts(pe,A[_e])){Ne=_e;break}Ne===void 0?Ae(pe,G,Y,!0):(H[Ne-B]=I+1,Ne>=Gs?Gs=Ne:Xt=!0,g(pe,A[Ne],D,null,G,Y,ne,C,x),Xe++)}const he=Xt?WA(H):oo;for(_e=he.length-1,I=Tt-1;I>=0;I--){const pe=B+I,Ne=A[pe],$e=pe+1<$?A[pe+1].el:W;H[I]===0?g(null,Ne,D,$e,G,Y,ne,C,x):Xt&&(_e<0||I!==he[_e]?Ce(Ne,D,$e,2):_e--)}}},Ce=(O,A,D,W,G=null)=>{const{el:Y,type:ne,transition:C,children:x,shapeFlag:I}=O;if(I&6){Ce(O.component.subTree,A,D,W);return}if(I&128){O.suspense.move(A,D,W);return}if(I&64){ne.move(O,A,D,gt);return}if(ne===ze){r(Y,A,D);for(let Z=0;Z<x.length;Z++)Ce(x[Z],A,D,W);r(O.anchor,A,D);return}if(ne===Ec){b(O,A,D);return}if(W!==2&&I&1&&C)if(W===0)C.beforeEnter(Y),r(Y,A,D),cn(()=>C.enter(Y),G);else{const{leave:Z,delayLeave:U,afterLeave:N}=C,B=()=>r(Y,A,D),ve=()=>{Z(Y,()=>{B(),N&&N()})};U?U(Y,B,ve):ve()}else r(Y,A,D)},Ae=(O,A,D,W=!1,G=!1)=>{const{type:Y,props:ne,ref:C,children:x,dynamicChildren:I,shapeFlag:$,patchFlag:Z,dirs:U,cacheIndex:N}=O;if(Z===-2&&(G=!1),C!=null&&Vh(C,null,D,O,!0),N!=null&&(A.renderCache[N]=void 0),$&256){A.ctx.deactivate(O);return}const B=$&1&&U,ve=!Sa(O);let _e;if(ve&&(_e=ne&&ne.onVnodeBeforeUnmount)&&or(_e,A,O),$&6)Oe(O.component,D,W);else{if($&128){O.suspense.unmount(D,W);return}B&&Ui(O,null,A,"beforeUnmount"),$&64?O.type.remove(O,A,D,gt,W):I&&!I.hasOnce&&(Y!==ze||Z>0&&Z&64)?dt(I,A,D,!1,!0):(Y===ze&&Z&384||!G&&$&16)&&dt(x,A,D),W&&Je(O)}(ve&&(_e=ne&&ne.onVnodeUnmounted)||B)&&cn(()=>{_e&&or(_e,A,O),B&&Ui(O,null,A,"unmounted")},D)},Je=O=>{const{type:A,el:D,anchor:W,transition:G}=O;if(A===ze){Ye(D,W);return}if(A===Ec){v(O);return}const Y=()=>{i(D),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(O.shapeFlag&1&&G&&!G.persisted){const{leave:ne,delayLeave:C}=G,x=()=>ne(D,Y);C?C(O.el,Y,x):x()}else Y()},Ye=(O,A)=>{let D;for(;O!==A;)D=h(O),i(O),O=D;i(A)},Oe=(O,A,D)=>{const{bum:W,scope:G,update:Y,subTree:ne,um:C,m:x,a:I}=O;ag(x),ag(I),W&&kc(W),G.stop(),Y&&(Y.active=!1,Ae(ne,O,A,D)),C&&cn(C,A),cn(()=>{O.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},dt=(O,A,D,W=!1,G=!1,Y=0)=>{for(let ne=Y;ne<O.length;ne++)Ae(O[ne],A,D,W,G)},jt=O=>{if(O.shapeFlag&6)return jt(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const A=h(O.anchor||O.el),D=A&&A[jA];return D?h(D):A};let St=!1;const Yt=(O,A,D)=>{O==null?A._vnode&&Ae(A._vnode,null,null,!0):g(A._vnode||null,O,A,null,null,null,D),St||(St=!0,Jm(),a1(),St=!1),A._vnode=O},gt={p:g,um:Ae,m:Ce,r:Je,mt:ue,mc:M,pc:ce,pbc:F,n:jt,o:n};let qt,mn;return{render:Yt,hydrate:qt,createApp:PA(Yt,qt)}}function Mf({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Ki({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function GA(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function T1(n,e,t=!1){const r=n.children,i=e.children;if(we(r)&&we(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=ni(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&T1(o,a)),a.type===ml&&(a.el=o.el)}}function WA(n){const e=n.slice(),t=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const c=n[r];if(c!==0){if(i=t[t.length-1],n[i]<c){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function O1(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:O1(e)}function ag(n){if(n)for(let e=0;e<n.length;e++)n[e].active=!1}const UA=Symbol.for("v-scx"),KA=()=>ka(UA);function YA(n,e){return Cp(n,null,e)}const $l={};function gr(n,e,t){return Cp(n,e,t)}function Cp(n,e,{immediate:t,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=ct){if(e&&s){const _=e;e=(...k)=>{_(...k),S()}}const l=zt,c=_=>r===!0?_:oi(_,r===!1?1:void 0);let u,f=!1,h=!1;if(bt(n)?(u=()=>n.value,f=bo(n)):wa(n)?(u=()=>c(n),f=!0):we(n)?(h=!0,f=n.some(_=>wa(_)||bo(_)),u=()=>n.map(_=>{if(bt(_))return _.value;if(wa(_))return c(_);if(Me(_))return mi(_,l,2)})):Me(n)?e?u=()=>mi(n,l,2):u=()=>(p&&p(),Fn(n,l,3,[d])):u=Ln,e&&r){const _=u;u=()=>oi(_())}let p,d=_=>{p=b.onStop=()=>{mi(_,l,4),p=b.onStop=void 0}},g;if(Nu)if(d=Ln,e?t&&Fn(e,l,3,[u(),h?[]:void 0,d]):u(),i==="sync"){const _=KA();g=_.__watcherHandles||(_.__watcherHandles=[])}else return Ln;let m=h?new Array(n.length).fill($l):$l;const y=()=>{if(!(!b.active||!b.dirty))if(e){const _=b.run();(r||f||(h?_.some((k,M)=>Si(k,m[M])):Si(_,m)))&&(p&&p(),Fn(e,l,3,[_,m===$l?void 0:h&&m[0]===$l?[]:m,d]),m=_)}else b.run()};y.allowRecurse=!!e;let w;i==="sync"?w=y:i==="post"?w=()=>cn(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),w=()=>bp(y));const b=new cp(u,Ln,w),v=Hb(),S=()=>{b.stop(),v&&op(v.effects,b)};return e?t?y():m=b.run():i==="post"?cn(b.run.bind(b),l&&l.suspense):b.run(),g&&g.push(S),S}function qA(n,e,t){const r=this.proxy,i=wt(n)?n.includes(".")?M1(r,n):()=>r[n]:n.bind(r,r);let s;Me(e)?s=e:(s=e.handler,t=e);const o=gl(this),a=Cp(i,s.bind(r),t);return o(),a}function M1(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function oi(n,e=1/0,t){if(e<=0||!rt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,bt(n))oi(n.value,e,t);else if(we(n))for(let r=0;r<n.length;r++)oi(n[r],e,t);else if(Fo(n)||ao(n))n.forEach(r=>{oi(r,e,t)});else if(Nb(n)){for(const r in n)oi(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&oi(n[r],e,t)}return n}const XA=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${xs(e)}Modifiers`]||n[`${Rs(e)}Modifiers`];function JA(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||ct;let i=t;const s=e.startsWith("update:"),o=s&&XA(r,e.slice(7));o&&(o.trim&&(i=t.map(u=>wt(u)?u.trim():u)),o.number&&(i=t.map(Gc)));let a,l=r[a=kf(e)]||r[a=kf(xs(e))];!l&&s&&(l=r[a=kf(Rs(e))]),l&&Fn(l,n,6,i);const c=r[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Fn(c,n,6,i)}}function I1(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!Me(n)){const l=c=>{const u=I1(c,e,!0);u&&(a=!0,Nt(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(rt(n)&&r.set(n,null),null):(we(s)?s.forEach(l=>o[l]=null):Nt(o,s),rt(n)&&r.set(n,o),o)}function Pu(n,e){return!n||!Su(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ve(n,e[0].toLowerCase()+e.slice(1))||Ve(n,Rs(e))||Ve(n,e))}function If(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:h,setupState:p,ctx:d,inheritAttrs:g}=n,m=Wc(n);let y,w;try{if(t.shapeFlag&4){const v=i||r,S=v;y=lr(c.call(S,v,u,f,p,h,d)),w=a}else{const v=e;y=lr(v.length>1?v(f,{attrs:a,slots:o,emit:l}):v(f,null)),w=e.props?a:QA(a)}}catch(v){Ea.length=0,ku(v,n,1),y=z(un)}let b=y;if(w&&g!==!1){const v=Object.keys(w),{shapeFlag:S}=b;v.length&&S&7&&(s&&v.some(sp)&&(w=ZA(w,s)),b=xi(b,w,!1,!0))}return t.dirs&&(b=xi(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(t.dirs):t.dirs),t.transition&&(b.transition=t.transition),y=b,Wc(m),y}const QA=n=>{let e;for(const t in n)(t==="class"||t==="style"||Su(t))&&((e||(e={}))[t]=n[t]);return e},ZA=(n,e)=>{const t={};for(const r in n)(!sp(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function e2(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?lg(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(o[h]!==r[h]&&!Pu(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?lg(r,o,c):!0:!!o;return!1}function lg(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!Pu(t,s))return!0}return!1}function t2({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const n2=n=>n.__isSuspense;function r2(n,e){e&&e.pendingBranch?we(n)?e.effects.push(...n):e.effects.push(n):uA(n)}const ze=Symbol.for("v-fgt"),ml=Symbol.for("v-txt"),un=Symbol.for("v-cmt"),Ec=Symbol.for("v-stc"),Ea=[];let Cn=null;function K(n=!1){Ea.push(Cn=n?null:[])}function i2(){Ea.pop(),Cn=Ea[Ea.length-1]||null}let Wa=1;function cg(n){Wa+=n,n<0&&Cn&&(Cn.hasOnce=!0)}function P1(n){return n.dynamicChildren=Wa>0?Cn||oo:null,i2(),Wa>0&&Cn&&Cn.push(n),n}function te(n,e,t,r,i,s){return P1(ie(n,e,t,r,i,s,!0))}function mt(n,e,t,r,i){return P1(z(n,e,t,r,i,!0))}function Yc(n){return n?n.__v_isVNode===!0:!1}function ts(n,e){return n.type===e.type&&n.key===e.key}const N1=({key:n})=>n??null,Tc=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?wt(n)||bt(n)||Me(n)?{i:Bt,r:n,k:e,f:!!t}:n:null);function ie(n,e=null,t=null,r=0,i=null,s=n===ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&N1(e),ref:e&&Tc(e),scopeId:c1,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Bt};return a?(Sp(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=wt(t)?8:16),Wa>0&&!o&&Cn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Cn.push(l),l}const z=s2;function s2(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===xA)&&(n=un),Yc(n)){const a=xi(n,e,!0);return t&&Sp(a,t),Wa>0&&!s&&Cn&&(a.shapeFlag&6?Cn[Cn.indexOf(n)]=a:Cn.push(a)),a.patchFlag=-2,a}if(g2(n)&&(n=n.__vccOpts),e){e=o2(e);let{class:a,style:l}=e;a&&!wt(a)&&(e.class=Sn(a)),rt(l)&&(e1(l)&&!we(l)&&(l=Nt({},l)),e.style=wn(l))}const o=wt(n)?1:n2(n)?128:HA(n)?64:rt(n)?4:Me(n)?2:0;return ie(n,e,t,r,i,o,s,!0)}function o2(n){return n?e1(n)||w1(n)?Nt({},n):n:null}function xi(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=n,c=e?l2(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&N1(c),ref:e&&e.ref?t&&s?we(s)?s.concat(Tc(e)):[s,Tc(e)]:Tc(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==ze?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&xi(n.ssContent),ssFallback:n.ssFallback&&xi(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Uc(u,l.clone(u)),u}function je(n=" ",e=0){return z(ml,null,n,e)}function a2(n,e){const t=z(Ec,null,n);return t.staticCount=e,t}function He(n="",e=!1){return e?(K(),mt(un,null,n)):z(un,null,n)}function lr(n){return n==null||typeof n=="boolean"?z(un):we(n)?z(ze,null,n.slice()):typeof n=="object"?ni(n):z(ml,null,String(n))}function ni(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:xi(n)}function Sp(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(we(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Sp(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!w1(e)?e._ctx=Bt:i===3&&Bt&&(Bt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:Bt},t=32):(e=String(e),r&64?(t=16,e=[je(e)]):t=8);n.children=e,n.shapeFlag|=t}function l2(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Sn([e.class,r.class]));else if(i==="style")e.style=wn([e.style,r.style]);else if(Su(i)){const s=e[i],o=r[i];o&&s!==o&&!(we(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function or(n,e,t,r=null){Fn(n,e,7,[t,r])}const c2=y1();let u2=0;function f2(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||c2,s={uid:u2++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new jb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:S1(r,i),emitsOptions:I1(r,i),emit:null,emitted:null,propsDefaults:ct,inheritAttrs:r.inheritAttrs,ctx:ct,data:ct,props:ct,attrs:ct,slots:ct,refs:ct,setupState:ct,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=JA.bind(null,s),n.ce&&n.ce(s),s}let zt=null;const br=()=>zt||Bt;let qc,zh;{const n=Db(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};qc=e("__VUE_INSTANCE_SETTERS__",t=>zt=t),zh=e("__VUE_SSR_SETTERS__",t=>Nu=t)}const gl=n=>{const e=zt;return qc(n),n.scope.on(),()=>{n.scope.off(),qc(e)}},ug=()=>{zt&&zt.scope.off(),qc(null)};function R1(n){return n.vnode.shapeFlag&4}let Nu=!1;function h2(n,e=!1,t=!1){e&&zh(e);const{props:r,children:i}=n.vnode,s=R1(n);RA(n,r,s,e),BA(n,i,t);const o=s?d2(n,e):void 0;return e&&zh(!1),o}function d2(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,AA);const{setup:r}=t;if(r){const i=n.setupContext=r.length>1?m2(n):null,s=gl(n);Ii();const o=mi(r,n,0,[n.props,i]);if(Pi(),s(),Ib(o)){if(o.then(ug,ug),e)return o.then(a=>{fg(n,a,e)}).catch(a=>{ku(a,n,0)});n.asyncDep=o}else fg(n,o,e)}else L1(n,e)}function fg(n,e,t){Me(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:rt(e)&&(n.setupState=i1(e)),L1(n,t)}let hg;function L1(n,e,t){const r=n.type;if(!n.render){if(!e&&hg&&!r.render){const i=r.template||_p(n).template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Nt(Nt({isCustomElement:s,delimiters:a},o),l);r.render=hg(i,c)}}n.render=r.render||Ln}{const i=gl(n);Ii();try{kA(n)}finally{Pi(),i()}}}const p2={get(n,e){return pn(n,"get",""),n[e]}};function m2(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,p2),slots:n.slots,emit:n.emit,expose:e}}function Ru(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(i1(t1(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in xa)return xa[t](n)},has(e,t){return t in e||t in xa}})):n.proxy}function g2(n){return Me(n)&&"__vccOpts"in n}const At=(n,e)=>nA(n,e,Nu);function $o(n,e,t){const r=arguments.length;return r===2?rt(e)&&!we(e)?Yc(e)?z(n,null,[e]):z(n,e):z(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Yc(t)&&(t=[t]),z(n,e,t))}const v2="3.4.34";/**
* @vue/runtime-dom v3.4.34
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const y2="http://www.w3.org/2000/svg",b2="http://www.w3.org/1998/Math/MathML",Or=typeof document<"u"?document:null,dg=Or&&Or.createElement("template"),_2={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Or.createElementNS(y2,n):e==="mathml"?Or.createElementNS(b2,n):t?Or.createElement(n,{is:t}):Or.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Or.createTextNode(n),createComment:n=>Or.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Or.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{dg.innerHTML=r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n;const a=dg.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Kr="transition",Jo="animation",Ua=Symbol("_vtc"),Lu=(n,{slots:e})=>$o(pA,w2(n),e);Lu.displayName="Transition";const D1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Lu.props=Nt({},u1,D1);const Yi=(n,e=[])=>{we(n)?n.forEach(t=>t(...e)):n&&n(...e)},pg=n=>n?we(n)?n.some(e=>e.length>1):n.length>1:!1;function w2(n){const e={};for(const L in n)L in D1||(e[L]=n[L]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=n,d=C2(i),g=d&&d[0],m=d&&d[1],{onBeforeEnter:y,onEnter:w,onEnterCancelled:b,onLeave:v,onLeaveCancelled:S,onBeforeAppear:_=y,onAppear:k=w,onAppearCancelled:M=b}=e,E=(L,V,ue)=>{qi(L,V?u:a),qi(L,V?c:o),ue&&ue()},F=(L,V)=>{L._isLeaving=!1,qi(L,f),qi(L,p),qi(L,h),V&&V()},j=L=>(V,ue)=>{const ke=L?k:w,re=()=>E(V,L,ue);Yi(ke,[V,re]),mg(()=>{qi(V,L?l:s),Yr(V,L?u:a),pg(ke)||gg(V,r,g,re)})};return Nt(e,{onBeforeEnter(L){Yi(y,[L]),Yr(L,s),Yr(L,o)},onBeforeAppear(L){Yi(_,[L]),Yr(L,l),Yr(L,c)},onEnter:j(!1),onAppear:j(!0),onLeave(L,V){L._isLeaving=!0;const ue=()=>F(L,V);Yr(L,f),Yr(L,h),A2(),mg(()=>{L._isLeaving&&(qi(L,f),Yr(L,p),pg(v)||gg(L,r,m,ue))}),Yi(v,[L,ue])},onEnterCancelled(L){E(L,!1),Yi(b,[L])},onAppearCancelled(L){E(L,!0),Yi(M,[L])},onLeaveCancelled(L){F(L),Yi(S,[L])}})}function C2(n){if(n==null)return null;if(rt(n))return[Pf(n.enter),Pf(n.leave)];{const e=Pf(n);return[e,e]}}function Pf(n){return Ax(n)}function Yr(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ua]||(n[Ua]=new Set)).add(e)}function qi(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ua];t&&(t.delete(e),t.size||(n[Ua]=void 0))}function mg(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let S2=0;function gg(n,e,t,r){const i=n._endId=++S2,s=()=>{i===n._endId&&r()};if(t)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=x2(n,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{n.removeEventListener(c,h),s()},h=p=>{p.target===n&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),n.addEventListener(c,h)}function x2(n,e){const t=window.getComputedStyle(n),r=d=>(t[d]||"").split(", "),i=r(`${Kr}Delay`),s=r(`${Kr}Duration`),o=vg(i,s),a=r(`${Jo}Delay`),l=r(`${Jo}Duration`),c=vg(a,l);let u=null,f=0,h=0;e===Kr?o>0&&(u=Kr,f=o,h=s.length):e===Jo?c>0&&(u=Jo,f=c,h=l.length):(f=Math.max(o,c),u=f>0?o>c?Kr:Jo:null,h=u?u===Kr?s.length:l.length:0);const p=u===Kr&&/\b(transform|all)(,|$)/.test(r(`${Kr}Property`).toString());return{type:u,timeout:f,propCount:h,hasTransform:p}}function vg(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>yg(t)+yg(n[r])))}function yg(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function A2(){return document.body.offsetHeight}function k2(n,e,t){const r=n[Ua];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const bg=Symbol("_vod"),E2=Symbol("_vsh"),T2=Symbol(""),O2=/(^|;)\s*display\s*:/;function M2(n,e,t){const r=n.style,i=wt(t);let s=!1;if(t&&!i){if(e)if(wt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Oc(r,a,"")}else for(const o in e)t[o]==null&&Oc(r,o,"");for(const o in t)o==="display"&&(s=!0),Oc(r,o,t[o])}else if(i){if(e!==t){const o=r[T2];o&&(t+=";"+o),r.cssText=t,s=O2.test(t)}}else e&&n.removeAttribute("style");bg in n&&(n[bg]=s?r.display:"",n[E2]&&(r.display="none"))}const _g=/\s*!important$/;function Oc(n,e,t){if(we(t))t.forEach(r=>Oc(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=I2(n,e);_g.test(t)?n.setProperty(Rs(r),t.replace(_g,""),"important"):n[r]=t}}const wg=["Webkit","Moz","ms"],Nf={};function I2(n,e){const t=Nf[e];if(t)return t;let r=xs(e);if(r!=="filter"&&r in n)return Nf[e]=r;r=Rb(r);for(let i=0;i<wg.length;i++){const s=wg[i]+r;if(s in n)return Nf[e]=s}return e}const Cg="http://www.w3.org/1999/xlink";function Sg(n,e,t,r,i,s=Ix(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Cg,e.slice(6,e.length)):n.setAttributeNS(Cg,e,t):t==null||s&&!Fb(t)?n.removeAttribute(e):n.setAttribute(e,s?"":yr(t)?String(t):t)}function P2(n,e,t,r){if(e==="innerHTML"||e==="textContent"){if(t==null)return;n[e]=t;return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?n.getAttribute("value")||"":n.value,a=t==null?"":String(t);(o!==a||!("_value"in n))&&(n.value=a),t==null&&n.removeAttribute(e),n._value=t;return}let s=!1;if(t===""||t==null){const o=typeof n[e];o==="boolean"?t=Fb(t):t==null&&o==="string"?(t="",s=!0):o==="number"&&(t=0,s=!0)}try{n[e]=t}catch{}s&&n.removeAttribute(e)}function ai(n,e,t,r){n.addEventListener(e,t,r)}function N2(n,e,t,r){n.removeEventListener(e,t,r)}const xg=Symbol("_vei");function R2(n,e,t,r,i=null){const s=n[xg]||(n[xg]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=L2(e);if(r){const c=s[e]=B2(r,i);ai(n,a,c,l)}else o&&(N2(n,a,o,l),s[e]=void 0)}}const Ag=/(?:Once|Passive|Capture)$/;function L2(n){let e;if(Ag.test(n)){e={};let r;for(;r=n.match(Ag);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Rs(n.slice(2)),e]}let Rf=0;const D2=Promise.resolve(),F2=()=>Rf||(D2.then(()=>Rf=0),Rf=Date.now());function B2(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Fn($2(r,t.value),e,5,[r])};return t.value=n,t.attached=F2(),t}function $2(n,e){if(we(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const kg=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,j2=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?k2(n,r,o):e==="style"?M2(n,t,r):Su(e)?sp(e)||R2(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):H2(n,e,r,o))?(P2(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Sg(n,e,r,o,s,e!=="value")):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),Sg(n,e,r,o))};function H2(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&kg(e)&&Me(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return kg(e)&&wt(t)?!1:e in n}const _o=n=>{const e=n.props["onUpdate:modelValue"]||!1;return we(e)?t=>kc(e,t):e};function V2(n){n.target.composing=!0}function Eg(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Lr=Symbol("_assign"),F1={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[Lr]=_o(i);const s=r||i.props&&i.props.type==="number";ai(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=Gc(a)),n[Lr](a)}),t&&ai(n,"change",()=>{n.value=n.value.trim()}),e||(ai(n,"compositionstart",V2),ai(n,"compositionend",Eg),ai(n,"change",Eg))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(n[Lr]=_o(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?Gc(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===l)||(n.value=l))}},z2={deep:!0,created(n,e,t){n[Lr]=_o(t),ai(n,"change",()=>{const r=n._modelValue,i=Ka(n),s=n.checked,o=n[Lr];if(we(r)){const a=lp(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Fo(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(B1(n,s))})},mounted:Tg,beforeUpdate(n,e,t){n[Lr]=_o(t),Tg(n,e,t)}};function Tg(n,{value:e,oldValue:t},r){n._modelValue=e,we(e)?n.checked=lp(e,r.props.value)>-1:Fo(e)?n.checked=e.has(r.props.value):e!==t&&(n.checked=dl(e,B1(n,!0)))}const G2={deep:!0,created(n,{value:e,modifiers:{number:t}},r){const i=Fo(e);ai(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?Gc(Ka(o)):Ka(o));n[Lr](n.multiple?i?new Set(s):s:s[0]),n._assigning=!0,Eu(()=>{n._assigning=!1})}),n[Lr]=_o(r)},mounted(n,{value:e,modifiers:{number:t}}){Og(n,e)},beforeUpdate(n,e,t){n[Lr]=_o(t)},updated(n,{value:e,modifiers:{number:t}}){n._assigning||Og(n,e)}};function Og(n,e,t){const r=n.multiple,i=we(e);if(!(r&&!i&&!Fo(e))){for(let s=0,o=n.options.length;s<o;s++){const a=n.options[s],l=Ka(a);if(r)if(i){const c=typeof l;c==="string"||c==="number"?a.selected=e.some(u=>String(u)===String(l)):a.selected=lp(e,l)>-1}else a.selected=e.has(l);else if(dl(Ka(a),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!r&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Ka(n){return"_value"in n?n._value:n.value}function B1(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const W2=["ctrl","shift","alt","meta"],U2={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>W2.some(t=>n[`${t}Key`]&&!e.includes(t))},jo=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=U2[e[o]];if(a&&a(i,e))return}return n(i,...s)})},K2=Nt({patchProp:j2},_2);let Mg;function Y2(){return Mg||(Mg=VA(K2))}const q2=(...n)=>{const e=Y2().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=J2(r);if(!i)return;const s=e._component;!Me(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,X2(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function X2(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function J2(n){return wt(n)?document.querySelector(n):n}/*!
  * shared v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Xc=typeof window<"u",Ni=(n,e=!1)=>e?Symbol.for(n):Symbol(n),Q2=(n,e,t)=>Z2({l:n,k:e,s:t}),Z2=n=>JSON.stringify(n).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),yt=n=>typeof n=="number"&&isFinite(n),ek=n=>j1(n)==="[object Date]",Ai=n=>j1(n)==="[object RegExp]",Du=n=>Ee(n)&&Object.keys(n).length===0,$t=Object.assign,tk=Object.create,Ze=(n=null)=>tk(n);let Ig;const Ir=()=>Ig||(Ig=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Ze());function Pg(n){return n.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const nk=Object.prototype.hasOwnProperty;function Jn(n,e){return nk.call(n,e)}const ot=Array.isArray,st=n=>typeof n=="function",oe=n=>typeof n=="string",Fe=n=>typeof n=="boolean",Ue=n=>n!==null&&typeof n=="object",rk=n=>Ue(n)&&st(n.then)&&st(n.catch),$1=Object.prototype.toString,j1=n=>$1.call(n),Ee=n=>{if(!Ue(n))return!1;const e=Object.getPrototypeOf(n);return e===null||e.constructor===Object},ik=n=>n==null?"":ot(n)||Ee(n)&&n.toString===$1?JSON.stringify(n,null,2):String(n);function sk(n,e=""){return n.reduce((t,r,i)=>i===0?t+r:t+e+r,"")}function Fu(n){let e=n;return()=>++e}function ok(n,e){typeof console<"u"&&(console.warn("[intlify] "+n),e&&console.warn(e.stack))}const jl=n=>!Ue(n)||ot(n);function Mc(n,e){if(jl(n)||jl(e))throw new Error("Invalid value");const t=[{src:n,des:e}];for(;t.length;){const{src:r,des:i}=t.pop();Object.keys(r).forEach(s=>{s!=="__proto__"&&(Ue(r[s])&&!Ue(i[s])&&(i[s]=Array.isArray(r[s])?[]:Ze()),jl(i[s])||jl(r[s])?i[s]=r[s]:t.push({src:r[s],des:i[s]}))})}}/*!
  * message-compiler v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function ak(n,e,t){return{line:n,column:e,offset:t}}function Jc(n,e,t){return{start:n,end:e}}const lk=/\{([0-9a-zA-Z]+)\}/g;function H1(n,...e){return e.length===1&&ck(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),n.replace(lk,(t,r)=>e.hasOwnProperty(r)?e[r]:"")}const V1=Object.assign,Ng=n=>typeof n=="string",ck=n=>n!==null&&typeof n=="object";function z1(n,e=""){return n.reduce((t,r,i)=>i===0?t+r:t+e+r,"")}const xp={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},uk={[xp.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function fk(n,e,...t){const r=H1(uk[n],...t||[]),i={message:String(r),code:n};return e&&(i.location=e),i}const xe={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},hk={[xe.EXPECTED_TOKEN]:"Expected token: '{0}'",[xe.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[xe.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[xe.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[xe.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[xe.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[xe.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[xe.EMPTY_PLACEHOLDER]:"Empty placeholder",[xe.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[xe.INVALID_LINKED_FORMAT]:"Invalid linked format",[xe.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[xe.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[xe.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[xe.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[xe.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[xe.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Ho(n,e,t={}){const{domain:r,messages:i,args:s}=t,o=H1((i||hk)[n]||"",...s||[]),a=new SyntaxError(String(o));return a.code=n,e&&(a.location=e),a.domain=r,a}function dk(n){throw n}const Ar=" ",pk="\r",Zt=`
`,mk="\u2028",gk="\u2029";function vk(n){const e=n;let t=0,r=1,i=1,s=0;const o=k=>e[k]===pk&&e[k+1]===Zt,a=k=>e[k]===Zt,l=k=>e[k]===gk,c=k=>e[k]===mk,u=k=>o(k)||a(k)||l(k)||c(k),f=()=>t,h=()=>r,p=()=>i,d=()=>s,g=k=>o(k)||l(k)||c(k)?Zt:e[k],m=()=>g(t),y=()=>g(t+s);function w(){return s=0,u(t)&&(r++,i=0),o(t)&&t++,t++,i++,e[t]}function b(){return o(t+s)&&s++,s++,e[t+s]}function v(){t=0,r=1,i=1,s=0}function S(k=0){s=k}function _(){const k=t+s;for(;k!==t;)w();s=0}return{index:f,line:h,column:p,peekOffset:d,charAt:g,currentChar:m,currentPeek:y,next:w,peek:b,reset:v,resetPeek:S,skipToPeek:_}}const qr=void 0,yk=".",Rg="'",bk="tokenizer";function _k(n,e={}){const t=e.location!==!1,r=vk(n),i=()=>r.index(),s=()=>ak(r.line(),r.column(),r.index()),o=s(),a=i(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function f(C,x,I,...$){const Z=c();if(x.column+=I,x.offset+=I,u){const U=t?Jc(Z.startLoc,x):null,N=Ho(C,U,{domain:bk,args:$});u(N)}}function h(C,x,I){C.endLoc=s(),C.currentType=x;const $={type:x};return t&&($.loc=Jc(C.startLoc,C.endLoc)),I!=null&&($.value=I),$}const p=C=>h(C,14);function d(C,x){return C.currentChar()===x?(C.next(),x):(f(xe.EXPECTED_TOKEN,s(),0,x),"")}function g(C){let x="";for(;C.currentPeek()===Ar||C.currentPeek()===Zt;)x+=C.currentPeek(),C.peek();return x}function m(C){const x=g(C);return C.skipToPeek(),x}function y(C){if(C===qr)return!1;const x=C.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x===95}function w(C){if(C===qr)return!1;const x=C.charCodeAt(0);return x>=48&&x<=57}function b(C,x){const{currentType:I}=x;if(I!==2)return!1;g(C);const $=y(C.currentPeek());return C.resetPeek(),$}function v(C,x){const{currentType:I}=x;if(I!==2)return!1;g(C);const $=C.currentPeek()==="-"?C.peek():C.currentPeek(),Z=w($);return C.resetPeek(),Z}function S(C,x){const{currentType:I}=x;if(I!==2)return!1;g(C);const $=C.currentPeek()===Rg;return C.resetPeek(),$}function _(C,x){const{currentType:I}=x;if(I!==8)return!1;g(C);const $=C.currentPeek()===".";return C.resetPeek(),$}function k(C,x){const{currentType:I}=x;if(I!==9)return!1;g(C);const $=y(C.currentPeek());return C.resetPeek(),$}function M(C,x){const{currentType:I}=x;if(!(I===8||I===12))return!1;g(C);const $=C.currentPeek()===":";return C.resetPeek(),$}function E(C,x){const{currentType:I}=x;if(I!==10)return!1;const $=()=>{const U=C.currentPeek();return U==="{"?y(C.peek()):U==="@"||U==="%"||U==="|"||U===":"||U==="."||U===Ar||!U?!1:U===Zt?(C.peek(),$()):L(C,!1)},Z=$();return C.resetPeek(),Z}function F(C){g(C);const x=C.currentPeek()==="|";return C.resetPeek(),x}function j(C){const x=g(C),I=C.currentPeek()==="%"&&C.peek()==="{";return C.resetPeek(),{isModulo:I,hasSpace:x.length>0}}function L(C,x=!0){const I=(Z=!1,U="",N=!1)=>{const B=C.currentPeek();return B==="{"?U==="%"?!1:Z:B==="@"||!B?U==="%"?!0:Z:B==="%"?(C.peek(),I(Z,"%",!0)):B==="|"?U==="%"||N?!0:!(U===Ar||U===Zt):B===Ar?(C.peek(),I(!0,Ar,N)):B===Zt?(C.peek(),I(!0,Zt,N)):!0},$=I();return x&&C.resetPeek(),$}function V(C,x){const I=C.currentChar();return I===qr?qr:x(I)?(C.next(),I):null}function ue(C){const x=C.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===95||x===36}function ke(C){return V(C,ue)}function re(C){const x=C.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===95||x===36||x===45}function le(C){return V(C,re)}function ce(C){const x=C.charCodeAt(0);return x>=48&&x<=57}function Re(C){return V(C,ce)}function me(C){const x=C.charCodeAt(0);return x>=48&&x<=57||x>=65&&x<=70||x>=97&&x<=102}function Ce(C){return V(C,me)}function Ae(C){let x="",I="";for(;x=Re(C);)I+=x;return I}function Je(C){m(C);const x=C.currentChar();return x!=="%"&&f(xe.EXPECTED_TOKEN,s(),0,x),C.next(),"%"}function Ye(C){let x="";for(;;){const I=C.currentChar();if(I==="{"||I==="}"||I==="@"||I==="|"||!I)break;if(I==="%")if(L(C))x+=I,C.next();else break;else if(I===Ar||I===Zt)if(L(C))x+=I,C.next();else{if(F(C))break;x+=I,C.next()}else x+=I,C.next()}return x}function Oe(C){m(C);let x="",I="";for(;x=le(C);)I+=x;return C.currentChar()===qr&&f(xe.UNTERMINATED_CLOSING_BRACE,s(),0),I}function dt(C){m(C);let x="";return C.currentChar()==="-"?(C.next(),x+=`-${Ae(C)}`):x+=Ae(C),C.currentChar()===qr&&f(xe.UNTERMINATED_CLOSING_BRACE,s(),0),x}function jt(C){return C!==Rg&&C!==Zt}function St(C){m(C),d(C,"'");let x="",I="";for(;x=V(C,jt);)x==="\\"?I+=Yt(C):I+=x;const $=C.currentChar();return $===Zt||$===qr?(f(xe.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),$===Zt&&(C.next(),d(C,"'")),I):(d(C,"'"),I)}function Yt(C){const x=C.currentChar();switch(x){case"\\":case"'":return C.next(),`\\${x}`;case"u":return gt(C,x,4);case"U":return gt(C,x,6);default:return f(xe.UNKNOWN_ESCAPE_SEQUENCE,s(),0,x),""}}function gt(C,x,I){d(C,x);let $="";for(let Z=0;Z<I;Z++){const U=Ce(C);if(!U){f(xe.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${x}${$}${C.currentChar()}`);break}$+=U}return`\\${x}${$}`}function qt(C){return C!=="{"&&C!=="}"&&C!==Ar&&C!==Zt}function mn(C){m(C);let x="",I="";for(;x=V(C,qt);)I+=x;return I}function O(C){let x="",I="";for(;x=ke(C);)I+=x;return I}function A(C){const x=I=>{const $=C.currentChar();return $==="{"||$==="%"||$==="@"||$==="|"||$==="("||$===")"||!$||$===Ar?I:(I+=$,C.next(),x(I))};return x("")}function D(C){m(C);const x=d(C,"|");return m(C),x}function W(C,x){let I=null;switch(C.currentChar()){case"{":return x.braceNest>=1&&f(xe.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),C.next(),I=h(x,2,"{"),m(C),x.braceNest++,I;case"}":return x.braceNest>0&&x.currentType===2&&f(xe.EMPTY_PLACEHOLDER,s(),0),C.next(),I=h(x,3,"}"),x.braceNest--,x.braceNest>0&&m(C),x.inLinked&&x.braceNest===0&&(x.inLinked=!1),I;case"@":return x.braceNest>0&&f(xe.UNTERMINATED_CLOSING_BRACE,s(),0),I=G(C,x)||p(x),x.braceNest=0,I;default:{let Z=!0,U=!0,N=!0;if(F(C))return x.braceNest>0&&f(xe.UNTERMINATED_CLOSING_BRACE,s(),0),I=h(x,1,D(C)),x.braceNest=0,x.inLinked=!1,I;if(x.braceNest>0&&(x.currentType===5||x.currentType===6||x.currentType===7))return f(xe.UNTERMINATED_CLOSING_BRACE,s(),0),x.braceNest=0,Y(C,x);if(Z=b(C,x))return I=h(x,5,Oe(C)),m(C),I;if(U=v(C,x))return I=h(x,6,dt(C)),m(C),I;if(N=S(C,x))return I=h(x,7,St(C)),m(C),I;if(!Z&&!U&&!N)return I=h(x,13,mn(C)),f(xe.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,I.value),m(C),I;break}}return I}function G(C,x){const{currentType:I}=x;let $=null;const Z=C.currentChar();switch((I===8||I===9||I===12||I===10)&&(Z===Zt||Z===Ar)&&f(xe.INVALID_LINKED_FORMAT,s(),0),Z){case"@":return C.next(),$=h(x,8,"@"),x.inLinked=!0,$;case".":return m(C),C.next(),h(x,9,".");case":":return m(C),C.next(),h(x,10,":");default:return F(C)?($=h(x,1,D(C)),x.braceNest=0,x.inLinked=!1,$):_(C,x)||M(C,x)?(m(C),G(C,x)):k(C,x)?(m(C),h(x,12,O(C))):E(C,x)?(m(C),Z==="{"?W(C,x)||$:h(x,11,A(C))):(I===8&&f(xe.INVALID_LINKED_FORMAT,s(),0),x.braceNest=0,x.inLinked=!1,Y(C,x))}}function Y(C,x){let I={type:14};if(x.braceNest>0)return W(C,x)||p(x);if(x.inLinked)return G(C,x)||p(x);switch(C.currentChar()){case"{":return W(C,x)||p(x);case"}":return f(xe.UNBALANCED_CLOSING_BRACE,s(),0),C.next(),h(x,3,"}");case"@":return G(C,x)||p(x);default:{if(F(C))return I=h(x,1,D(C)),x.braceNest=0,x.inLinked=!1,I;const{isModulo:Z,hasSpace:U}=j(C);if(Z)return U?h(x,0,Ye(C)):h(x,4,Je(C));if(L(C))return h(x,0,Ye(C));break}}return I}function ne(){const{currentType:C,offset:x,startLoc:I,endLoc:$}=l;return l.lastType=C,l.lastOffset=x,l.lastStartLoc=I,l.lastEndLoc=$,l.offset=i(),l.startLoc=s(),r.currentChar()===qr?h(l,14):Y(r,l)}return{nextToken:ne,currentOffset:i,currentPosition:s,context:c}}const wk="parser",Ck=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Sk(n,e,t){switch(n){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||t,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function xk(n={}){const e=n.location!==!1,{onError:t,onWarn:r}=n;function i(b,v,S,_,...k){const M=b.currentPosition();if(M.offset+=_,M.column+=_,t){const E=e?Jc(S,M):null,F=Ho(v,E,{domain:wk,args:k});t(F)}}function s(b,v,S,_,...k){const M=b.currentPosition();if(M.offset+=_,M.column+=_,r){const E=e?Jc(S,M):null;r(fk(v,E,k))}}function o(b,v,S){const _={type:b};return e&&(_.start=v,_.end=v,_.loc={start:S,end:S}),_}function a(b,v,S,_){e&&(b.end=v,b.loc&&(b.loc.end=S))}function l(b,v){const S=b.context(),_=o(3,S.offset,S.startLoc);return _.value=v,a(_,b.currentOffset(),b.currentPosition()),_}function c(b,v){const S=b.context(),{lastOffset:_,lastStartLoc:k}=S,M=o(5,_,k);return M.index=parseInt(v,10),b.nextToken(),a(M,b.currentOffset(),b.currentPosition()),M}function u(b,v,S){const _=b.context(),{lastOffset:k,lastStartLoc:M}=_,E=o(4,k,M);return E.key=v,S===!0&&(E.modulo=!0),b.nextToken(),a(E,b.currentOffset(),b.currentPosition()),E}function f(b,v){const S=b.context(),{lastOffset:_,lastStartLoc:k}=S,M=o(9,_,k);return M.value=v.replace(Ck,Sk),b.nextToken(),a(M,b.currentOffset(),b.currentPosition()),M}function h(b){const v=b.nextToken(),S=b.context(),{lastOffset:_,lastStartLoc:k}=S,M=o(8,_,k);return v.type!==12?(i(b,xe.UNEXPECTED_EMPTY_LINKED_MODIFIER,S.lastStartLoc,0),M.value="",a(M,_,k),{nextConsumeToken:v,node:M}):(v.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,Un(v)),M.value=v.value||"",a(M,b.currentOffset(),b.currentPosition()),{node:M})}function p(b,v){const S=b.context(),_=o(7,S.offset,S.startLoc);return _.value=v,a(_,b.currentOffset(),b.currentPosition()),_}function d(b){const v=b.context(),S=o(6,v.offset,v.startLoc);let _=b.nextToken();if(_.type===9){const k=h(b);S.modifier=k.node,_=k.nextConsumeToken||b.nextToken()}switch(_.type!==10&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(_)),_=b.nextToken(),_.type===2&&(_=b.nextToken()),_.type){case 11:_.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(_)),S.key=p(b,_.value||"");break;case 5:_.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(_)),S.key=u(b,_.value||"");break;case 6:_.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(_)),S.key=c(b,_.value||"");break;case 7:_.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(_)),S.key=f(b,_.value||"");break;default:{i(b,xe.UNEXPECTED_EMPTY_LINKED_KEY,v.lastStartLoc,0);const k=b.context(),M=o(7,k.offset,k.startLoc);return M.value="",a(M,k.offset,k.startLoc),S.key=M,a(S,k.offset,k.startLoc),{nextConsumeToken:_,node:S}}}return a(S,b.currentOffset(),b.currentPosition()),{node:S}}function g(b){const v=b.context(),S=v.currentType===1?b.currentOffset():v.offset,_=v.currentType===1?v.endLoc:v.startLoc,k=o(2,S,_);k.items=[];let M=null,E=null;do{const L=M||b.nextToken();switch(M=null,L.type){case 0:L.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(L)),k.items.push(l(b,L.value||""));break;case 6:L.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(L)),k.items.push(c(b,L.value||""));break;case 4:E=!0;break;case 5:L.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(L)),k.items.push(u(b,L.value||"",!!E)),E&&(s(b,xp.USE_MODULO_SYNTAX,v.lastStartLoc,0,Un(L)),E=null);break;case 7:L.value==null&&i(b,xe.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Un(L)),k.items.push(f(b,L.value||""));break;case 8:{const V=d(b);k.items.push(V.node),M=V.nextConsumeToken||null;break}}}while(v.currentType!==14&&v.currentType!==1);const F=v.currentType===1?v.lastOffset:b.currentOffset(),j=v.currentType===1?v.lastEndLoc:b.currentPosition();return a(k,F,j),k}function m(b,v,S,_){const k=b.context();let M=_.items.length===0;const E=o(1,v,S);E.cases=[],E.cases.push(_);do{const F=g(b);M||(M=F.items.length===0),E.cases.push(F)}while(k.currentType!==14);return M&&i(b,xe.MUST_HAVE_MESSAGES_IN_PLURAL,S,0),a(E,b.currentOffset(),b.currentPosition()),E}function y(b){const v=b.context(),{offset:S,startLoc:_}=v,k=g(b);return v.currentType===14?k:m(b,S,_,k)}function w(b){const v=_k(b,V1({},n)),S=v.context(),_=o(0,S.offset,S.startLoc);return e&&_.loc&&(_.loc.source=b),_.body=y(v),n.onCacheKey&&(_.cacheKey=n.onCacheKey(b)),S.currentType!==14&&i(v,xe.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,b[S.offset]||""),a(_,v.currentOffset(),v.currentPosition()),_}return{parse:w}}function Un(n){if(n.type===14)return"EOF";const e=(n.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function Ak(n,e={}){const t={ast:n,helpers:new Set};return{context:()=>t,helper:s=>(t.helpers.add(s),s)}}function Lg(n,e){for(let t=0;t<n.length;t++)Ap(n[t],e)}function Ap(n,e){switch(n.type){case 1:Lg(n.cases,e),e.helper("plural");break;case 2:Lg(n.items,e);break;case 6:{Ap(n.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function kk(n,e={}){const t=Ak(n);t.helper("normalize"),n.body&&Ap(n.body,t);const r=t.context();n.helpers=Array.from(r.helpers)}function Ek(n){const e=n.body;return e.type===2?Dg(e):e.cases.forEach(t=>Dg(t)),n}function Dg(n){if(n.items.length===1){const e=n.items[0];(e.type===3||e.type===9)&&(n.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<n.items.length;t++){const r=n.items[t];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===n.items.length){n.static=z1(e);for(let t=0;t<n.items.length;t++){const r=n.items[t];(r.type===3||r.type===9)&&delete r.value}}}}const Tk="minifier";function Js(n){switch(n.t=n.type,n.type){case 0:{const e=n;Js(e.body),e.b=e.body,delete e.body;break}case 1:{const e=n,t=e.cases;for(let r=0;r<t.length;r++)Js(t[r]);e.c=t,delete e.cases;break}case 2:{const e=n,t=e.items;for(let r=0;r<t.length;r++)Js(t[r]);e.i=t,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=n;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=n;Js(e.key),e.k=e.key,delete e.key,e.modifier&&(Js(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=n;e.i=e.index,delete e.index;break}case 4:{const e=n;e.k=e.key,delete e.key;break}default:throw Ho(xe.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:Tk,args:[n.type]})}delete n.type}const Ok="parser";function Mk(n,e){const{sourceMap:t,filename:r,breakLineCode:i,needIndent:s}=e,o=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:s,indentLevel:0};o&&n.loc&&(a.source=n.loc.source);const l=()=>a;function c(m,y){a.code+=m}function u(m,y=!0){const w=y?i:"";c(s?w+"  ".repeat(m):w)}function f(m=!0){const y=++a.indentLevel;m&&u(y)}function h(m=!0){const y=--a.indentLevel;m&&u(y)}function p(){u(a.indentLevel)}return{context:l,push:c,indent:f,deindent:h,newline:p,helper:m=>`_${m}`,needIndent:()=>a.needIndent}}function Ik(n,e){const{helper:t}=n;n.push(`${t("linked")}(`),wo(n,e.key),e.modifier?(n.push(", "),wo(n,e.modifier),n.push(", _type")):n.push(", undefined, _type"),n.push(")")}function Pk(n,e){const{helper:t,needIndent:r}=n;n.push(`${t("normalize")}([`),n.indent(r());const i=e.items.length;for(let s=0;s<i&&(wo(n,e.items[s]),s!==i-1);s++)n.push(", ");n.deindent(r()),n.push("])")}function Nk(n,e){const{helper:t,needIndent:r}=n;if(e.cases.length>1){n.push(`${t("plural")}([`),n.indent(r());const i=e.cases.length;for(let s=0;s<i&&(wo(n,e.cases[s]),s!==i-1);s++)n.push(", ");n.deindent(r()),n.push("])")}}function Rk(n,e){e.body?wo(n,e.body):n.push("null")}function wo(n,e){const{helper:t}=n;switch(e.type){case 0:Rk(n,e);break;case 1:Nk(n,e);break;case 2:Pk(n,e);break;case 6:Ik(n,e);break;case 8:n.push(JSON.stringify(e.value),e);break;case 7:n.push(JSON.stringify(e.value),e);break;case 5:n.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:n.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:n.push(JSON.stringify(e.value),e);break;case 3:n.push(JSON.stringify(e.value),e);break;default:throw Ho(xe.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:Ok,args:[e.type]})}}const Lk=(n,e={})=>{const t=Ng(e.mode)?e.mode:"normal",r=Ng(e.filename)?e.filename:"message.intl",i=!!e.sourceMap,s=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,o=e.needIndent?e.needIndent:t!=="arrow",a=n.helpers||[],l=Mk(n,{mode:t,filename:r,sourceMap:i,breakLineCode:s,needIndent:o});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${z1(a.map(f=>`${f}: _${f}`),", ")} } = ctx`),l.newline()),l.push("return "),wo(l,n),l.deindent(o),l.push("}"),delete n.helpers;const{code:c,map:u}=l.context();return{ast:n,code:c,map:u?u.toJSON():void 0}};function Dk(n,e={}){const t=V1({},e),r=!!t.jit,i=!!t.minify,s=t.optimize==null?!0:t.optimize,a=xk(t).parse(n);return r?(s&&Ek(a),i&&Js(a),{ast:a,code:""}):(kk(a,t),Lk(a,t))}/*!
  * core-base v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Fk(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ir().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Ir().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Ir().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const Ri=[];Ri[0]={w:[0],i:[3,0],"[":[4],o:[7]};Ri[1]={w:[1],".":[2],"[":[4],o:[7]};Ri[2]={w:[2],i:[3,0],0:[3,0]};Ri[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Ri[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Ri[5]={"'":[4,0],o:8,l:[5,0]};Ri[6]={'"':[4,0],o:8,l:[6,0]};const Bk=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function $k(n){return Bk.test(n)}function jk(n){const e=n.charCodeAt(0),t=n.charCodeAt(n.length-1);return e===t&&(e===34||e===39)?n.slice(1,-1):n}function Hk(n){if(n==null)return"o";switch(n.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return n;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Vk(n){const e=n.trim();return n.charAt(0)==="0"&&isNaN(parseInt(n))?!1:$k(e)?jk(e):"*"+e}function zk(n){const e=[];let t=-1,r=0,i=0,s,o,a,l,c,u,f;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),i++},h[3]=()=>{if(i>0)i--,r=4,h[0]();else{if(i=0,o===void 0||(o=Vk(o),o===!1))return!1;h[1]()}};function p(){const d=n[t+1];if(r===5&&d==="'"||r===6&&d==='"')return t++,a="\\"+d,h[0](),!0}for(;r!==null;)if(t++,s=n[t],!(s==="\\"&&p())){if(l=Hk(s),f=Ri[r],c=f[l]||f.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(a=s,u()===!1))))return;if(r===7)return e}}const Fg=new Map;function Gk(n,e){return Ue(n)?n[e]:null}function Wk(n,e){if(!Ue(n))return null;let t=Fg.get(e);if(t||(t=zk(e),t&&Fg.set(e,t)),!t)return null;const r=t.length;let i=n,s=0;for(;s<r;){const o=i[t[s]];if(o===void 0||st(i))return null;i=o,s++}return i}const Uk=n=>n,Kk=n=>"",Yk="text",qk=n=>n.length===0?"":sk(n),Xk=ik;function Bg(n,e){return n=Math.abs(n),e===2?n?n>1?1:0:1:n?Math.min(n,2):0}function Jk(n){const e=yt(n.pluralIndex)?n.pluralIndex:-1;return n.named&&(yt(n.named.count)||yt(n.named.n))?yt(n.named.count)?n.named.count:yt(n.named.n)?n.named.n:e:e}function Qk(n,e){e.count||(e.count=n),e.n||(e.n=n)}function Zk(n={}){const e=n.locale,t=Jk(n),r=Ue(n.pluralRules)&&oe(e)&&st(n.pluralRules[e])?n.pluralRules[e]:Bg,i=Ue(n.pluralRules)&&oe(e)&&st(n.pluralRules[e])?Bg:void 0,s=y=>y[r(t,y.length,i)],o=n.list||[],a=y=>o[y],l=n.named||Ze();yt(n.pluralIndex)&&Qk(t,l);const c=y=>l[y];function u(y){const w=st(n.messages)?n.messages(y):Ue(n.messages)?n.messages[y]:!1;return w||(n.parent?n.parent.message(y):Kk)}const f=y=>n.modifiers?n.modifiers[y]:Uk,h=Ee(n.processor)&&st(n.processor.normalize)?n.processor.normalize:qk,p=Ee(n.processor)&&st(n.processor.interpolate)?n.processor.interpolate:Xk,d=Ee(n.processor)&&oe(n.processor.type)?n.processor.type:Yk,m={list:a,named:c,plural:s,linked:(y,...w)=>{const[b,v]=w;let S="text",_="";w.length===1?Ue(b)?(_=b.modifier||_,S=b.type||S):oe(b)&&(_=b||_):w.length===2&&(oe(b)&&(_=b||_),oe(v)&&(S=v||S));const k=u(y)(m),M=S==="vnode"&&ot(k)&&_?k[0]:k;return _?f(_)(M,S):M},message:u,type:d,interpolate:p,normalize:h,values:$t(Ze(),o,l)};return m}let Ya=null;function eE(n){Ya=n}function tE(n,e,t){Ya&&Ya.emit("i18n:init",{timestamp:Date.now(),i18n:n,version:e,meta:t})}const nE=rE("function:translate");function rE(n){return e=>Ya&&Ya.emit(n,e)}const G1=xp.__EXTEND_POINT__,Xi=Fu(G1),iE={NOT_FOUND_KEY:G1,FALLBACK_TO_TRANSLATE:Xi(),CANNOT_FORMAT_NUMBER:Xi(),FALLBACK_TO_NUMBER_FORMAT:Xi(),CANNOT_FORMAT_DATE:Xi(),FALLBACK_TO_DATE_FORMAT:Xi(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Xi(),__EXTEND_POINT__:Xi()},W1=xe.__EXTEND_POINT__,Ji=Fu(W1),Qn={INVALID_ARGUMENT:W1,INVALID_DATE_ARGUMENT:Ji(),INVALID_ISO_DATE_ARGUMENT:Ji(),NOT_SUPPORT_NON_STRING_MESSAGE:Ji(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Ji(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Ji(),NOT_SUPPORT_LOCALE_TYPE:Ji(),__EXTEND_POINT__:Ji()};function hr(n){return Ho(n,null,void 0)}function kp(n,e){return e.locale!=null?$g(e.locale):$g(n.locale)}let Lf;function $g(n){if(oe(n))return n;if(st(n)){if(n.resolvedOnce&&Lf!=null)return Lf;if(n.constructor.name==="Function"){const e=n();if(rk(e))throw hr(Qn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Lf=e}else throw hr(Qn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw hr(Qn.NOT_SUPPORT_LOCALE_TYPE)}function sE(n,e,t){return[...new Set([t,...ot(e)?e:Ue(e)?Object.keys(e):oe(e)?[e]:[t]])]}function U1(n,e,t){const r=oe(t)?t:Co,i=n;i.__localeChainCache||(i.__localeChainCache=new Map);let s=i.__localeChainCache.get(r);if(!s){s=[];let o=[t];for(;ot(o);)o=jg(s,o,e);const a=ot(e)||!Ee(e)?e:e.default?e.default:null;o=oe(a)?[a]:a,ot(o)&&jg(s,o,!1),i.__localeChainCache.set(r,s)}return s}function jg(n,e,t){let r=!0;for(let i=0;i<e.length&&Fe(r);i++){const s=e[i];oe(s)&&(r=oE(n,e[i],t))}return r}function oE(n,e,t){let r;const i=e.split("-");do{const s=i.join("-");r=aE(n,s,t),i.splice(-1,1)}while(i.length&&r===!0);return r}function aE(n,e,t){let r=!1;if(!n.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const i=e.replace(/!/g,"");n.push(i),(ot(t)||Ee(t))&&t[i]&&(r=t[i])}return r}const lE="9.14.2",Bu=-1,Co="en-US",Hg="",Vg=n=>`${n.charAt(0).toLocaleUpperCase()}${n.substr(1)}`;function cE(){return{upper:(n,e)=>e==="text"&&oe(n)?n.toUpperCase():e==="vnode"&&Ue(n)&&"__v_isVNode"in n?n.children.toUpperCase():n,lower:(n,e)=>e==="text"&&oe(n)?n.toLowerCase():e==="vnode"&&Ue(n)&&"__v_isVNode"in n?n.children.toLowerCase():n,capitalize:(n,e)=>e==="text"&&oe(n)?Vg(n):e==="vnode"&&Ue(n)&&"__v_isVNode"in n?Vg(n.children):n}}let K1;function zg(n){K1=n}let Y1;function uE(n){Y1=n}let q1;function fE(n){q1=n}let X1=null;const hE=n=>{X1=n},dE=()=>X1;let J1=null;const Gg=n=>{J1=n},pE=()=>J1;let Wg=0;function mE(n={}){const e=st(n.onWarn)?n.onWarn:ok,t=oe(n.version)?n.version:lE,r=oe(n.locale)||st(n.locale)?n.locale:Co,i=st(r)?Co:r,s=ot(n.fallbackLocale)||Ee(n.fallbackLocale)||oe(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:i,o=Ee(n.messages)?n.messages:Df(i),a=Ee(n.datetimeFormats)?n.datetimeFormats:Df(i),l=Ee(n.numberFormats)?n.numberFormats:Df(i),c=$t(Ze(),n.modifiers,cE()),u=n.pluralRules||Ze(),f=st(n.missing)?n.missing:null,h=Fe(n.missingWarn)||Ai(n.missingWarn)?n.missingWarn:!0,p=Fe(n.fallbackWarn)||Ai(n.fallbackWarn)?n.fallbackWarn:!0,d=!!n.fallbackFormat,g=!!n.unresolving,m=st(n.postTranslation)?n.postTranslation:null,y=Ee(n.processor)?n.processor:null,w=Fe(n.warnHtmlMessage)?n.warnHtmlMessage:!0,b=!!n.escapeParameter,v=st(n.messageCompiler)?n.messageCompiler:K1,S=st(n.messageResolver)?n.messageResolver:Y1||Gk,_=st(n.localeFallbacker)?n.localeFallbacker:q1||sE,k=Ue(n.fallbackContext)?n.fallbackContext:void 0,M=n,E=Ue(M.__datetimeFormatters)?M.__datetimeFormatters:new Map,F=Ue(M.__numberFormatters)?M.__numberFormatters:new Map,j=Ue(M.__meta)?M.__meta:{};Wg++;const L={version:t,cid:Wg,locale:r,fallbackLocale:s,messages:o,modifiers:c,pluralRules:u,missing:f,missingWarn:h,fallbackWarn:p,fallbackFormat:d,unresolving:g,postTranslation:m,processor:y,warnHtmlMessage:w,escapeParameter:b,messageCompiler:v,messageResolver:S,localeFallbacker:_,fallbackContext:k,onWarn:e,__meta:j};return L.datetimeFormats=a,L.numberFormats=l,L.__datetimeFormatters=E,L.__numberFormatters=F,__INTLIFY_PROD_DEVTOOLS__&&tE(L,t,j),L}const Df=n=>({[n]:Ze()});function Ep(n,e,t,r,i){const{missing:s,onWarn:o}=n;if(s!==null){const a=s(n,t,e,i);return oe(a)?a:e}else return e}function Qo(n,e,t){const r=n;r.__localeChainCache=new Map,n.localeFallbacker(n,t,e)}function gE(n,e){return n===e?!1:n.split("-")[0]===e.split("-")[0]}function vE(n,e){const t=e.indexOf(n);if(t===-1)return!1;for(let r=t+1;r<e.length;r++)if(gE(n,e[r]))return!0;return!1}function Ff(n){return t=>yE(t,n)}function yE(n,e){const t=_E(e);if(t==null)throw qa(0);if(Tp(t)===1){const s=CE(t);return n.plural(s.reduce((o,a)=>[...o,Ug(n,a)],[]))}else return Ug(n,t)}const bE=["b","body"];function _E(n){return Li(n,bE)}const wE=["c","cases"];function CE(n){return Li(n,wE,[])}function Ug(n,e){const t=xE(e);if(t!=null)return n.type==="text"?t:n.normalize([t]);{const r=kE(e).reduce((i,s)=>[...i,Gh(n,s)],[]);return n.normalize(r)}}const SE=["s","static"];function xE(n){return Li(n,SE)}const AE=["i","items"];function kE(n){return Li(n,AE,[])}function Gh(n,e){const t=Tp(e);switch(t){case 3:return Hl(e,t);case 9:return Hl(e,t);case 4:{const r=e;if(Jn(r,"k")&&r.k)return n.interpolate(n.named(r.k));if(Jn(r,"key")&&r.key)return n.interpolate(n.named(r.key));throw qa(t)}case 5:{const r=e;if(Jn(r,"i")&&yt(r.i))return n.interpolate(n.list(r.i));if(Jn(r,"index")&&yt(r.index))return n.interpolate(n.list(r.index));throw qa(t)}case 6:{const r=e,i=ME(r),s=PE(r);return n.linked(Gh(n,s),i?Gh(n,i):void 0,n.type)}case 7:return Hl(e,t);case 8:return Hl(e,t);default:throw new Error(`unhandled node on format message part: ${t}`)}}const EE=["t","type"];function Tp(n){return Li(n,EE)}const TE=["v","value"];function Hl(n,e){const t=Li(n,TE);if(t)return t;throw qa(e)}const OE=["m","modifier"];function ME(n){return Li(n,OE)}const IE=["k","key"];function PE(n){const e=Li(n,IE);if(e)return e;throw qa(6)}function Li(n,e,t){for(let r=0;r<e.length;r++){const i=e[r];if(Jn(n,i)&&n[i]!=null)return n[i]}return t}function qa(n){return new Error(`unhandled node type: ${n}`)}const Q1=n=>n;let to=Ze();function So(n){return Ue(n)&&Tp(n)===0&&(Jn(n,"b")||Jn(n,"body"))}function Z1(n,e={}){let t=!1;const r=e.onError||dk;return e.onError=i=>{t=!0,r(i)},{...Dk(n,e),detectError:t}}const NE=(n,e)=>{if(!oe(n))throw hr(Qn.NOT_SUPPORT_NON_STRING_MESSAGE);{Fe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||Q1)(n),i=to[r];if(i)return i;const{code:s,detectError:o}=Z1(n,e),a=new Function(`return ${s}`)();return o?a:to[r]=a}};function RE(n,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&oe(n)){Fe(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||Q1)(n),i=to[r];if(i)return i;const{ast:s,detectError:o}=Z1(n,{...e,location:!1,jit:!0}),a=Ff(s);return o?a:to[r]=a}else{const t=n.cacheKey;if(t){const r=to[t];return r||(to[t]=Ff(n))}else return Ff(n)}}const Kg=()=>"",Pn=n=>st(n);function Yg(n,...e){const{fallbackFormat:t,postTranslation:r,unresolving:i,messageCompiler:s,fallbackLocale:o,messages:a}=n,[l,c]=Wh(...e),u=Fe(c.missingWarn)?c.missingWarn:n.missingWarn,f=Fe(c.fallbackWarn)?c.fallbackWarn:n.fallbackWarn,h=Fe(c.escapeParameter)?c.escapeParameter:n.escapeParameter,p=!!c.resolvedMessage,d=oe(c.default)||Fe(c.default)?Fe(c.default)?s?l:()=>l:c.default:t?s?l:()=>l:"",g=t||d!=="",m=kp(n,c);h&&LE(c);let[y,w,b]=p?[l,m,a[m]||Ze()]:e_(n,l,m,o,f,u),v=y,S=l;if(!p&&!(oe(v)||So(v)||Pn(v))&&g&&(v=d,S=v),!p&&(!(oe(v)||So(v)||Pn(v))||!oe(w)))return i?Bu:l;let _=!1;const k=()=>{_=!0},M=Pn(v)?v:t_(n,l,w,v,S,k);if(_)return v;const E=BE(n,w,b,c),F=Zk(E),j=DE(n,M,F),L=r?r(j,l):j;if(__INTLIFY_PROD_DEVTOOLS__){const V={timestamp:Date.now(),key:oe(l)?l:Pn(v)?v.key:"",locale:w||(Pn(v)?v.locale:""),format:oe(v)?v:Pn(v)?v.source:"",message:L};V.meta=$t({},n.__meta,dE()||{}),nE(V)}return L}function LE(n){ot(n.list)?n.list=n.list.map(e=>oe(e)?Pg(e):e):Ue(n.named)&&Object.keys(n.named).forEach(e=>{oe(n.named[e])&&(n.named[e]=Pg(n.named[e]))})}function e_(n,e,t,r,i,s){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=n,u=c(n,r,t);let f=Ze(),h,p=null;const d="translate";for(let g=0;g<u.length&&(h=u[g],f=o[h]||Ze(),(p=l(f,e))===null&&(p=f[e]),!(oe(p)||So(p)||Pn(p)));g++)if(!vE(h,u)){const m=Ep(n,e,h,s,d);m!==e&&(p=m)}return[p,h,f]}function t_(n,e,t,r,i,s){const{messageCompiler:o,warnHtmlMessage:a}=n;if(Pn(r)){const c=r;return c.locale=c.locale||t,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=t,c.key=e,c}const l=o(r,FE(n,t,i,r,a,s));return l.locale=t,l.key=e,l.source=r,l}function DE(n,e,t){return e(t)}function Wh(...n){const[e,t,r]=n,i=Ze();if(!oe(e)&&!yt(e)&&!Pn(e)&&!So(e))throw hr(Qn.INVALID_ARGUMENT);const s=yt(e)?String(e):(Pn(e),e);return yt(t)?i.plural=t:oe(t)?i.default=t:Ee(t)&&!Du(t)?i.named=t:ot(t)&&(i.list=t),yt(r)?i.plural=r:oe(r)?i.default=r:Ee(r)&&$t(i,r),[s,i]}function FE(n,e,t,r,i,s){return{locale:e,key:t,warnHtmlMessage:i,onError:o=>{throw s&&s(o),o},onCacheKey:o=>Q2(e,t,o)}}function BE(n,e,t,r){const{modifiers:i,pluralRules:s,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=n,h={locale:e,modifiers:i,pluralRules:s,messages:p=>{let d=o(t,p);if(d==null&&u){const[,,g]=e_(u,p,e,a,l,c);d=o(g,p)}if(oe(d)||So(d)){let g=!1;const y=t_(n,p,e,d,p,()=>{g=!0});return g?Kg:y}else return Pn(d)?d:Kg}};return n.processor&&(h.processor=n.processor),r.list&&(h.list=r.list),r.named&&(h.named=r.named),yt(r.plural)&&(h.pluralIndex=r.plural),h}function qg(n,...e){const{datetimeFormats:t,unresolving:r,fallbackLocale:i,onWarn:s,localeFallbacker:o}=n,{__datetimeFormatters:a}=n,[l,c,u,f]=Uh(...e),h=Fe(u.missingWarn)?u.missingWarn:n.missingWarn;Fe(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const p=!!u.part,d=kp(n,u),g=o(n,i,d);if(!oe(l)||l==="")return new Intl.DateTimeFormat(d,f).format(c);let m={},y,w=null;const b="datetime format";for(let _=0;_<g.length&&(y=g[_],m=t[y]||{},w=m[l],!Ee(w));_++)Ep(n,l,y,h,b);if(!Ee(w)||!oe(y))return r?Bu:l;let v=`${y}__${l}`;Du(f)||(v=`${v}__${JSON.stringify(f)}`);let S=a.get(v);return S||(S=new Intl.DateTimeFormat(y,$t({},w,f)),a.set(v,S)),p?S.formatToParts(c):S.format(c)}const n_=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Uh(...n){const[e,t,r,i]=n,s=Ze();let o=Ze(),a;if(oe(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw hr(Qn.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw hr(Qn.INVALID_ISO_DATE_ARGUMENT)}}else if(ek(e)){if(isNaN(e.getTime()))throw hr(Qn.INVALID_DATE_ARGUMENT);a=e}else if(yt(e))a=e;else throw hr(Qn.INVALID_ARGUMENT);return oe(t)?s.key=t:Ee(t)&&Object.keys(t).forEach(l=>{n_.includes(l)?o[l]=t[l]:s[l]=t[l]}),oe(r)?s.locale=r:Ee(r)&&(o=r),Ee(i)&&(o=i),[s.key||"",a,s,o]}function Xg(n,e,t){const r=n;for(const i in t){const s=`${e}__${i}`;r.__datetimeFormatters.has(s)&&r.__datetimeFormatters.delete(s)}}function Jg(n,...e){const{numberFormats:t,unresolving:r,fallbackLocale:i,onWarn:s,localeFallbacker:o}=n,{__numberFormatters:a}=n,[l,c,u,f]=Kh(...e),h=Fe(u.missingWarn)?u.missingWarn:n.missingWarn;Fe(u.fallbackWarn)?u.fallbackWarn:n.fallbackWarn;const p=!!u.part,d=kp(n,u),g=o(n,i,d);if(!oe(l)||l==="")return new Intl.NumberFormat(d,f).format(c);let m={},y,w=null;const b="number format";for(let _=0;_<g.length&&(y=g[_],m=t[y]||{},w=m[l],!Ee(w));_++)Ep(n,l,y,h,b);if(!Ee(w)||!oe(y))return r?Bu:l;let v=`${y}__${l}`;Du(f)||(v=`${v}__${JSON.stringify(f)}`);let S=a.get(v);return S||(S=new Intl.NumberFormat(y,$t({},w,f)),a.set(v,S)),p?S.formatToParts(c):S.format(c)}const r_=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Kh(...n){const[e,t,r,i]=n,s=Ze();let o=Ze();if(!yt(e))throw hr(Qn.INVALID_ARGUMENT);const a=e;return oe(t)?s.key=t:Ee(t)&&Object.keys(t).forEach(l=>{r_.includes(l)?o[l]=t[l]:s[l]=t[l]}),oe(r)?s.locale=r:Ee(r)&&(o=r),Ee(i)&&(o=i),[s.key||"",a,s,o]}function Qg(n,e,t){const r=n;for(const i in t){const s=`${e}__${i}`;r.__numberFormatters.has(s)&&r.__numberFormatters.delete(s)}}Fk();/*!
  * vue-i18n v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const $E="9.14.2";function jE(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Ir().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Ir().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Ir().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Ir().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Ir().__INTLIFY_PROD_DEVTOOLS__=!1)}const i_=iE.__EXTEND_POINT__,kr=Fu(i_);kr(),kr(),kr(),kr(),kr(),kr(),kr(),kr(),kr();const s_=Qn.__EXTEND_POINT__,an=Fu(s_),kt={UNEXPECTED_RETURN_TYPE:s_,INVALID_ARGUMENT:an(),MUST_BE_CALL_SETUP_TOP:an(),NOT_INSTALLED:an(),NOT_AVAILABLE_IN_LEGACY_MODE:an(),REQUIRED_VALUE:an(),INVALID_VALUE:an(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:an(),NOT_INSTALLED_WITH_PROVIDE:an(),UNEXPECTED_ERROR:an(),NOT_COMPATIBLE_LEGACY_VUE_I18N:an(),BRIDGE_SUPPORT_VUE_2_ONLY:an(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:an(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:an(),__EXTEND_POINT__:an()};function Mt(n,...e){return Ho(n,null,void 0)}const Yh=Ni("__translateVNode"),qh=Ni("__datetimeParts"),Xh=Ni("__numberParts"),o_=Ni("__setPluralRules"),a_=Ni("__injectWithOption"),Jh=Ni("__dispose");function Xa(n){if(!Ue(n))return n;for(const e in n)if(Jn(n,e))if(!e.includes("."))Ue(n[e])&&Xa(n[e]);else{const t=e.split("."),r=t.length-1;let i=n,s=!1;for(let o=0;o<r;o++){if(t[o]in i||(i[t[o]]=Ze()),!Ue(i[t[o]])){s=!0;break}i=i[t[o]]}s||(i[t[r]]=n[e],delete n[e]),Ue(i[t[r]])&&Xa(i[t[r]])}return n}function $u(n,e){const{messages:t,__i18n:r,messageResolver:i,flatJson:s}=e,o=Ee(t)?t:ot(r)?Ze():{[n]:Ze()};if(ot(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||Ze(),Mc(c,o[l])):Mc(c,o)}else oe(a)&&Mc(JSON.parse(a),o)}),i==null&&s)for(const a in o)Jn(o,a)&&Xa(o[a]);return o}function l_(n){return n.type}function c_(n,e,t){let r=Ue(e.messages)?e.messages:Ze();"__i18nGlobal"in t&&(r=$u(n.locale.value,{messages:r,__i18n:t.__i18nGlobal}));const i=Object.keys(r);i.length&&i.forEach(s=>{n.mergeLocaleMessage(s,r[s])});{if(Ue(e.datetimeFormats)){const s=Object.keys(e.datetimeFormats);s.length&&s.forEach(o=>{n.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Ue(e.numberFormats)){const s=Object.keys(e.numberFormats);s.length&&s.forEach(o=>{n.mergeNumberFormat(o,e.numberFormats[o])})}}}function Zg(n){return z(ml,null,n,0)}const ev="__INTLIFY_META__",tv=()=>[],HE=()=>!1;let nv=0;function rv(n){return(e,t,r,i)=>n(t,r,br()||void 0,i)}const VE=()=>{const n=br();let e=null;return n&&(e=l_(n)[ev])?{[ev]:e}:null};function Op(n={},e){const{__root:t,__injectWithOption:r}=n,i=t===void 0,s=n.flatJson,o=Xc?bn:vp,a=!!n.translateExistCompatible;let l=Fe(n.inheritLocale)?n.inheritLocale:!0;const c=o(t&&l?t.locale.value:oe(n.locale)?n.locale:Co),u=o(t&&l?t.fallbackLocale.value:oe(n.fallbackLocale)||ot(n.fallbackLocale)||Ee(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:c.value),f=o($u(c.value,n)),h=o(Ee(n.datetimeFormats)?n.datetimeFormats:{[c.value]:{}}),p=o(Ee(n.numberFormats)?n.numberFormats:{[c.value]:{}});let d=t?t.missingWarn:Fe(n.missingWarn)||Ai(n.missingWarn)?n.missingWarn:!0,g=t?t.fallbackWarn:Fe(n.fallbackWarn)||Ai(n.fallbackWarn)?n.fallbackWarn:!0,m=t?t.fallbackRoot:Fe(n.fallbackRoot)?n.fallbackRoot:!0,y=!!n.fallbackFormat,w=st(n.missing)?n.missing:null,b=st(n.missing)?rv(n.missing):null,v=st(n.postTranslation)?n.postTranslation:null,S=t?t.warnHtmlMessage:Fe(n.warnHtmlMessage)?n.warnHtmlMessage:!0,_=!!n.escapeParameter;const k=t?t.modifiers:Ee(n.modifiers)?n.modifiers:{};let M=n.pluralRules||t&&t.pluralRules,E;E=(()=>{i&&Gg(null);const N={version:$E,locale:c.value,fallbackLocale:u.value,messages:f.value,modifiers:k,pluralRules:M,missing:b===null?void 0:b,missingWarn:d,fallbackWarn:g,fallbackFormat:y,unresolving:!0,postTranslation:v===null?void 0:v,warnHtmlMessage:S,escapeParameter:_,messageResolver:n.messageResolver,messageCompiler:n.messageCompiler,__meta:{framework:"vue"}};N.datetimeFormats=h.value,N.numberFormats=p.value,N.__datetimeFormatters=Ee(E)?E.__datetimeFormatters:void 0,N.__numberFormatters=Ee(E)?E.__numberFormatters:void 0;const B=mE(N);return i&&Gg(B),B})(),Qo(E,c.value,u.value);function j(){return[c.value,u.value,f.value,h.value,p.value]}const L=At({get:()=>c.value,set:N=>{c.value=N,E.locale=c.value}}),V=At({get:()=>u.value,set:N=>{u.value=N,E.fallbackLocale=u.value,Qo(E,c.value,N)}}),ue=At(()=>f.value),ke=At(()=>h.value),re=At(()=>p.value);function le(){return st(v)?v:null}function ce(N){v=N,E.postTranslation=N}function Re(){return w}function me(N){N!==null&&(b=rv(N)),w=N,E.missing=b}const Ce=(N,B,ve,_e,Xe,Tt)=>{j();let Xt;try{__INTLIFY_PROD_DEVTOOLS__,i||(E.fallbackContext=t?pE():void 0),Xt=N(E)}finally{__INTLIFY_PROD_DEVTOOLS__,i||(E.fallbackContext=void 0)}if(ve!=="translate exists"&&yt(Xt)&&Xt===Bu||ve==="translate exists"&&!Xt){const[Gs,H]=B();return t&&m?_e(t):Xe(Gs)}else{if(Tt(Xt))return Xt;throw Mt(kt.UNEXPECTED_RETURN_TYPE)}};function Ae(...N){return Ce(B=>Reflect.apply(Yg,null,[B,...N]),()=>Wh(...N),"translate",B=>Reflect.apply(B.t,B,[...N]),B=>B,B=>oe(B))}function Je(...N){const[B,ve,_e]=N;if(_e&&!Ue(_e))throw Mt(kt.INVALID_ARGUMENT);return Ae(B,ve,$t({resolvedMessage:!0},_e||{}))}function Ye(...N){return Ce(B=>Reflect.apply(qg,null,[B,...N]),()=>Uh(...N),"datetime format",B=>Reflect.apply(B.d,B,[...N]),()=>Hg,B=>oe(B))}function Oe(...N){return Ce(B=>Reflect.apply(Jg,null,[B,...N]),()=>Kh(...N),"number format",B=>Reflect.apply(B.n,B,[...N]),()=>Hg,B=>oe(B))}function dt(N){return N.map(B=>oe(B)||yt(B)||Fe(B)?Zg(String(B)):B)}const St={normalize:dt,interpolate:N=>N,type:"vnode"};function Yt(...N){return Ce(B=>{let ve;const _e=B;try{_e.processor=St,ve=Reflect.apply(Yg,null,[_e,...N])}finally{_e.processor=null}return ve},()=>Wh(...N),"translate",B=>B[Yh](...N),B=>[Zg(B)],B=>ot(B))}function gt(...N){return Ce(B=>Reflect.apply(Jg,null,[B,...N]),()=>Kh(...N),"number format",B=>B[Xh](...N),tv,B=>oe(B)||ot(B))}function qt(...N){return Ce(B=>Reflect.apply(qg,null,[B,...N]),()=>Uh(...N),"datetime format",B=>B[qh](...N),tv,B=>oe(B)||ot(B))}function mn(N){M=N,E.pluralRules=M}function O(N,B){return Ce(()=>{if(!N)return!1;const ve=oe(B)?B:c.value,_e=W(ve),Xe=E.messageResolver(_e,N);return a?Xe!=null:So(Xe)||Pn(Xe)||oe(Xe)},()=>[N],"translate exists",ve=>Reflect.apply(ve.te,ve,[N,B]),HE,ve=>Fe(ve))}function A(N){let B=null;const ve=U1(E,u.value,c.value);for(let _e=0;_e<ve.length;_e++){const Xe=f.value[ve[_e]]||{},Tt=E.messageResolver(Xe,N);if(Tt!=null){B=Tt;break}}return B}function D(N){const B=A(N);return B??(t?t.tm(N)||{}:{})}function W(N){return f.value[N]||{}}function G(N,B){if(s){const ve={[N]:B};for(const _e in ve)Jn(ve,_e)&&Xa(ve[_e]);B=ve[N]}f.value[N]=B,E.messages=f.value}function Y(N,B){f.value[N]=f.value[N]||{};const ve={[N]:B};if(s)for(const _e in ve)Jn(ve,_e)&&Xa(ve[_e]);B=ve[N],Mc(B,f.value[N]),E.messages=f.value}function ne(N){return h.value[N]||{}}function C(N,B){h.value[N]=B,E.datetimeFormats=h.value,Xg(E,N,B)}function x(N,B){h.value[N]=$t(h.value[N]||{},B),E.datetimeFormats=h.value,Xg(E,N,B)}function I(N){return p.value[N]||{}}function $(N,B){p.value[N]=B,E.numberFormats=p.value,Qg(E,N,B)}function Z(N,B){p.value[N]=$t(p.value[N]||{},B),E.numberFormats=p.value,Qg(E,N,B)}nv++,t&&Xc&&(gr(t.locale,N=>{l&&(c.value=N,E.locale=N,Qo(E,c.value,u.value))}),gr(t.fallbackLocale,N=>{l&&(u.value=N,E.fallbackLocale=N,Qo(E,c.value,u.value))}));const U={id:nv,locale:L,fallbackLocale:V,get inheritLocale(){return l},set inheritLocale(N){l=N,N&&t&&(c.value=t.locale.value,u.value=t.fallbackLocale.value,Qo(E,c.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:ue,get modifiers(){return k},get pluralRules(){return M||{}},get isGlobal(){return i},get missingWarn(){return d},set missingWarn(N){d=N,E.missingWarn=d},get fallbackWarn(){return g},set fallbackWarn(N){g=N,E.fallbackWarn=g},get fallbackRoot(){return m},set fallbackRoot(N){m=N},get fallbackFormat(){return y},set fallbackFormat(N){y=N,E.fallbackFormat=y},get warnHtmlMessage(){return S},set warnHtmlMessage(N){S=N,E.warnHtmlMessage=N},get escapeParameter(){return _},set escapeParameter(N){_=N,E.escapeParameter=N},t:Ae,getLocaleMessage:W,setLocaleMessage:G,mergeLocaleMessage:Y,getPostTranslationHandler:le,setPostTranslationHandler:ce,getMissingHandler:Re,setMissingHandler:me,[o_]:mn};return U.datetimeFormats=ke,U.numberFormats=re,U.rt=Je,U.te=O,U.tm=D,U.d=Ye,U.n=Oe,U.getDateTimeFormat=ne,U.setDateTimeFormat=C,U.mergeDateTimeFormat=x,U.getNumberFormat=I,U.setNumberFormat=$,U.mergeNumberFormat=Z,U[a_]=r,U[Yh]=Yt,U[qh]=qt,U[Xh]=gt,U}function zE(n){const e=oe(n.locale)?n.locale:Co,t=oe(n.fallbackLocale)||ot(n.fallbackLocale)||Ee(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:e,r=st(n.missing)?n.missing:void 0,i=Fe(n.silentTranslationWarn)||Ai(n.silentTranslationWarn)?!n.silentTranslationWarn:!0,s=Fe(n.silentFallbackWarn)||Ai(n.silentFallbackWarn)?!n.silentFallbackWarn:!0,o=Fe(n.fallbackRoot)?n.fallbackRoot:!0,a=!!n.formatFallbackMessages,l=Ee(n.modifiers)?n.modifiers:{},c=n.pluralizationRules,u=st(n.postTranslation)?n.postTranslation:void 0,f=oe(n.warnHtmlInMessage)?n.warnHtmlInMessage!=="off":!0,h=!!n.escapeParameterHtml,p=Fe(n.sync)?n.sync:!0;let d=n.messages;if(Ee(n.sharedMessages)){const _=n.sharedMessages;d=Object.keys(_).reduce((M,E)=>{const F=M[E]||(M[E]={});return $t(F,_[E]),M},d||{})}const{__i18n:g,__root:m,__injectWithOption:y}=n,w=n.datetimeFormats,b=n.numberFormats,v=n.flatJson,S=n.translateExistCompatible;return{locale:e,fallbackLocale:t,messages:d,flatJson:v,datetimeFormats:w,numberFormats:b,missing:r,missingWarn:i,fallbackWarn:s,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:u,warnHtmlMessage:f,escapeParameter:h,messageResolver:n.messageResolver,inheritLocale:p,translateExistCompatible:S,__i18n:g,__root:m,__injectWithOption:y}}function Qh(n={},e){{const t=Op(zE(n)),{__extender:r}=n,i={id:t.id,get locale(){return t.locale.value},set locale(s){t.locale.value=s},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(s){t.fallbackLocale.value=s},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(s){},get missing(){return t.getMissingHandler()},set missing(s){t.setMissingHandler(s)},get silentTranslationWarn(){return Fe(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(s){t.missingWarn=Fe(s)?!s:s},get silentFallbackWarn(){return Fe(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(s){t.fallbackWarn=Fe(s)?!s:s},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(s){t.fallbackFormat=s},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(s){t.setPostTranslationHandler(s)},get sync(){return t.inheritLocale},set sync(s){t.inheritLocale=s},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){t.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(s){t.escapeParameter=s},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(s){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...s){const[o,a,l]=s,c={};let u=null,f=null;if(!oe(o))throw Mt(kt.INVALID_ARGUMENT);const h=o;return oe(a)?c.locale=a:ot(a)?u=a:Ee(a)&&(f=a),ot(l)?u=l:Ee(l)&&(f=l),Reflect.apply(t.t,t,[h,u||f||{},c])},rt(...s){return Reflect.apply(t.rt,t,[...s])},tc(...s){const[o,a,l]=s,c={plural:1};let u=null,f=null;if(!oe(o))throw Mt(kt.INVALID_ARGUMENT);const h=o;return oe(a)?c.locale=a:yt(a)?c.plural=a:ot(a)?u=a:Ee(a)&&(f=a),oe(l)?c.locale=l:ot(l)?u=l:Ee(l)&&(f=l),Reflect.apply(t.t,t,[h,u||f||{},c])},te(s,o){return t.te(s,o)},tm(s){return t.tm(s)},getLocaleMessage(s){return t.getLocaleMessage(s)},setLocaleMessage(s,o){t.setLocaleMessage(s,o)},mergeLocaleMessage(s,o){t.mergeLocaleMessage(s,o)},d(...s){return Reflect.apply(t.d,t,[...s])},getDateTimeFormat(s){return t.getDateTimeFormat(s)},setDateTimeFormat(s,o){t.setDateTimeFormat(s,o)},mergeDateTimeFormat(s,o){t.mergeDateTimeFormat(s,o)},n(...s){return Reflect.apply(t.n,t,[...s])},getNumberFormat(s){return t.getNumberFormat(s)},setNumberFormat(s,o){t.setNumberFormat(s,o)},mergeNumberFormat(s,o){t.mergeNumberFormat(s,o)},getChoiceIndex(s,o){return-1}};return i.__extender=r,i}}const Mp={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:n=>n==="parent"||n==="global",default:"parent"},i18n:{type:Object}};function GE({slots:n},e){return e.length===1&&e[0]==="default"?(n.default?n.default():[]).reduce((r,i)=>[...r,...i.type===ze?i.children:[i]],[]):e.reduce((t,r)=>{const i=n[r];return i&&(t[r]=i()),t},Ze())}function u_(n){return ze}const WE=Ge({name:"i18n-t",props:$t({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:n=>yt(n)||!isNaN(n)}},Mp),setup(n,e){const{slots:t,attrs:r}=e,i=n.i18n||Ip({useScope:n.scope,__useComponent:!0});return()=>{const s=Object.keys(t).filter(f=>f!=="_"),o=Ze();n.locale&&(o.locale=n.locale),n.plural!==void 0&&(o.plural=oe(n.plural)?+n.plural:n.plural);const a=GE(e,s),l=i[Yh](n.keypath,a,o),c=$t(Ze(),r),u=oe(n.tag)||Ue(n.tag)?n.tag:u_();return $o(u,c,l)}}}),iv=WE;function UE(n){return ot(n)&&!oe(n[0])}function f_(n,e,t,r){const{slots:i,attrs:s}=e;return()=>{const o={part:!0};let a=Ze();n.locale&&(o.locale=n.locale),oe(n.format)?o.key=n.format:Ue(n.format)&&(oe(n.format.key)&&(o.key=n.format.key),a=Object.keys(n.format).reduce((h,p)=>t.includes(p)?$t(Ze(),h,{[p]:n.format[p]}):h,Ze()));const l=r(n.value,o,a);let c=[o.key];ot(l)?c=l.map((h,p)=>{const d=i[h.type],g=d?d({[h.type]:h.value,index:p,parts:l}):[h.value];return UE(g)&&(g[0].key=`${h.type}-${p}`),g}):oe(l)&&(c=[l]);const u=$t(Ze(),s),f=oe(n.tag)||Ue(n.tag)?n.tag:u_();return $o(f,u,c)}}const KE=Ge({name:"i18n-n",props:$t({value:{type:Number,required:!0},format:{type:[String,Object]}},Mp),setup(n,e){const t=n.i18n||Ip({useScope:n.scope,__useComponent:!0});return f_(n,e,r_,(...r)=>t[Xh](...r))}}),sv=KE,YE=Ge({name:"i18n-d",props:$t({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Mp),setup(n,e){const t=n.i18n||Ip({useScope:n.scope,__useComponent:!0});return f_(n,e,n_,(...r)=>t[qh](...r))}}),ov=YE;function qE(n,e){const t=n;if(n.mode==="composition")return t.__getInstance(e)||n.global;{const r=t.__getInstance(e);return r!=null?r.__composer:n.global.__composer}}function XE(n){const e=o=>{const{instance:a,modifiers:l,value:c}=o;if(!a||!a.$)throw Mt(kt.UNEXPECTED_ERROR);const u=qE(n,a.$),f=av(c);return[Reflect.apply(u.t,u,[...lv(f)]),u]};return{created:(o,a)=>{const[l,c]=e(a);Xc&&n.global===c&&(o.__i18nWatcher=gr(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{Xc&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=av(a);o.textContent=Reflect.apply(l.t,l,[...lv(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function av(n){if(oe(n))return{path:n};if(Ee(n)){if(!("path"in n))throw Mt(kt.REQUIRED_VALUE,"path");return n}else throw Mt(kt.INVALID_VALUE)}function lv(n){const{path:e,locale:t,args:r,choice:i,plural:s}=n,o={},a=r||{};return oe(t)&&(o.locale=t),yt(i)&&(o.plural=i),yt(s)&&(o.plural=s),[e,a,o]}function JE(n,e,...t){const r=Ee(t[0])?t[0]:{},i=!!r.useI18nComponentName;(Fe(r.globalInstall)?r.globalInstall:!0)&&([i?"i18n":iv.name,"I18nT"].forEach(o=>n.component(o,iv)),[sv.name,"I18nN"].forEach(o=>n.component(o,sv)),[ov.name,"I18nD"].forEach(o=>n.component(o,ov))),n.directive("t",XE(e))}function QE(n,e,t){return{beforeCreate(){const r=br();if(!r)throw Mt(kt.UNEXPECTED_ERROR);const i=this.$options;if(i.i18n){const s=i.i18n;if(i.__i18n&&(s.__i18n=i.__i18n),s.__root=e,this===this.$root)this.$i18n=cv(n,s);else{s.__injectWithOption=!0,s.__extender=t.__vueI18nExtend,this.$i18n=Qh(s);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(i.__i18n)if(this===this.$root)this.$i18n=cv(n,i);else{this.$i18n=Qh({__i18n:i.__i18n,__injectWithOption:!0,__extender:t.__vueI18nExtend,__root:e});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=n;i.__i18nGlobal&&c_(e,i,i),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,o)=>this.$i18n.te(s,o),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),t.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=br();if(!r)throw Mt(kt.UNEXPECTED_ERROR);const i=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,i.__disposer&&(i.__disposer(),delete i.__disposer,delete i.__extender),t.__deleteInstance(r),delete this.$i18n}}}function cv(n,e){n.locale=e.locale||n.locale,n.fallbackLocale=e.fallbackLocale||n.fallbackLocale,n.missing=e.missing||n.missing,n.silentTranslationWarn=e.silentTranslationWarn||n.silentFallbackWarn,n.silentFallbackWarn=e.silentFallbackWarn||n.silentFallbackWarn,n.formatFallbackMessages=e.formatFallbackMessages||n.formatFallbackMessages,n.postTranslation=e.postTranslation||n.postTranslation,n.warnHtmlInMessage=e.warnHtmlInMessage||n.warnHtmlInMessage,n.escapeParameterHtml=e.escapeParameterHtml||n.escapeParameterHtml,n.sync=e.sync||n.sync,n.__composer[o_](e.pluralizationRules||n.pluralizationRules);const t=$u(n.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(t).forEach(r=>n.mergeLocaleMessage(r,t[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>n.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>n.mergeNumberFormat(r,e.numberFormats[r])),n}const ZE=Ni("global-vue-i18n");function eT(n={},e){const t=__VUE_I18N_LEGACY_API__&&Fe(n.legacy)?n.legacy:__VUE_I18N_LEGACY_API__,r=Fe(n.globalInjection)?n.globalInjection:!0,i=__VUE_I18N_LEGACY_API__&&t?!!n.allowComposition:!0,s=new Map,[o,a]=tT(n,t),l=Ni("");function c(h){return s.get(h)||null}function u(h,p){s.set(h,p)}function f(h){s.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},get allowComposition(){return i},async install(p,...d){if(p.__VUE_I18N_SYMBOL__=l,p.provide(p.__VUE_I18N_SYMBOL__,h),Ee(d[0])){const y=d[0];h.__composerExtend=y.__composerExtend,h.__vueI18nExtend=y.__vueI18nExtend}let g=null;!t&&r&&(g=uT(p,h.global)),__VUE_I18N_FULL_INSTALL__&&JE(p,h,...d),__VUE_I18N_LEGACY_API__&&t&&p.mixin(QE(a,a.__composer,h));const m=p.unmount;p.unmount=()=>{g&&g(),h.dispose(),m()}},get global(){return a},dispose(){o.stop()},__instances:s,__getInstance:c,__setInstance:u,__deleteInstance:f};return h}}function Ip(n={}){const e=br();if(e==null)throw Mt(kt.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Mt(kt.NOT_INSTALLED);const t=nT(e),r=iT(t),i=l_(e),s=rT(n,i);if(__VUE_I18N_LEGACY_API__&&t.mode==="legacy"&&!n.__useComponent){if(!t.allowComposition)throw Mt(kt.NOT_AVAILABLE_IN_LEGACY_MODE);return lT(e,s,r,n)}if(s==="global")return c_(r,n,i),r;if(s==="parent"){let l=sT(t,e,n.__useComponent);return l==null&&(l=r),l}const o=t;let a=o.__getInstance(e);if(a==null){const l=$t({},n);"__i18n"in i&&(l.__i18n=i.__i18n),r&&(l.__root=r),a=Op(l),o.__composerExtend&&(a[Jh]=o.__composerExtend(a)),aT(o,e,a),o.__setInstance(e,a)}return a}function tT(n,e,t){const r=Nx();{const i=__VUE_I18N_LEGACY_API__&&e?r.run(()=>Qh(n)):r.run(()=>Op(n));if(i==null)throw Mt(kt.UNEXPECTED_ERROR);return[r,i]}}function nT(n){{const e=ka(n.isCE?ZE:n.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Mt(n.isCE?kt.NOT_INSTALLED_WITH_PROVIDE:kt.UNEXPECTED_ERROR);return e}}function rT(n,e){return Du(n)?"__i18n"in e?"local":"global":n.useScope?n.useScope:"local"}function iT(n){return n.mode==="composition"?n.global:n.global.__composer}function sT(n,e,t=!1){let r=null;const i=e.root;let s=oT(e,t);for(;s!=null;){const o=n;if(n.mode==="composition")r=o.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(s);a!=null&&(r=a.__composer,t&&r&&!r[a_]&&(r=null))}if(r!=null||i===s)break;s=s.parent}return r}function oT(n,e=!1){return n==null?null:e&&n.vnode.ctx||n.parent}function aT(n,e,t){Bo(()=>{},e),Iu(()=>{const r=t;n.__deleteInstance(e);const i=r[Jh];i&&(i(),delete r[Jh])},e)}function lT(n,e,t,r={}){const i=e==="local",s=vp(null);if(i&&n.proxy&&!(n.proxy.$options.i18n||n.proxy.$options.__i18n))throw Mt(kt.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Fe(r.inheritLocale)?r.inheritLocale:!oe(r.locale),a=bn(!i||o?t.locale.value:oe(r.locale)?r.locale:Co),l=bn(!i||o?t.fallbackLocale.value:oe(r.fallbackLocale)||ot(r.fallbackLocale)||Ee(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),c=bn($u(a.value,r)),u=bn(Ee(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),f=bn(Ee(r.numberFormats)?r.numberFormats:{[a.value]:{}}),h=i?t.missingWarn:Fe(r.missingWarn)||Ai(r.missingWarn)?r.missingWarn:!0,p=i?t.fallbackWarn:Fe(r.fallbackWarn)||Ai(r.fallbackWarn)?r.fallbackWarn:!0,d=i?t.fallbackRoot:Fe(r.fallbackRoot)?r.fallbackRoot:!0,g=!!r.fallbackFormat,m=st(r.missing)?r.missing:null,y=st(r.postTranslation)?r.postTranslation:null,w=i?t.warnHtmlMessage:Fe(r.warnHtmlMessage)?r.warnHtmlMessage:!0,b=!!r.escapeParameter,v=i?t.modifiers:Ee(r.modifiers)?r.modifiers:{},S=r.pluralRules||i&&t.pluralRules;function _(){return[a.value,l.value,c.value,u.value,f.value]}const k=At({get:()=>s.value?s.value.locale.value:a.value,set:A=>{s.value&&(s.value.locale.value=A),a.value=A}}),M=At({get:()=>s.value?s.value.fallbackLocale.value:l.value,set:A=>{s.value&&(s.value.fallbackLocale.value=A),l.value=A}}),E=At(()=>s.value?s.value.messages.value:c.value),F=At(()=>u.value),j=At(()=>f.value);function L(){return s.value?s.value.getPostTranslationHandler():y}function V(A){s.value&&s.value.setPostTranslationHandler(A)}function ue(){return s.value?s.value.getMissingHandler():m}function ke(A){s.value&&s.value.setMissingHandler(A)}function re(A){return _(),A()}function le(...A){return s.value?re(()=>Reflect.apply(s.value.t,null,[...A])):re(()=>"")}function ce(...A){return s.value?Reflect.apply(s.value.rt,null,[...A]):""}function Re(...A){return s.value?re(()=>Reflect.apply(s.value.d,null,[...A])):re(()=>"")}function me(...A){return s.value?re(()=>Reflect.apply(s.value.n,null,[...A])):re(()=>"")}function Ce(A){return s.value?s.value.tm(A):{}}function Ae(A,D){return s.value?s.value.te(A,D):!1}function Je(A){return s.value?s.value.getLocaleMessage(A):{}}function Ye(A,D){s.value&&(s.value.setLocaleMessage(A,D),c.value[A]=D)}function Oe(A,D){s.value&&s.value.mergeLocaleMessage(A,D)}function dt(A){return s.value?s.value.getDateTimeFormat(A):{}}function jt(A,D){s.value&&(s.value.setDateTimeFormat(A,D),u.value[A]=D)}function St(A,D){s.value&&s.value.mergeDateTimeFormat(A,D)}function Yt(A){return s.value?s.value.getNumberFormat(A):{}}function gt(A,D){s.value&&(s.value.setNumberFormat(A,D),f.value[A]=D)}function qt(A,D){s.value&&s.value.mergeNumberFormat(A,D)}const mn={get id(){return s.value?s.value.id:-1},locale:k,fallbackLocale:M,messages:E,datetimeFormats:F,numberFormats:j,get inheritLocale(){return s.value?s.value.inheritLocale:o},set inheritLocale(A){s.value&&(s.value.inheritLocale=A)},get availableLocales(){return s.value?s.value.availableLocales:Object.keys(c.value)},get modifiers(){return s.value?s.value.modifiers:v},get pluralRules(){return s.value?s.value.pluralRules:S},get isGlobal(){return s.value?s.value.isGlobal:!1},get missingWarn(){return s.value?s.value.missingWarn:h},set missingWarn(A){s.value&&(s.value.missingWarn=A)},get fallbackWarn(){return s.value?s.value.fallbackWarn:p},set fallbackWarn(A){s.value&&(s.value.missingWarn=A)},get fallbackRoot(){return s.value?s.value.fallbackRoot:d},set fallbackRoot(A){s.value&&(s.value.fallbackRoot=A)},get fallbackFormat(){return s.value?s.value.fallbackFormat:g},set fallbackFormat(A){s.value&&(s.value.fallbackFormat=A)},get warnHtmlMessage(){return s.value?s.value.warnHtmlMessage:w},set warnHtmlMessage(A){s.value&&(s.value.warnHtmlMessage=A)},get escapeParameter(){return s.value?s.value.escapeParameter:b},set escapeParameter(A){s.value&&(s.value.escapeParameter=A)},t:le,getPostTranslationHandler:L,setPostTranslationHandler:V,getMissingHandler:ue,setMissingHandler:ke,rt:ce,d:Re,n:me,tm:Ce,te:Ae,getLocaleMessage:Je,setLocaleMessage:Ye,mergeLocaleMessage:Oe,getDateTimeFormat:dt,setDateTimeFormat:jt,mergeDateTimeFormat:St,getNumberFormat:Yt,setNumberFormat:gt,mergeNumberFormat:qt};function O(A){A.locale.value=a.value,A.fallbackLocale.value=l.value,Object.keys(c.value).forEach(D=>{A.mergeLocaleMessage(D,c.value[D])}),Object.keys(u.value).forEach(D=>{A.mergeDateTimeFormat(D,u.value[D])}),Object.keys(f.value).forEach(D=>{A.mergeNumberFormat(D,f.value[D])}),A.escapeParameter=b,A.fallbackFormat=g,A.fallbackRoot=d,A.fallbackWarn=p,A.missingWarn=h,A.warnHtmlMessage=w}return m1(()=>{if(n.proxy==null||n.proxy.$i18n==null)throw Mt(kt.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const A=s.value=n.proxy.$i18n.__composer;e==="global"?(a.value=A.locale.value,l.value=A.fallbackLocale.value,c.value=A.messages.value,u.value=A.datetimeFormats.value,f.value=A.numberFormats.value):i&&O(A)}),mn}const cT=["locale","fallbackLocale","availableLocales"],uv=["t","rt","d","n","tm","te"];function uT(n,e){const t=Object.create(null);return cT.forEach(i=>{const s=Object.getOwnPropertyDescriptor(e,i);if(!s)throw Mt(kt.UNEXPECTED_ERROR);const o=bt(s.value)?{get(){return s.value.value},set(a){s.value.value=a}}:{get(){return s.get&&s.get()}};Object.defineProperty(t,i,o)}),n.config.globalProperties.$i18n=t,uv.forEach(i=>{const s=Object.getOwnPropertyDescriptor(e,i);if(!s||!s.value)throw Mt(kt.UNEXPECTED_ERROR);Object.defineProperty(n.config.globalProperties,`$${i}`,s)}),()=>{delete n.config.globalProperties.$i18n,uv.forEach(i=>{delete n.config.globalProperties[`$${i}`]})}}jE();__INTLIFY_JIT_COMPILATION__?zg(RE):zg(NE);uE(Wk);fE(U1);if(__INTLIFY_PROD_DEVTOOLS__){const n=Ir();n.__INTLIFY__=!0,eE(n.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var fv;const ju=typeof window<"u",fT=n=>typeof n<"u",hT=n=>typeof n=="function",dT=n=>typeof n=="string",Pp=()=>{};ju&&((fv=window==null?void 0:window.navigator)!=null&&fv.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ds(n){return typeof n=="function"?n():P(n)}function pT(n){return n}function mT(n){return Hb()?(Lx(n),!0):!1}function h_(n,e=!0){br()?Bo(n):e?n():Eu(n)}function gT(n){br()&&Iu(n)}function vT(n){var e;const t=ds(n);return(e=t==null?void 0:t.$el)!=null?e:t}const d_=ju?window:void 0,yT=ju?window.document:void 0,bT=ju?window.navigator:void 0;function Vl(...n){let e,t,r,i;if(dT(n[0])||Array.isArray(n[0])?([t,r,i]=n,e=d_):[e,t,r,i]=n,!e)return Pp;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const s=[],o=()=>{s.forEach(u=>u()),s.length=0},a=(u,f,h,p)=>(u.addEventListener(f,h,p),()=>u.removeEventListener(f,h,p)),l=gr(()=>[vT(e),ds(i)],([u,f])=>{o(),u&&s.push(...t.flatMap(h=>r.map(p=>a(u,h,p,f))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return mT(c),c}function _T(n,e=!1){const t=bn(),r=()=>t.value=!!n();return r(),h_(r,e),t}function wT(n){return JSON.parse(JSON.stringify(n))}const hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dv="__vueuse_ssr_handlers__";hv[dv]=hv[dv]||{};const CT={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function ST(n={}){const{reactive:e=!1,target:t=d_,aliasMap:r=CT,passive:i=!0,onEventFired:s=Pp}=n,o=Ha(new Set),a={toJSON(){return{}},current:o},l=e?Ha(a):a,c=new Set,u=new Set;function f(g,m){g in l&&(e?l[g]=m:l[g].value=m)}function h(){o.clear();for(const g of u)f(g,!1)}function p(g,m){var y,w;const b=(y=g.key)==null?void 0:y.toLowerCase(),S=[(w=g.code)==null?void 0:w.toLowerCase(),b].filter(Boolean);b&&(m?o.add(b):o.delete(b));for(const _ of S)u.add(_),f(_,m);b==="meta"&&!m?(c.forEach(_=>{o.delete(_),f(_,!1)}),c.clear()):typeof g.getModifierState=="function"&&g.getModifierState("Meta")&&m&&[...o,...S].forEach(_=>c.add(_))}Vl(t,"keydown",g=>(p(g,!0),s(g)),{passive:i}),Vl(t,"keyup",g=>(p(g,!1),s(g)),{passive:i}),Vl("blur",h,{passive:!0}),Vl("focus",h,{passive:!0});const d=new Proxy(l,{get(g,m,y){if(typeof m!="string")return Reflect.get(g,m,y);if(m=m.toLowerCase(),m in r&&(m=r[m]),!(m in l))if(/[+_-]/.test(m)){const b=m.split(/[+_-]/g).map(v=>v.trim());l[m]=At(()=>b.every(v=>P(d[v])))}else l[m]=bn(!1);const w=Reflect.get(g,m,y);return e?P(w):w}});return d}var pv;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(pv||(pv={}));function xT(n,e=Pp,t={}){const{immediate:r=!0,manual:i=!1,type:s="text/javascript",async:o=!0,crossOrigin:a,referrerPolicy:l,noModule:c,defer:u,document:f=yT,attrs:h={}}=t,p=bn(null);let d=null;const g=w=>new Promise((b,v)=>{const S=M=>(p.value=M,b(M),M);if(!f){b(!1);return}let _=!1,k=f.querySelector(`script[src="${ds(n)}"]`);k?k.hasAttribute("data-loaded")&&S(k):(k=f.createElement("script"),k.type=s,k.async=o,k.src=ds(n),u&&(k.defer=u),a&&(k.crossOrigin=a),c&&(k.noModule=c),l&&(k.referrerPolicy=l),Object.entries(h).forEach(([M,E])=>k==null?void 0:k.setAttribute(M,E)),_=!0),k.addEventListener("error",M=>v(M)),k.addEventListener("abort",M=>v(M)),k.addEventListener("load",()=>{k.setAttribute("data-loaded","true"),e(k),S(k)}),_&&(k=f.head.appendChild(k)),w||S(k)}),m=(w=!0)=>(d||(d=g(w)),d),y=()=>{if(!f)return;d=null,p.value&&(p.value=null);const w=f.querySelector(`script[src="${ds(n)}"]`);w&&f.head.removeChild(w)};return r&&!i&&h_(m),i||gT(y),{scriptTag:p,load:m,unload:y}}var AT=Object.defineProperty,mv=Object.getOwnPropertySymbols,kT=Object.prototype.hasOwnProperty,ET=Object.prototype.propertyIsEnumerable,gv=(n,e,t)=>e in n?AT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vv=(n,e)=>{for(var t in e||(e={}))kT.call(e,t)&&gv(n,t,e[t]);if(mv)for(var t of mv(e))ET.call(e,t)&&gv(n,t,e[t]);return n};function TT(n={},e={}){const{navigator:t=bT}=e,r=t,i=_T(()=>r&&"canShare"in r);return{isSupported:i,share:async(o={})=>{if(i.value){const a=vv(vv({},ds(n)),ds(o));let l=!0;if(a.files&&r.canShare&&(l=r.canShare({files:a.files})),l)return r.share(a)}}}}var OT=Object.defineProperty,yv=Object.getOwnPropertySymbols,MT=Object.prototype.hasOwnProperty,IT=Object.prototype.propertyIsEnumerable,bv=(n,e,t)=>e in n?OT(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,PT=(n,e)=>{for(var t in e||(e={}))MT.call(e,t)&&bv(n,t,e[t]);if(yv)for(var t of yv(e))IT.call(e,t)&&bv(n,t,e[t]);return n};const NT={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};PT({linear:pT},NT);function Hu(n,e,t,r={}){var i,s,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:f}=r,h=br(),p=t||(h==null?void 0:h.emit)||((i=h==null?void 0:h.$emit)==null?void 0:i.bind(h))||((o=(s=h==null?void 0:h.proxy)==null?void 0:s.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let d=c;d=c||d||`update:${e.toString()}`;const g=y=>a?hT(a)?a(y):wT(y):y,m=()=>fT(n[e])?g(n[e]):f;if(l){const y=m(),w=bn(y);return gr(()=>n[e],b=>w.value=g(b)),gr(w,b=>{(b!==n[e]||u)&&p(d,b)},{deep:u}),w}else return At({get(){return m()},set(y){p(d,y)}})}var RT=Math.PI/180;function LT(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const co=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},fe={_global:co,version:"8.4.3",isBrowser:LT(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return fe.angleDeg?n*RT:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return fe.DD.isDragging},isDragReady(){return!!fe.DD.node},releaseCanvasOnDestroy:!0,document:co.document,_injectGlobal(n){co.Konva=n}},ht=n=>{fe[n.prototype.getClassName()]=n};fe._injectGlobal(fe);let Yn=class p_{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new p_(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){var t=Math.cos(e),r=Math.sin(e),i=this.m[0]*t+this.m[2]*r,s=this.m[1]*t+this.m[3]*r,o=this.m[0]*-r+this.m[2]*t,a=this.m[1]*-r+this.m[3]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){var r=this.m[0]+this.m[2]*t,i=this.m[1]+this.m[3]*t,s=this.m[2]+this.m[0]*e,o=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o,this}multiply(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],o=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,s=this.m[0]*e,o=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}getMatrix(){return this.m}decompose(){var e=this.m[0],t=this.m[1],r=this.m[2],i=this.m[3],s=this.m[4],o=this.m[5],a=e*i-t*r;let l={x:s,y:o,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||t!=0){var c=Math.sqrt(e*e+t*t);l.rotation=t>0?Math.acos(e/c):-Math.acos(e/c),l.scaleX=c,l.scaleY=a/c,l.skewX=(e*r+t*i)/a,l.skewY=0}else if(r!=0||i!=0){var u=Math.sqrt(r*r+i*i);l.rotation=Math.PI/2-(i>0?Math.acos(-r/u):-Math.acos(r/u)),l.scaleX=a/u,l.scaleY=u,l.skewX=0,l.skewY=(e*r+t*i)/a}return l.rotation=R._getRotation(l.rotation),l}};var DT="[object Array]",FT="[object Number]",BT="[object String]",$T="[object Boolean]",jT=Math.PI/180,HT=180/Math.PI,Bf="#",VT="",zT="0",GT="Konva warning: ",_v="Konva error: ",WT="rgb(",$f={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},UT=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,zl=[];const KT=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,60)},R={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===DT},_isNumber(n){return Object.prototype.toString.call(n)===FT&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===BT},_isBoolean(n){return Object.prototype.toString.call(n)===$T},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;var e=n[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){zl.push(n),zl.length===1&&KT(function(){const e=zl;zl=[],e.forEach(function(t){t()})})},createCanvasElement(){var n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,e){var t=R.createImageElement();t.onload=function(){e(t)},t.src=n},_rgbToHex(n,e,t){return((1<<24)+(n<<16)+(e<<8)+t).toString(16).slice(1)},_hexToRgb(n){n=n.replace(Bf,VT);var e=parseInt(n,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var n=(Math.random()*16777215<<0).toString(16);n.length<6;)n=zT+n;return Bf+n},getRGB(n){var e;return n in $f?(e=$f[n],{r:e[0],g:e[1],b:e[2]}):n[0]===Bf?this._hexToRgb(n.substring(1)):n.substr(0,4)===WT?(e=UT.exec(n.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",R._namedColorToRBA(n)||R._hex3ColorToRGBA(n)||R._hex4ColorToRGBA(n)||R._hex6ColorToRGBA(n)||R._hex8ColorToRGBA(n)||R._rgbColorToRGBA(n)||R._rgbaColorToRGBA(n)||R._hslColorToRGBA(n)},_namedColorToRBA(n){var e=$f[n.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];var e=n.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];var e=n.split(/ *, */).map((t,r)=>t.slice(-1)==="%"?r===3?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[e,...t]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),r=Number(t[0])/360,i=Number(t[1])/100,s=Number(t[2])/100;let o,a,l;if(i===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?o=s*(1+i):o=s+i-s*i;const c=2*s-o,u=[0,0,0];for(let f=0;f<3;f++)a=r+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?l=c+(o-c)*6*a:2*a<1?l=o:3*a<2?l=c+(o-c)*(2/3-a)*6:l=c,u[f]=l*255;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection(n,e){return!(e.x>n.x+n.width||e.x+e.width<n.x||e.y>n.y+n.height||e.y+e.height<n.y)},cloneObject(n){var e={};for(var t in n)this._isPlainObject(n[t])?e[t]=this.cloneObject(n[t]):this._isArray(n[t])?e[t]=this.cloneArray(n[t]):e[t]=n[t];return e},cloneArray(n){return n.slice(0)},degToRad(n){return n*jT},radToDeg(n){return n*HT},_degToRad(n){return R.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),R.degToRad(n)},_radToDeg(n){return R.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),R.radToDeg(n)},_getRotation(n){return fe.angleDeg?R.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(_v+n)},error(n){console.error(_v+n)},warn(n){fe.showWarnings&&console.warn(GT+n)},each(n,e){for(var t in n)e(t,n[t])},_inRange(n,e,t){return e<=n&&n<t},_getProjectionToSegment(n,e,t,r,i,s){var o,a,l,c=(n-t)*(n-t)+(e-r)*(e-r);if(c==0)o=n,a=e,l=(i-t)*(i-t)+(s-r)*(s-r);else{var u=((i-n)*(t-n)+(s-e)*(r-e))/c;u<0?(o=n,a=e,l=(n-i)*(n-i)+(e-s)*(e-s)):u>1?(o=t,a=r,l=(t-i)*(t-i)+(r-s)*(r-s)):(o=n+u*(t-n),a=e+u*(r-e),l=(o-i)*(o-i)+(a-s)*(a-s))}return[o,a,l]},_getProjectionToLine(n,e,t){var r=R.cloneObject(n),i=Number.MAX_VALUE;return e.forEach(function(s,o){if(!(!t&&o===e.length-1)){var a=e[(o+1)%e.length],l=R._getProjectionToSegment(s.x,s.y,a.x,a.y,n.x,n.y),c=l[0],u=l[1],f=l[2];f<i&&(r.x=c,r.y=u,i=f)}}),r},_prepareArrayForTween(n,e,t){var r,i=[],s=[];if(n.length>e.length){var o=e;e=n,n=o}for(r=0;r<n.length;r+=2)i.push({x:n[r],y:n[r+1]});for(r=0;r<e.length;r+=2)s.push({x:e[r],y:e[r+1]});var a=[];return s.forEach(function(l){var c=R._getProjectionToLine(l,i,t);a.push(c.x),a.push(c.y)}),a},_prepareToStringify(n){var e;n.visitedByCircularReferenceRemoval=!0;for(var t in n)if(n.hasOwnProperty(t)&&n[t]&&typeof n[t]=="object"){if(e=Object.getOwnPropertyDescriptor(n,t),n[t].visitedByCircularReferenceRemoval||R._isElement(n[t]))if(e.configurable)delete n[t];else return null;else if(R._prepareToStringify(n[t])===null)if(e.configurable)delete n[t];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,e){for(var t in e)n[t]=e[t];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){fe.releaseCanvasOnDestroy&&n.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(n,e,t,r){let i=0,s=0,o=0,a=0;typeof r=="number"?i=s=o=a=Math.min(r,e/2,t/2):(i=Math.min(r[0]||0,e/2,t/2),s=Math.min(r[1]||0,e/2,t/2),a=Math.min(r[2]||0,e/2,t/2),o=Math.min(r[3]||0,e/2,t/2)),n.moveTo(i,0),n.lineTo(e-s,0),n.arc(e-s,s,s,Math.PI*3/2,0,!1),n.lineTo(e,t-a),n.arc(e-a,t-a,a,0,Math.PI/2,!1),n.lineTo(o,t),n.arc(o,t-o,o,Math.PI/2,Math.PI,!1),n.lineTo(0,i),n.arc(i,i,i,Math.PI,Math.PI*3/2,!1)}};function Di(n){return R._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||R._isBoolean(n)?n:Object.prototype.toString.call(n)}function m_(n){return n>255?255:n<0?0:Math.round(n)}function Q(){if(fe.isUnminified)return function(n,e){return R._isNumber(n)||R.warn(Di(n)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),n}}function Np(n){if(fe.isUnminified)return function(e,t){let r=R._isNumber(e),i=R._isArray(e)&&e.length==n;return!r&&!i&&R.warn(Di(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+n+")"),e}}function Rp(){if(fe.isUnminified)return function(n,e){var t=R._isNumber(n),r=n==="auto";return t||r||R.warn(Di(n)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),n}}function Vo(){if(fe.isUnminified)return function(n,e){return R._isString(n)||R.warn(Di(n)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),n}}function g_(){if(fe.isUnminified)return function(n,e){const t=R._isString(n),r=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return t||r||R.warn(Di(n)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),n}}function YT(){if(fe.isUnminified)return function(n,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&n instanceof t||(R._isArray(n)?n.forEach(function(r){R._isNumber(r)||R.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):R.warn(Di(n)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),n}}function rr(){if(fe.isUnminified)return function(n,e){var t=n===!0||n===!1;return t||R.warn(Di(n)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),n}}function qT(n){if(fe.isUnminified)return function(e,t){return e==null||R.isObject(e)||R.warn(Di(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+n),e}}var Zo="get",ea="set";const T={addGetterSetter(n,e,t,r,i){T.addGetter(n,e,t),T.addSetter(n,e,r,i),T.addOverloadedGetterSetter(n,e)},addGetter(n,e,t){var r=Zo+R._capitalize(e);n.prototype[r]=n.prototype[r]||function(){var i=this.attrs[e];return i===void 0?t:i}},addSetter(n,e,t,r){var i=ea+R._capitalize(e);n.prototype[i]||T.overWriteSetter(n,e,t,r)},overWriteSetter(n,e,t,r){var i=ea+R._capitalize(e);n.prototype[i]=function(s){return t&&s!==void 0&&s!==null&&(s=t.call(this,s,e)),this._setAttr(e,s),r&&r.call(this),this}},addComponentsGetterSetter(n,e,t,r,i){var s=t.length,o=R._capitalize,a=Zo+o(e),l=ea+o(e),c,u;n.prototype[a]=function(){var h={};for(c=0;c<s;c++)u=t[c],h[u]=this.getAttr(e+o(u));return h};var f=qT(t);n.prototype[l]=function(h){var p=this.attrs[e],d;r&&(h=r.call(this,h)),f&&f.call(this,h,e);for(d in h)h.hasOwnProperty(d)&&this._setAttr(e+o(d),h[d]);return h||t.forEach(g=>{this._setAttr(e+o(g),void 0)}),this._fireChangeEvent(e,p,h),i&&i.call(this),this},T.addOverloadedGetterSetter(n,e)},addOverloadedGetterSetter(n,e){var t=R._capitalize(e),r=ea+t,i=Zo+t;n.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(n,e,t,r){R.error("Adding deprecated "+e);var i=Zo+R._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[i]=function(){R.error(s);var o=this.attrs[e];return o===void 0?t:o},T.addSetter(n,e,r,function(){R.error(s)}),T.addOverloadedGetterSetter(n,e)},backCompat(n,e){R.each(e,function(t,r){var i=n.prototype[r],s=Zo+R._capitalize(t),o=ea+R._capitalize(t);function a(){i.apply(this,arguments),R.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}n.prototype[t]=a,n.prototype[s]=a,n.prototype[o]=a})},afterSetFilter(){this._filterUpToDate=!1}};function XT(n){var e=[],t=n.length,r=R,i,s;for(i=0;i<t;i++)s=n[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s);return e}var wv=",",JT="(",QT=")",ZT="([",eO="])",tO=";",nO="()",rO="=",Cv=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],iO=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const sO=100;class Vu{constructor(e){this.canvas=e,fe.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){var r=this.traceArr,i=r.length,s="",o,a,l,c;for(o=0;o<i;o++)a=r[o],l=a.method,l?(c=a.args,s+=l,e?s+=nO:R._isArray(c[0])?s+=ZT+c.join(wv)+eO:(t&&(c=c.map(u=>typeof u=="number"?Math.floor(u):u)),s+=JT+c.join(wv)+QT)):(s+=a.property,e||(s+=rO+a.val)),s+=tO;return s}clearTrace(){this.traceArr=[]}_trace(e){var t=this.traceArr,r;t.push(e),r=t.length,r>=sO&&t.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,r,i,s,o){this._context.arc(e,t,r,i,s,o)}arcTo(e,t,r,i,s){this._context.arcTo(e,t,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,r,i,s,o){this._context.bezierCurveTo(e,t,r,i,s,o)}clearRect(e,t,r,i){this._context.clearRect(e,t,r,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,t){var r=arguments;if(r.length===2)return this._context.createImageData(e,t);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,r,i){return this._context.createLinearGradient(e,t,r,i)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,r,i,s,o){return this._context.createRadialGradient(e,t,r,i,s,o)}drawImage(e,t,r,i,s,o,a,l,c){var u=arguments,f=this._context;u.length===3?f.drawImage(e,t,r):u.length===5?f.drawImage(e,t,r,i,s):u.length===9&&f.drawImage(e,t,r,i,s,o,a,l,c)}ellipse(e,t,r,i,s,o,a,l){this._context.ellipse(e,t,r,i,s,o,a,l)}isPointInPath(e,t,r,i){return r?this._context.isPointInPath(r,e,t,i):this._context.isPointInPath(e,t,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,t,r,i){this._context.fillRect(e,t,r,i)}strokeRect(e,t,r,i){this._context.strokeRect(e,t,r,i)}fillText(e,t,r,i){i?this._context.fillText(e,t,r,i):this._context.fillText(e,t,r)}measureText(e){return this._context.measureText(e)}getImageData(e,t,r,i){return this._context.getImageData(e,t,r,i)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,r,i){this._context.rect(e,t,r,i)}putImageData(e,t,r){this._context.putImageData(e,t,r)}quadraticCurveTo(e,t,r,i){this._context.quadraticCurveTo(e,t,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,r,i,s,o){this._context.setTransform(e,t,r,i,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,r,i){this._context.strokeText(e,t,r,i)}transform(e,t,r,i,s,o){this._context.transform(e,t,r,i,s,o)}translate(e,t){this._context.translate(e,t)}_enableTrace(){var e=this,t=Cv.length,r=this.setAttr,i,s,o=function(a){var l=e[a],c;e[a]=function(){return s=XT(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:a,args:s}),c}};for(i=0;i<t;i++)o(Cv[i]);e.setAttr=function(){r.apply(e,arguments);var a=arguments[0],l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;var r=!t||t==="source-over";r||this.setAttr("globalCompositeOperation",t)}}iO.forEach(function(n){Object.defineProperty(Vu.prototype,n,{get(){return this._context[n]},set(e){this._context[n]=e}})});class oO extends Vu{constructor(e){super(e),this._context=e._canvas.getContext("2d")}_fillColor(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),r=e.getFillPriority();if(t&&r==="color"){this._fillColor(e);return}const i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(t.x,t.y,r.x,r.y);if(i){for(var o=0;o<i.length;o+=2)s.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var t=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var t,r,i,s=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),u=l.x*c,f=l.y*c;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",o*Math.min(Math.abs(u),Math.abs(f))),this.setAttr("shadowOffsetX",a.x*u),this.setAttr("shadowOffsetY",a.y*f)}}class aO extends Vu{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const s=e.getStrokeScaleEnabled();if(!s){this.save();var t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),s||this.restore()}}}var Gl;function lO(){if(Gl)return Gl;var n=R.createCanvasElement(),e=n.getContext("2d");return Gl=function(){var t=fe._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/r}(),R.releaseCanvas(n),Gl}class zu{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=e||{},r=t.pixelRatio||fe.pixelRatio||lO();this.pixelRatio=r,this._canvas=R.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio,r=this.getContext()._context;r.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio,r=this.getContext()._context;r.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(i){return R.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}T.addGetterSetter(zu,"pixelRatio",void 0,Q());class uo extends zu{constructor(e={width:0,height:0}){super(e),this.context=new oO(this),this.setSize(e.width,e.height)}}class Lp extends zu{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new aO(this),this.setSize(e.width,e.height)}}const We={get isDragging(){var n=!1;return We._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return We._dragElements.forEach(e=>{n=e.node}),n},_dragElements:new Map,_drag(n){const e=[];We._dragElements.forEach((t,r)=>{const{node:i}=t,s=i.getStage();s.setPointersPositions(n),t.pointerId===void 0&&(t.pointerId=R._getFirstPointerId(n));const o=s._changedPointerPositions.find(c=>c.id===t.pointerId);if(o){if(t.dragStatus!=="dragging"){var a=i.dragDistance(),l=Math.max(Math.abs(o.x-t.startPointerPos.x),Math.abs(o.y-t.startPointerPos.y));if(l<a||(i.startDrag({evt:n}),!i.isDragging()))return}i._setDragPosition(n,t),e.push(i)}}),e.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:n},!0)})},_endDragBefore(n){const e=[];We._dragElements.forEach(t=>{const{node:r}=t,i=r.getStage();if(n&&i.setPointersPositions(n),!i._changedPointerPositions.find(a=>a.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(We.justDragged=!0,fe._mouseListenClick=!1,fe._touchListenClick=!1,fe._pointerListenClick=!1,t.dragStatus="stopped");const o=t.node.getLayer()||t.node instanceof fe.Stage&&t.node;o&&e.indexOf(o)===-1&&e.push(o)}),e.forEach(t=>{t.draw()})},_endDragAfter(n){We._dragElements.forEach((e,t)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:n},!0),e.dragStatus!=="dragging"&&We._dragElements.delete(t)})}};fe.isBrowser&&(window.addEventListener("mouseup",We._endDragBefore,!0),window.addEventListener("touchend",We._endDragBefore,!0),window.addEventListener("mousemove",We._drag),window.addEventListener("touchmove",We._drag),window.addEventListener("mouseup",We._endDragAfter,!1),window.addEventListener("touchend",We._endDragAfter,!1));var Ic="absoluteOpacity",Wl="allEventListeners",Tr="absoluteTransform",Sv="absoluteScale",Qi="canvas",cO="Change",uO="children",fO="konva",Zh="listening",xv="mouseenter",Av="mouseleave",kv="set",Ev="Shape",Pc=" ",Tv="stage",Qr="transform",hO="Stage",ed="visible",dO=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Pc);let pO=1,ee=class td{constructor(e){this._id=pO++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Qr||e===Tr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){var r=this._cache.get(e),i=e===Qr||e===Tr,s=r===void 0||i&&r.dirty===!0;return s&&(r=t.call(this),this._cache.set(e,r)),r}_calculate(e,t,r){if(!this._attachedDepsListeners.get(e)){const i=t.map(s=>s+"Change.konva").join(Pc);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Qi)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Tr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Qi)){const{scene:e,filter:t,hit:r}=this._cache.get(Qi);R.releaseCanvas(e,t,r),this._cache.delete(Qi)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var t=e||{},r={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(t.width||r.width),s=Math.ceil(t.height||r.height),o=t.pixelRatio,a=t.x===void 0?Math.floor(r.x):t.x,l=t.y===void 0?Math.floor(r.y):t.y,c=t.offset||0,u=t.drawBorder||!1,f=t.hitCanvasPixelRatio||1;if(!i||!s){R.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=c*2+1,s+=c*2+1,a-=c,l-=c;var h=new uo({pixelRatio:o,width:i,height:s}),p=new uo({pixelRatio:o,width:0,height:0}),d=new Lp({pixelRatio:f,width:i,height:s}),g=h.getContext(),m=d.getContext();return d.isCache=!0,h.isCache=!0,this._cache.delete(Qi),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(h.getContext()._context.imageSmoothingEnabled=!1,p.getContext()._context.imageSmoothingEnabled=!1),g.save(),m.save(),g.translate(-a,-l),m.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Ic),this._clearSelfAndDescendantCache(Sv),this.drawScene(h,this),this.drawHit(d,this),this._isUnderCache=!1,g.restore(),m.restore(),u&&(g.save(),g.beginPath(),g.rect(0,0,i,s),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set(Qi,{scene:h,filter:p,hit:d,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Qi)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i,s,o,a,l=this.getAbsoluteTransform(t);return r.forEach(function(c){var u=l.point(c);i===void 0&&(i=o=u.x,s=a=u.y),i=Math.min(i,u.x),s=Math.min(s,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}),{x:i,y:s,width:o-i,height:a-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var t=this._getCanvasCache(),r=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),t=this._getCanvasCache(),r=t.scene,i=t.filter,s=i.getContext(),o,a,l,c;if(e){if(!this._filterUpToDate){var u=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/u,r.getHeight()/u),a=s.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<o;l++){if(c=e[l],typeof c!="function"){R.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,a),s.putImageData(a,0,0)}}catch(f){R.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,t){if(this._cache&&this._cache.delete(Wl),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(Pc),i=r.length,s,o,a,l,c;for(s=0;s<i;s++)o=r[s],a=o.split("."),l=a[0],c=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:t});return this}off(e,t){var r=(e||"").split(Pc),i=r.length,s,o,a,l,c,u;if(this._cache&&this._cache.delete(Wl),!e)for(o in this.eventListeners)this._off(o);for(s=0;s<i;s++)if(a=r[s],l=a.split("."),c=l[0],u=l[1],c)this.eventListeners[c]&&this._off(c,u,t);else for(o in this.eventListeners)this._off(o,u,t);return this}dispatchEvent(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(r){t.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,r){var i=this;this.on(e,function(s){for(var o=s.target.findAncestors(t,!0,i),a=0;a<o.length;a++)s=R.cloneObject(s),s.currentTarget=o[a],r.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),We._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Tr),this._clearSelfAndDescendantCache(Ic),this._clearSelfAndDescendantCache(Sv),this._clearSelfAndDescendantCache(Tv),this._clearSelfAndDescendantCache(ed),this._clearSelfAndDescendantCache(Zh)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var t="get"+R._capitalize(e);return R._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),t=[];e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var t,r;if(!e)return this;for(t in e)t!==uO&&(r=kv+R._capitalize(t),R._isFunction(this[r])?this[r](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(Zh,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(ed,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;We._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});var s=!t&&!fe.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),t=this,r=0,i,s,o,a;function l(c){for(i=[],s=c.length,o=0;o<s;o++)a=c[o],r++,a.nodeType!==Ev&&(i=i.concat(a.getChildren().slice())),a._id===t._id&&(o=s);i.length>0&&i[0].getDepth()<=e&&l(i)}return t.nodeType!==hO&&l(t.getStage().getChildren()),r}getDepth(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Qr),this._clearSelfAndDescendantCache(Tr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var t=this.getAbsoluteTransform().copy();return t.invert(),t.point(e)}getAbsolutePosition(e){let t=!1,r=this.parent;for(;r;){if(r.isCached()){t=!0;break}r=r.parent}t&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),s=new Yn,o=this.offset();return s.m=i.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){var t=this._clearTransform();this.attrs.x=t.x,this.attrs.y=t.y,delete t.x,delete t.y,this._clearCache(Qr);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(t),this.setPosition({x:e.x,y:e.y}),this._clearCache(Qr),this._clearSelfAndDescendantCache(Tr),this}_setTransform(e){var t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var t=e.x,r=e.y,i=this.x(),s=this.y();return t!==void 0&&(i+=t),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,t){var r=[],i=this.getParent(),s,o;if(!(t&&t._id===this._id)){for(r.unshift(this);i&&(!t||i._id!==t._id);)r.unshift(i),i=i.parent;for(s=r.length,o=0;o<s;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return R.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return R.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return R.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return R.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return R.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&R.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Ic,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},t=this.getAttrs(),r,i,s,o,a;e.attrs={};for(r in t)i=t[r],a=R.isObject(i)&&!R._isPlainObject(i)&&!R._isArray(i),!a&&(s=typeof this[r]=="function"&&this[r],delete t[r],o=s?s.call(this):null,t[r]=i,o!==i&&(e.attrs[r]=i));return e.className=this.getClassName(),R._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,r){var i=[];t&&this._isMatch(e)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,t,r){return this.findAncestors(e,t,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var t=e.replace(/ /g,"").split(","),r=t.length,i,s;for(i=0;i<r;i++)if(s=t[i],R.isValidSelector(s)||(R.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),R.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),R.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Tv,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,t={},r){return t.target=t.target||this,r?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Tr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var t;if(e)return t=new Yn,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?t.multiply(i.getTransform()):s==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;t=this._cache.get(Tr)||new Yn,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();var r=this.transformsEnabled();if(r==="all")t.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;t.translate(i-o,s-a)}return t.dirty=!1,t}getAbsoluteScale(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Qr,this._getTransform)}_getTransform(){var e,t,r=this._cache.get(Qr)||new Yn;r.reset();var i=this.x(),s=this.y(),o=fe.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,c=this.attrs.skewX||0,u=this.attrs.skewY||0,f=this.attrs.offsetX||0,h=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),o!==0&&r.rotate(o),(c!==0||u!==0)&&r.skew(c,u),(a!==1||l!==1)&&r.scale(a,l),(f!==0||h!==0)&&r.translate(-1*f,-1*h),r.dirty=!1,r}clone(e){var t=R.cloneObject(this.attrs),r,i,s,o,a;for(r in e)t[r]=e[r];var l=new this.constructor(t);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,o=0;o<s;o++)a=i[o],a.name.indexOf(fO)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(a));return l}_toKonvaCanvas(e){e=e||{};var t=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(t.x),s=e.y!==void 0?e.y:Math.floor(t.y),o=e.pixelRatio||1,a=new uo({width:e.width||Math.ceil(t.width)||(r?r.width():0),height:e.height||Math.ceil(t.height)||(r?r.height():0),pixelRatio:o}),l=a.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||s)&&l.translate(-1*i,-1*s),this.drawScene(a),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var t=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(t,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((t,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,R._urlToImage(this.toDataURL(e),function(s){t(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(e){return new Promise((t,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(s=>{t(s),i==null||i(s)})}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():fe.dragDistance}_off(e,t,r){var i=this.eventListeners[e],s,o,a;for(s=0;s<i.length;s++)if(o=i[s].name,a=i[s].handler,(o!=="konva"||t==="konva")&&(!t||o===t)&&(!r||r===a)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,t,r){this._fire(e+cO,{oldVal:t,newVal:r})}addName(e){if(!this.hasName(e)){var t=this.name(),r=t?t+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const t=this.name();if(!t)return!1;var r=(t||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var t=(this.name()||"").split(/\s/g),r=t.indexOf(e);return r!==-1&&(t.splice(r,1),this.name(t.join(" "))),this}setAttr(e,t){var r=this[kv+R._capitalize(e)];return R._isFunction(r)?r.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(fe.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){var r=this.attrs[e];r===t&&!R.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,t),this._requestDraw())}_setComponentAttr(e,t,r){var i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,t,r){t&&this.nodeType===Ev&&(t.target=this);var i=(e===xv||e===Av)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(e,t);var s=(e===xv||e===Av)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,t,r):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){let t=this._cache.get(Wl);if(!t){t={};let i=Object.getPrototypeOf(this);for(;i;){if(!i.eventListeners){i=Object.getPrototypeOf(i);continue}for(var r in i.eventListeners){const s=i.eventListeners[r],o=t[r]||[];t[r]=s.concat(o)}i=Object.getPrototypeOf(i)}this._cache.set(Wl,t)}return t[e]}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,t);const s=this.eventListeners[e];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var t=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition(),s=r._getPointerById(t)||r._changedPointerPositions[0]||i;We._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){We._dragElements.has(this._id)||this._createDragElement(e);const r=We._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const r=this.getStage()._getPointerById(t.pointerId);if(r){var i={x:r.x-t.offset.x,y:r.y-t.offset.y},s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,i,e);o?i=o:R.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const t=We._dragElements.get(this._id);t&&(t.dragStatus="stopped"),We._endDragBefore(e),We._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=We._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var t=e.evt.button!==void 0,r=!t||fe.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;We._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const t=We._dragElements.get(this._id),r=t&&t.dragStatus==="dragging",i=t&&t.dragStatus==="ready";r?this.stopDrag():i&&We._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const r={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return R.haveIntersection(r,this.getClientRect())}static create(e,t){return R._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){var r=td.prototype.getClassName.call(e),i=e.children,s,o,a;t&&(e.attrs.container=t),fe[r]||(R.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=fe[r];if(s=new l(e.attrs),i)for(o=i.length,a=0;a<o;a++)s.add(td._createNode(i[a]));return s}};ee.prototype.nodeType="Node";ee.prototype._attrsAffectingSize=[];ee.prototype.eventListeners={};ee.prototype.on.call(ee.prototype,dO,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Qr),this._clearSelfAndDescendantCache(Tr)});ee.prototype.on.call(ee.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(ed)});ee.prototype.on.call(ee.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Zh)});ee.prototype.on.call(ee.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Ic)});const it=T.addGetterSetter;it(ee,"zIndex");it(ee,"absolutePosition");it(ee,"position");it(ee,"x",0,Q());it(ee,"y",0,Q());it(ee,"globalCompositeOperation","source-over",Vo());it(ee,"opacity",1,Q());it(ee,"name","",Vo());it(ee,"id","",Vo());it(ee,"rotation",0,Q());T.addComponentsGetterSetter(ee,"scale",["x","y"]);it(ee,"scaleX",1,Q());it(ee,"scaleY",1,Q());T.addComponentsGetterSetter(ee,"skew",["x","y"]);it(ee,"skewX",0,Q());it(ee,"skewY",0,Q());T.addComponentsGetterSetter(ee,"offset",["x","y"]);it(ee,"offsetX",0,Q());it(ee,"offsetY",0,Q());it(ee,"dragDistance",null,Q());it(ee,"width",0,Q());it(ee,"height",0,Q());it(ee,"listening",!0,rr());it(ee,"preventDefault",!0,rr());it(ee,"filters",null,function(n){return this._filterUpToDate=!1,n});it(ee,"visible",!0,rr());it(ee,"transformsEnabled","all",Vo());it(ee,"size");it(ee,"dragBoundFunc");it(ee,"draggable",!1,rr());T.backCompat(ee,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class xn extends ee{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const t=this.children||[];var r=[];return t.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var t=0;t<e.length;t++)this.add(e[t]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&t)}),r}_descendants(e){let t=!1;const r=this.getChildren();for(const i of r){if(t=e(i),t)return!0;if(i.hasChildren()&&(t=i._descendants(e),t))return!0}return!1}toObject(){var e=ee.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){var t=ee.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){t.add(r.clone())}),t}getAllIntersections(e){var t=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&t.push(r)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,r){t.index=r}),this._requestDraw()}drawScene(e,t){var r=this.getLayer(),i=e||r&&r.getCanvas(),s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(a){s.save();var c=this.getAbsoluteTransform(t).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",i,t);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.hit;if(a){s.save();var l=this.getAbsoluteTransform(t).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,t);return this}_drawChildren(e,t,r){var i,s=t&&t.getContext(),o=this.clipWidth(),a=this.clipHeight(),l=this.clipFunc(),c=o&&a||l;const u=r===this;if(c){s.save();var f=this.getAbsoluteTransform(r),h=f.getMatrix();if(s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),s.beginPath(),l)l.call(this,s,this);else{var p=this.clipX(),d=this.clipY();s.rect(p,d,o,a)}s.clip(),h=f.copy().invert().getMatrix(),s.transform(h[0],h[1],h[2],h[3],h[4],h[5])}var g=!u&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";g&&(s.save(),s._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(m){m[e](t,r)}),g&&s.restore(),c&&s.restore()}getClientRect(e){var t;e=e||{};var r=e.skipTransform,i=e.relativeTo,s,o,a,l,c={x:1/0,y:1/0,width:0,height:0},u=this;(t=this.children)===null||t===void 0||t.forEach(function(g){if(g.visible()){var m=g.getClientRect({relativeTo:u,skipShadow:e.skipShadow,skipStroke:e.skipStroke});m.width===0&&m.height===0||(s===void 0?(s=m.x,o=m.y,a=m.x+m.width,l=m.y+m.height):(s=Math.min(s,m.x),o=Math.min(o,m.y),a=Math.max(a,m.x+m.width),l=Math.max(l,m.y+m.height)))}});for(var f=this.find("Shape"),h=!1,p=0;p<f.length;p++){var d=f[p];if(d._isVisible(this)){h=!0;break}}return h&&s!==void 0?c={x:s,y:o,width:a-s,height:l-o}:c={x:0,y:0,width:0,height:0},r?c:this._transformedRect(c,i)}}T.addComponentsGetterSetter(xn,"clip",["x","y","width","height"]);T.addGetterSetter(xn,"clipX",void 0,Q());T.addGetterSetter(xn,"clipY",void 0,Q());T.addGetterSetter(xn,"clipWidth",void 0,Q());T.addGetterSetter(xn,"clipHeight",void 0,Q());T.addGetterSetter(xn,"clipFunc");const Ja=new Map,v_=fe._global.PointerEvent!==void 0;function jf(n){return Ja.get(n)}function Dp(n){return{evt:n,pointerId:n.pointerId}}function y_(n,e){return Ja.get(n)===e}function b_(n,e){Ta(n),e.getStage()&&(Ja.set(n,e),v_&&e._fire("gotpointercapture",Dp(new PointerEvent("gotpointercapture"))))}function Ta(n,e){const t=Ja.get(n);if(!t)return;const r=t.getStage();r&&r.content,Ja.delete(n),v_&&t._fire("lostpointercapture",Dp(new PointerEvent("lostpointercapture")))}var mO="Stage",gO="string",Ov="px",vO="mouseout",__="mouseleave",w_="mouseover",C_="mouseenter",S_="mousemove",x_="mousedown",A_="mouseup",ha="pointermove",da="pointerdown",no="pointerup",pa="pointercancel",yO="lostpointercapture",Ul="pointerout",Kl="pointerleave",Yl="pointerover",ql="pointerenter",nd="contextmenu",k_="touchstart",E_="touchend",T_="touchmove",O_="touchcancel",rd="wheel",bO=5,_O=[[C_,"_pointerenter"],[x_,"_pointerdown"],[S_,"_pointermove"],[A_,"_pointerup"],[__,"_pointerleave"],[k_,"_pointerdown"],[T_,"_pointermove"],[E_,"_pointerup"],[O_,"_pointercancel"],[w_,"_pointerover"],[rd,"_wheel"],[nd,"_contextmenu"],[da,"_pointerdown"],[ha,"_pointermove"],[no,"_pointerup"],[pa,"_pointercancel"],[yO,"_lostpointercapture"]];const Hf={mouse:{[Ul]:vO,[Kl]:__,[Yl]:w_,[ql]:C_,[ha]:S_,[da]:x_,[no]:A_,[pa]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Ul]:"touchout",[Kl]:"touchleave",[Yl]:"touchover",[ql]:"touchenter",[ha]:T_,[da]:k_,[no]:E_,[pa]:O_,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Ul]:Ul,[Kl]:Kl,[Yl]:Yl,[ql]:ql,[ha]:ha,[da]:da,[no]:no,[pa]:pa,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},ma=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",Ks=n=>{const e=ma(n);if(e==="pointer")return fe.pointerEventsEnabled&&Hf.pointer;if(e==="touch")return Hf.touch;if(e==="mouse")return Hf.mouse};function Mv(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&R.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const wO="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Nc=[];class Gu extends xn{constructor(e){super(Mv(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Nc.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Mv(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t=e.getType()==="Layer",r=e.getType()==="FastLayer";t||r||R.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===gO){if(e.charAt(0)==="."){var t=e.slice(1);e=document.getElementsByClassName(t)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,t=e.length,r;for(r=0;r<t;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),xn.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&R._isInDocument(e)&&this.container().removeChild(e);var t=Nc.indexOf(this);return t>-1&&Nc.splice(t,1),R.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(R.warn(wO),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var t=new uo({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=t.getContext()._context,i=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),i.forEach(function(s){if(s.isVisible()){var o=s._toKonvaCanvas(e);r.drawImage(o._canvas,e.x,e.y,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}}),t}getIntersection(e){if(!e)return null;var t=this.children,r=t.length,i=r-1,s;for(s=i;s>=0;s--){const o=t[s].getIntersection(e);if(o)return o}return null}_resizeDOM(){var e=this.width(),t=this.height();this.content&&(this.content.style.width=e+Ov,this.content.style.height=t+Ov),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(r=>{r.setSize({width:e,height:t}),r.draw()})}add(e,...t){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var i=this.children.length;return i>bO&&R.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),fe.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return y_(e,this)}setPointerCapture(e){b_(e,this)}releaseCapture(e){Ta(e)}getLayers(){return this.children}_bindContentEvents(){fe.isBrowser&&_O.forEach(([e,t])=>{this.content.addEventListener(e,r=>{this[t](r)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=Ks(e.type);this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=Ks(e.type);this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=Ks(e.type),r=ma(e.type);if(t){this.setPointersPositions(e);var i=this._getTargetShape(r),s=!We.isDragging||fe.hitOnDragEnabled;i&&s?(i._fireAndBubble(t.pointerout,{evt:e}),i._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const t=Ks(e.type),r=ma(e.type);if(t){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(s=>{var o=this.getIntersection(s);if(We.justDragged=!1,fe["_"+r+"ListenClick"]=!0,!(o&&o.isListening()))return;fe.capturePointerEventsEnabled&&o.setPointerCapture(s.id),this[r+"ClickStartShape"]=o,o._fireAndBubble(t.pointerdown,{evt:e,pointerId:s.id}),i=!0;const l=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),i||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const t=Ks(e.type),r=ma(e.type);if(!t)return;We.isDragging&&We.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!We.isDragging||fe.hitOnDragEnabled;if(!i)return;var s={};let o=!1;var a=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const c=jf(l.id)||this.getIntersection(l),u=l.id,f={evt:e,pointerId:u};var h=a!==c;if(h&&a&&(a._fireAndBubble(t.pointerout,Object.assign({},f),c),a._fireAndBubble(t.pointerleave,Object.assign({},f),c)),c){if(s[c._id])return;s[c._id]=!0}c&&c.isListening()?(o=!0,h&&(c._fireAndBubble(t.pointerover,Object.assign({},f),a),c._fireAndBubble(t.pointerenter,Object.assign({},f),a),this[r+"targetShape"]=c),c._fireAndBubble(t.pointermove,Object.assign({},f))):a&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:u}),this[r+"targetShape"]=null)}),o||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=Ks(e.type),r=ma(e.type);if(!t)return;this.setPointersPositions(e);const i=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var o={};let a=!1;this._changedPointerPositions.forEach(l=>{const c=jf(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),o[c._id])return;o[c._id]=!0}const u=l.id,f={evt:e,pointerId:u};let h=!1;fe["_"+r+"InDblClickWindow"]?(h=!0,clearTimeout(this[r+"DblTimeout"])):We.justDragged||(fe["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){fe["_"+r+"InDblClickWindow"]=!1},fe.dblClickWindow),c&&c.isListening()?(a=!0,this[r+"ClickEndShape"]=c,c._fireAndBubble(t.pointerup,Object.assign({},f)),fe["_"+r+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(t.pointerclick,Object.assign({},f)),h&&s&&s===c&&c._fireAndBubble(t.pointerdblclick,Object.assign({},f)))):(this[r+"ClickEndShape"]=null,fe["_"+r+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),h&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))}),a||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),fe["_"+r+"ListenClick"]=!1,e.cancelable&&r!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(nd,{evt:e}):this._fire(nd,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(rd,{evt:e}):this._fire(rd,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=jf(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(no,Dp(e)),Ta(e.pointerId)}_lostpointercapture(e){Ta(e.pointerId)}setPointersPositions(e){var t=this._getContentPosition(),r=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-t.left)/t.scaleX,y:(s.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-t.left)/t.scaleX,y:(s.clientY-t.top)/t.scaleY})})):(r=(e.clientX-t.left)/t.scaleX,i=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:R._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:i,id:R._getFirstPointerId(e)}])}_setPointerPosition(e){R.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new uo({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Lp({pixelRatio:1,width:this.width(),height:this.height()}),!!fe.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return R.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}Gu.prototype.nodeType=mO;ht(Gu);T.addGetterSetter(Gu,"container");var M_="hasShadow",I_="shadowRGBA",P_="patternImage",N_="linearGradient",R_="radialGradient";let Xl;function Vf(){return Xl||(Xl=R.createCanvasElement().getContext("2d"),Xl)}const Oa={};function CO(n){n.fill()}function SO(n){n.stroke()}function xO(n){n.fill()}function AO(n){n.stroke()}function kO(){this._clearCache(M_)}function EO(){this._clearCache(I_)}function TO(){this._clearCache(P_)}function OO(){this._clearCache(N_)}function MO(){this._clearCache(R_)}class X extends ee{constructor(e){super(e);let t;for(;t=R.getRandomColor(),!(t&&!(t in Oa)););this.colorKey=t,Oa[t]=this}getContext(){return R.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return R.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(M_,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(P_,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=Vf();const t=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const r=new Yn;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(fe.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=r.getMatrix(),s=typeof DOMMatrix>"u"?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);t.setTransform(s)}return t}}_getLinearGradient(){return this._getCache(N_,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var t=Vf(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),s=t.createLinearGradient(r.x,r.y,i.x,i.y),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}_getRadialGradient(){return this._getCache(R_,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var t=Vf(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),s=t.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}getShadowRGBA(){return this._getCache(I_,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=R.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var t=this.getStage(),r=t.bufferHitCanvas,i;return r.getContext().clear(),this.drawHit(r,null,!0),i=r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,i[3]>0}destroy(){return ee.prototype.destroy.call(this),delete Oa[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!this.getStage()||!((t=this.attrs.perfectDrawEnabled)!==null&&t!==void 0?t:!0))return!1;const i=e||this.hasFill(),s=this.hasStroke(),o=this.getAbsoluteOpacity()!==1;if(i&&s&&o)return!0;const a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(i&&s&&a&&l)}setStrokeHitEnabled(e){R.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const t=e.skipTransform,r=e.relativeTo,i=this.getSelfRect(),o=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=i.width+o,l=i.height+o,c=!e.skipShadow&&this.hasShadow(),u=c?this.shadowOffsetX():0,f=c?this.shadowOffsetY():0,h=a+Math.abs(u),p=l+Math.abs(f),d=c&&this.shadowBlur()||0,g=h+d*2,m=p+d*2,y={width:g,height:m,x:-(o/2+d)+Math.min(u,0)+i.x,y:-(o/2+d)+Math.min(f,0)+i.y};return t?y:this._transformedRect(y,r)}drawScene(e,t){var r=this.getLayer(),i=e||r.getCanvas(),s=i.getContext(),o=this._getCanvasCache(),a=this.getSceneFunc(),l=this.hasShadow(),c,u,f,h=i.isCache,p=t===this;if(!this.isVisible()&&!p)return this;if(o){s.save();var d=this.getAbsoluteTransform(t).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),this._useBufferCanvas()&&!h){c=this.getStage(),u=c.bufferCanvas,f=u.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var g=this.getAbsoluteTransform(t).getMatrix();f.transform(g[0],g[1],g[2],g[3],g[4],g[5]),a.call(this,f,this),f.restore();var m=u.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(u._canvas,0,0,u.width/m,u.height/m)}else{if(s._applyLineJoin(this),!p){var g=this.getAbsoluteTransform(t).getMatrix();s.transform(g[0],g[1],g[2],g[3],g[4],g[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),a.call(this,s,this)}return s.restore(),this}drawHit(e,t,r=!1){if(!this.shouldDrawHit(t,r))return this;var i=this.getLayer(),s=e||i.hitCanvas,o=s&&s.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||R.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){o.save();var u=this.getAbsoluteTransform(t).getMatrix();return o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),!(this===t)){var h=this.getAbsoluteTransform(t).getMatrix();o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return a.call(this,o,this),o.restore(),this}drawHitFromCache(e=0){var t=this._getCanvasCache(),r=this._getCachedSceneCanvas(),i=t.hit,s=i.getContext(),o=i.getWidth(),a=i.getHeight(),l,c,u,f,h,p;s.clear(),s.drawImage(r._canvas,0,0,o,a);try{for(l=s.getImageData(0,0,o,a),c=l.data,u=c.length,f=R._hexToRgb(this.colorKey),h=0;h<u;h+=4)p=c[h+3],p>e?(c[h]=f.r,c[h+1]=f.g,c[h+2]=f.b,c[h+3]=255):c[h+3]=0;s.putImageData(l,0,0)}catch(d){R.error("Unable to draw hit graph from cached scene canvas. "+d.message)}return this}hasPointerCapture(e){return y_(e,this)}setPointerCapture(e){b_(e,this)}releaseCapture(e){Ta(e)}}X.prototype._fillFunc=CO;X.prototype._strokeFunc=SO;X.prototype._fillFuncHit=xO;X.prototype._strokeFuncHit=AO;X.prototype._centroid=!1;X.prototype.nodeType="Shape";ht(X);X.prototype.eventListeners={};X.prototype.on.call(X.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",kO);X.prototype.on.call(X.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",EO);X.prototype.on.call(X.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",TO);X.prototype.on.call(X.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",OO);X.prototype.on.call(X.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",MO);T.addGetterSetter(X,"stroke",void 0,g_());T.addGetterSetter(X,"strokeWidth",2,Q());T.addGetterSetter(X,"fillAfterStrokeEnabled",!1);T.addGetterSetter(X,"hitStrokeWidth","auto",Rp());T.addGetterSetter(X,"strokeHitEnabled",!0,rr());T.addGetterSetter(X,"perfectDrawEnabled",!0,rr());T.addGetterSetter(X,"shadowForStrokeEnabled",!0,rr());T.addGetterSetter(X,"lineJoin");T.addGetterSetter(X,"lineCap");T.addGetterSetter(X,"sceneFunc");T.addGetterSetter(X,"hitFunc");T.addGetterSetter(X,"dash");T.addGetterSetter(X,"dashOffset",0,Q());T.addGetterSetter(X,"shadowColor",void 0,Vo());T.addGetterSetter(X,"shadowBlur",0,Q());T.addGetterSetter(X,"shadowOpacity",1,Q());T.addComponentsGetterSetter(X,"shadowOffset",["x","y"]);T.addGetterSetter(X,"shadowOffsetX",0,Q());T.addGetterSetter(X,"shadowOffsetY",0,Q());T.addGetterSetter(X,"fillPatternImage");T.addGetterSetter(X,"fill",void 0,g_());T.addGetterSetter(X,"fillPatternX",0,Q());T.addGetterSetter(X,"fillPatternY",0,Q());T.addGetterSetter(X,"fillLinearGradientColorStops");T.addGetterSetter(X,"strokeLinearGradientColorStops");T.addGetterSetter(X,"fillRadialGradientStartRadius",0);T.addGetterSetter(X,"fillRadialGradientEndRadius",0);T.addGetterSetter(X,"fillRadialGradientColorStops");T.addGetterSetter(X,"fillPatternRepeat","repeat");T.addGetterSetter(X,"fillEnabled",!0);T.addGetterSetter(X,"strokeEnabled",!0);T.addGetterSetter(X,"shadowEnabled",!0);T.addGetterSetter(X,"dashEnabled",!0);T.addGetterSetter(X,"strokeScaleEnabled",!0);T.addGetterSetter(X,"fillPriority","color");T.addComponentsGetterSetter(X,"fillPatternOffset",["x","y"]);T.addGetterSetter(X,"fillPatternOffsetX",0,Q());T.addGetterSetter(X,"fillPatternOffsetY",0,Q());T.addComponentsGetterSetter(X,"fillPatternScale",["x","y"]);T.addGetterSetter(X,"fillPatternScaleX",1,Q());T.addGetterSetter(X,"fillPatternScaleY",1,Q());T.addComponentsGetterSetter(X,"fillLinearGradientStartPoint",["x","y"]);T.addComponentsGetterSetter(X,"strokeLinearGradientStartPoint",["x","y"]);T.addGetterSetter(X,"fillLinearGradientStartPointX",0);T.addGetterSetter(X,"strokeLinearGradientStartPointX",0);T.addGetterSetter(X,"fillLinearGradientStartPointY",0);T.addGetterSetter(X,"strokeLinearGradientStartPointY",0);T.addComponentsGetterSetter(X,"fillLinearGradientEndPoint",["x","y"]);T.addComponentsGetterSetter(X,"strokeLinearGradientEndPoint",["x","y"]);T.addGetterSetter(X,"fillLinearGradientEndPointX",0);T.addGetterSetter(X,"strokeLinearGradientEndPointX",0);T.addGetterSetter(X,"fillLinearGradientEndPointY",0);T.addGetterSetter(X,"strokeLinearGradientEndPointY",0);T.addComponentsGetterSetter(X,"fillRadialGradientStartPoint",["x","y"]);T.addGetterSetter(X,"fillRadialGradientStartPointX",0);T.addGetterSetter(X,"fillRadialGradientStartPointY",0);T.addComponentsGetterSetter(X,"fillRadialGradientEndPoint",["x","y"]);T.addGetterSetter(X,"fillRadialGradientEndPointX",0);T.addGetterSetter(X,"fillRadialGradientEndPointY",0);T.addGetterSetter(X,"fillPatternRotation",0);T.backCompat(X,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var IO="#",PO="beforeDraw",NO="draw",L_=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],RO=L_.length;class Ls extends xn{constructor(e){super(e),this.canvas=new uo,this.hitCanvas=new Lp({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){ee.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=ee.prototype.moveUp.call(this);if(!e)return!1;var t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(ee.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(ee.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return ee.prototype.remove.call(this),e&&e.parentNode&&R._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&R.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),ee.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){R.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){R.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,R.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var t=1,r=!1;;){for(let i=0;i<RO;i++){const s=L_[i],o=this._getIntersection({x:e.x+s.x*t,y:e.y+s.y*t}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(r)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,i=r[3];if(i===255){const s=R._rgbToHex(r[0],r[1],r[2]),o=Oa[IO+s];return o?{shape:o}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,t){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(PO,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),xn.prototype.drawScene.call(this,i,t),this._fire(NO,{node:this}),this}drawHit(e,t){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),xn.prototype.drawHit.call(this,i,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){R.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return R.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,t=!!this.hitCanvas._canvas.parentNode;t?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return R.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Ls.prototype.nodeType="Layer";ht(Ls);T.addGetterSetter(Ls,"imageSmoothingEnabled",!0);T.addGetterSetter(Ls,"clearBeforeDraw",!0);T.addGetterSetter(Ls,"hitGraphEnabled",!0,rr());class Fp extends Ls{constructor(e){super(e),this.listening(!1),R.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Fp.prototype.nodeType="FastLayer";ht(Fp);class xo extends xn{_validateAdd(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&R.throw("You may only add groups and shapes to groups.")}}xo.prototype.nodeType="Group";ht(xo);var zf=function(){return co.performance&&co.performance.now?function(){return co.performance.now()}:function(){return new Date().getTime()}}();class Nn{constructor(e,t){this.id=Nn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:zf(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){var t=[];return e?e.length>0?t=e:t=[e]:t=[],this.layers=t,this}getLayers(){return this.layers}addLayer(e){var t=this.layers,r=t.length,i;for(i=0;i<r;i++)if(t[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=Nn,t=e.animations,r=t.length,i;for(i=0;i<r;i++)if(t[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=zf(),Nn._addAnimation(this),this}stop(){return Nn._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var t=e.id,r=this.animations,i=r.length,s;for(s=0;s<i;s++)if(r[s].id===t){this.animations.splice(s,1);break}}static _runFrames(){var e={},t=this.animations,r,i,s,o,a,l,c,u,f;for(o=0;o<t.length;o++)if(r=t[o],i=r.layers,s=r.func,r._updateFrameObject(zf()),l=i.length,s?f=s.call(r,r.frame)!==!1:f=!0,!!f)for(a=0;a<l;a++)c=i[a],c._id!==void 0&&(e[c._id]=c);for(u in e)e.hasOwnProperty(u)&&e[u].batchDraw()}static _animationLoop(){var e=Nn;e.animations.length?(e._runFrames(),R.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,R.requestAnimFrame(this._animationLoop))}}Nn.animations=[];Nn.animIdCounter=0;Nn.animRunning=!1;var LO={node:1,duration:1,easing:1,onFinish:1,yoyo:1},DO=1,Iv=2,Pv=3,FO=0,Nv=["fill","stroke","shadowColor"];class BO{constructor(e,t,r,i,s,o,a){this.prop=e,this.propFunc=t,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(e){var t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Iv,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Pv,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===Iv?this.setTime(e):this.state===Pv&&this.setTime(this.duration-e)}pause(){this.state=DO,this.fire("onPause")}getTimer(){return new Date().getTime()}}class vt{constructor(e){var t=this,r=e.node,i=r._id,s,o=e.easing||Ma.Linear,a=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=r,this._id=FO++;var c=r.getLayer()||(r instanceof fe.Stage?r.getLayers():null);c||R.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Nn(function(){t.tween.onEnterFrame()},c),this.tween=new BO(l,function(u){t._tweenFunc(u)},o,0,1,s*1e3,a),this._addListeners(),vt.attrs[i]||(vt.attrs[i]={}),vt.attrs[i][this._id]||(vt.attrs[i][this._id]={}),vt.tweens[i]||(vt.tweens[i]={});for(l in e)LO[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){var r=this.node,i=r._id,s,o,a,l,c,u,f,h;if(a=vt.tweens[i][e],a&&delete vt.attrs[i][a][e],s=r.getAttr(e),R._isArray(t))if(o=[],c=Math.max(t.length,s.length),e==="points"&&t.length!==s.length&&(t.length>s.length?(f=s,s=R._prepareArrayForTween(s,t,r.closed())):(u=t,t=R._prepareArrayForTween(t,s,r.closed()))),e.indexOf("fill")===0)for(l=0;l<c;l++)if(l%2===0)o.push(t[l]-s[l]);else{var p=R.colorToRGBA(s[l]);h=R.colorToRGBA(t[l]),s[l]=p,o.push({r:h.r-p.r,g:h.g-p.g,b:h.b-p.b,a:h.a-p.a})}else for(l=0;l<c;l++)o.push(t[l]-s[l]);else Nv.indexOf(e)!==-1?(s=R.colorToRGBA(s),h=R.colorToRGBA(t),o={r:h.r-s.r,g:h.g-s.g,b:h.b-s.b,a:h.a-s.a}):o=t-s;vt.attrs[i][this._id][e]={start:s,diff:o,end:t,trueEnd:u,trueStart:f},vt.tweens[i][e]=this._id}_tweenFunc(e){var t=this.node,r=vt.attrs[t._id][this._id],i,s,o,a,l,c,u,f;for(i in r){if(s=r[i],o=s.start,a=s.diff,f=s.end,R._isArray(o))if(l=[],u=Math.max(o.length,f.length),i.indexOf("fill")===0)for(c=0;c<u;c++)c%2===0?l.push((o[c]||0)+a[c]*e):l.push("rgba("+Math.round(o[c].r+a[c].r*e)+","+Math.round(o[c].g+a[c].g*e)+","+Math.round(o[c].b+a[c].b*e)+","+(o[c].a+a[c].a*e)+")");else for(c=0;c<u;c++)l.push((o[c]||0)+a[c]*e);else Nv.indexOf(i)!==-1?l="rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":l=o+a*e;t.setAttr(i,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,t=vt.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,t=vt.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,t=this._id,r=vt.tweens[e],i;this.pause();for(i in r)delete vt.tweens[e][i];delete vt.attrs[e][t]}}vt.attrs={};vt.tweens={};ee.prototype.to=function(n){var e=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),e&&e()};var t=new vt(n);t.play()};const Ma={BackEaseIn(n,e,t,r){var i=1.70158;return t*(n/=r)*n*((i+1)*n-i)+e},BackEaseOut(n,e,t,r){var i=1.70158;return t*((n=n/r-1)*n*((i+1)*n+i)+1)+e},BackEaseInOut(n,e,t,r){var i=1.70158;return(n/=r/2)<1?t/2*(n*n*(((i*=1.525)+1)*n-i))+e:t/2*((n-=2)*n*(((i*=1.525)+1)*n+i)+2)+e},ElasticEaseIn(n,e,t,r,i,s){var o=0;return n===0?e:(n/=r)===1?e+t:(s||(s=r*.3),!i||i<Math.abs(t)?(i=t,o=s/4):o=s/(2*Math.PI)*Math.asin(t/i),-(i*Math.pow(2,10*(n-=1))*Math.sin((n*r-o)*(2*Math.PI)/s))+e)},ElasticEaseOut(n,e,t,r,i,s){var o=0;return n===0?e:(n/=r)===1?e+t:(s||(s=r*.3),!i||i<Math.abs(t)?(i=t,o=s/4):o=s/(2*Math.PI)*Math.asin(t/i),i*Math.pow(2,-10*n)*Math.sin((n*r-o)*(2*Math.PI)/s)+t+e)},ElasticEaseInOut(n,e,t,r,i,s){var o=0;return n===0?e:(n/=r/2)===2?e+t:(s||(s=r*(.3*1.5)),!i||i<Math.abs(t)?(i=t,o=s/4):o=s/(2*Math.PI)*Math.asin(t/i),n<1?-.5*(i*Math.pow(2,10*(n-=1))*Math.sin((n*r-o)*(2*Math.PI)/s))+e:i*Math.pow(2,-10*(n-=1))*Math.sin((n*r-o)*(2*Math.PI)/s)*.5+t+e)},BounceEaseOut(n,e,t,r){return(n/=r)<1/2.75?t*(7.5625*n*n)+e:n<2/2.75?t*(7.5625*(n-=1.5/2.75)*n+.75)+e:n<2.5/2.75?t*(7.5625*(n-=2.25/2.75)*n+.9375)+e:t*(7.5625*(n-=2.625/2.75)*n+.984375)+e},BounceEaseIn(n,e,t,r){return t-Ma.BounceEaseOut(r-n,0,t,r)+e},BounceEaseInOut(n,e,t,r){return n<r/2?Ma.BounceEaseIn(n*2,0,t,r)*.5+e:Ma.BounceEaseOut(n*2-r,0,t,r)*.5+t*.5+e},EaseIn(n,e,t,r){return t*(n/=r)*n+e},EaseOut(n,e,t,r){return-t*(n/=r)*(n-2)+e},EaseInOut(n,e,t,r){return(n/=r/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e},StrongEaseIn(n,e,t,r){return t*(n/=r)*n*n*n*n+e},StrongEaseOut(n,e,t,r){return t*((n=n/r-1)*n*n*n*n+1)+e},StrongEaseInOut(n,e,t,r){return(n/=r/2)<1?t/2*n*n*n*n*n+e:t/2*((n-=2)*n*n*n*n+2)+e},Linear(n,e,t,r){return t*n/r+e}},Rv=R._assign(fe,{Util:R,Transform:Yn,Node:ee,Container:xn,Stage:Gu,stages:Nc,Layer:Ls,FastLayer:Fp,Group:xo,DD:We,Shape:X,shapes:Oa,Animation:Nn,Tween:vt,Easings:Ma,Context:Vu,Canvas:zu});class Hr extends X{_sceneFunc(e){var t=fe.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,r),e.arc(0,0,this.innerRadius(),t,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),r=this.clockwise(),i=fe.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),c=s*(s>0?e:t),u=o*t,f=a*(a>0?e:t),h=l*(l>0?t:e);return{x:c,y:r?-1*h:f,width:u-c,height:h-f}}}Hr.prototype._centroid=!0;Hr.prototype.className="Arc";Hr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ht(Hr);T.addGetterSetter(Hr,"innerRadius",0,Q());T.addGetterSetter(Hr,"outerRadius",0,Q());T.addGetterSetter(Hr,"angle",0,Q());T.addGetterSetter(Hr,"clockwise",!1,rr());function id(n,e,t,r,i,s,o){var a=Math.sqrt(Math.pow(t-n,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-t,2)+Math.pow(s-r,2)),c=o*a/(a+l),u=o*l/(a+l),f=t-c*(i-n),h=r-c*(s-e),p=t+u*(i-n),d=r+u*(s-e);return[f,h,p,d]}function Lv(n,e){var t=n.length,r=[],i,s;for(i=2;i<t-2;i+=2)s=id(n[i-2],n[i-1],n[i],n[i+1],n[i+2],n[i+3],e),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(n[i]),r.push(n[i+1]),r.push(s[2]),r.push(s[3]));return r}class Vr extends X{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var t=this.points(),r=t.length,i=this.tension(),s=this.closed(),o=this.bezier(),a,l,c;if(r){if(e.beginPath(),e.moveTo(t[0],t[1]),i!==0&&r>4){for(a=this.getTensionPoints(),l=a.length,c=s?0:4,s||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);c<l-2;)e.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);s||e.quadraticCurveTo(a[l-2],a[l-1],t[r-2],t[r-1])}else if(o)for(c=2;c<r;)e.bezierCurveTo(t[c++],t[c++],t[c++],t[c++],t[c++],t[c++]);else for(c=2;c<r;c+=2)e.lineTo(t[c],t[c+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Lv(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),t=e.length,r=this.tension(),i=id(e[t-2],e[t-1],e[0],e[1],e[2],e[3],r),s=id(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],r),o=Lv(e,r),a=[i[2],i[3]].concat(o).concat([s[0],s[1],e[t-2],e[t-1],s[2],s[3],i[0],i[1],e[0],e[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var t=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],t=Math.min(t,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);return{x:t,y:i,width:r-t,height:s-i}}}Vr.prototype.className="Line";Vr.prototype._attrsAffectingSize=["points","bezier","tension"];ht(Vr);T.addGetterSetter(Vr,"closed",!1);T.addGetterSetter(Vr,"bezier",!1);T.addGetterSetter(Vr,"tension",0,Q());T.addGetterSetter(Vr,"points",[],YT());class Qe extends X{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=Qe.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength;this.on("dataChange.konva",function(){this.dataArray=Qe.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(e){var t=this.dataArray;e.beginPath();for(var r=!1,i=0;i<t.length;i++){var s=t[i].command,o=t[i].points;switch(s){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],l=o[1],c=o[2],u=o[3],f=o[4],h=o[5],p=o[6],d=o[7],g=c>u?c:u,m=c>u?1:c/u,y=c>u?u/c:1;e.translate(a,l),e.rotate(p),e.scale(m,y),e.arc(0,0,g,f,f+h,1-d),e.scale(1/m,1/y),e.rotate(-p),e.translate(-a,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var u=c.points[4],f=c.points[5],h=c.points[4]+f,p=Math.PI/180;if(Math.abs(u-h)<p&&(p=Math.abs(u-h)),f<0)for(let d=u-p;d>h;d-=p){const g=Qe.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],d,0);e.push(g.x,g.y)}else for(let d=u+p;d<h;d+=p){const g=Qe.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],d,0);e.push(g.x,g.y)}}else if(c.command==="C")for(let d=0;d<=1;d+=.01){const g=Qe.getPointOnCubicBezier(d,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(g.x,g.y)}else e=e.concat(c.points)});for(var t=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],isNaN(o)||(t=Math.min(t,o),r=Math.max(r,o)),isNaN(a)||(i=Math.min(i,a),s=Math.max(s,a));return{x:t,y:i,width:r-t,height:s-i}}getLength(){return this.pathLength}getPointAtLength(e){var t,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&e>this.dataArray[r].pathLength;)e-=this.dataArray[r].pathLength,++r;if(r===i)return t=this.dataArray[r-1].points.slice(-2),{x:t[0],y:t[1]};if(e<.01)return t=this.dataArray[r].points.slice(0,2),{x:t[0],y:t[1]};var s=this.dataArray[r],o=s.points;switch(s.command){case"L":return Qe.getPointOnLine(e,s.start.x,s.start.y,o[0],o[1]);case"C":return Qe.getPointOnCubicBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return Qe.getPointOnQuadraticBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3]);case"A":var a=o[0],l=o[1],c=o[2],u=o[3],f=o[4],h=o[5],p=o[6];return f+=h*e/s.pathLength,Qe.getPointOnEllipticalArc(a,l,c,u,f,p)}return null}static getLineLength(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))}static getPointOnLine(e,t,r,i,s,o,a){o===void 0&&(o=t),a===void 0&&(a=r);var l=(s-r)/(i-t+1e-8),c=Math.sqrt(e*e/(1+l*l));i<t&&(c*=-1);var u=l*c,f;if(i===t)f={x:o,y:a+u};else if((a-r)/(o-t+1e-8)===l)f={x:o+c,y:a+u};else{var h,p,d=this.getLineLength(t,r,i,s),g=(o-t)*(i-t)+(a-r)*(s-r);g=g/(d*d),h=t+g*(i-t),p=r+g*(s-r);var m=this.getLineLength(o,a,h,p),y=Math.sqrt(e*e-m*m);c=Math.sqrt(y*y/(1+l*l)),i<t&&(c*=-1),u=l*c,f={x:h+c,y:p+u}}return f}static getPointOnCubicBezier(e,t,r,i,s,o,a,l,c){function u(m){return m*m*m}function f(m){return 3*m*m*(1-m)}function h(m){return 3*m*(1-m)*(1-m)}function p(m){return(1-m)*(1-m)*(1-m)}var d=l*u(e)+o*f(e)+i*h(e)+t*p(e),g=c*u(e)+a*f(e)+s*h(e)+r*p(e);return{x:d,y:g}}static getPointOnQuadraticBezier(e,t,r,i,s,o,a){function l(p){return p*p}function c(p){return 2*p*(1-p)}function u(p){return(1-p)*(1-p)}var f=o*l(e)+i*c(e)+t*u(e),h=a*l(e)+s*c(e)+r*u(e);return{x:f,y:h}}static getPointOnEllipticalArc(e,t,r,i,s,o){var a=Math.cos(o),l=Math.sin(o),c={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(c.x*a-c.y*l),y:t+(c.x*l+c.y*a)}}static parsePathData(e){if(!e)return[];var t=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)t=t.replace(new RegExp(r[i],"g"),"|"+r[i]);var s=t.split("|"),o=[],a=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(i=1;i<s.length;i++){var h=s[i],p=h.charAt(0);for(h=h.slice(1),a.length=0;f=u.exec(h);)a.push(f[0]);for(var d=[],g=0,m=a.length;g<m;g++){if(a[g]==="00"){d.push(0,0);continue}var y=parseFloat(a[g]);isNaN(y)?d.push(0):d.push(y)}for(;d.length>0&&!isNaN(d[0]);){var w=null,b=[],v=l,S=c,_,k,M,E,F,j,L,V,ue,ke;switch(p){case"l":l+=d.shift(),c+=d.shift(),w="L",b.push(l,c);break;case"L":l=d.shift(),c=d.shift(),b.push(l,c);break;case"m":var re=d.shift(),le=d.shift();if(l+=re,c+=le,w="M",o.length>2&&o[o.length-1].command==="z"){for(var ce=o.length-2;ce>=0;ce--)if(o[ce].command==="M"){l=o[ce].points[0]+re,c=o[ce].points[1]+le;break}}b.push(l,c),p="l";break;case"M":l=d.shift(),c=d.shift(),w="M",b.push(l,c),p="L";break;case"h":l+=d.shift(),w="L",b.push(l,c);break;case"H":l=d.shift(),w="L",b.push(l,c);break;case"v":c+=d.shift(),w="L",b.push(l,c);break;case"V":c=d.shift(),w="L",b.push(l,c);break;case"C":b.push(d.shift(),d.shift(),d.shift(),d.shift()),l=d.shift(),c=d.shift(),b.push(l,c);break;case"c":b.push(l+d.shift(),c+d.shift(),l+d.shift(),c+d.shift()),l+=d.shift(),c+=d.shift(),w="C",b.push(l,c);break;case"S":k=l,M=c,_=o[o.length-1],_.command==="C"&&(k=l+(l-_.points[2]),M=c+(c-_.points[3])),b.push(k,M,d.shift(),d.shift()),l=d.shift(),c=d.shift(),w="C",b.push(l,c);break;case"s":k=l,M=c,_=o[o.length-1],_.command==="C"&&(k=l+(l-_.points[2]),M=c+(c-_.points[3])),b.push(k,M,l+d.shift(),c+d.shift()),l+=d.shift(),c+=d.shift(),w="C",b.push(l,c);break;case"Q":b.push(d.shift(),d.shift()),l=d.shift(),c=d.shift(),b.push(l,c);break;case"q":b.push(l+d.shift(),c+d.shift()),l+=d.shift(),c+=d.shift(),w="Q",b.push(l,c);break;case"T":k=l,M=c,_=o[o.length-1],_.command==="Q"&&(k=l+(l-_.points[0]),M=c+(c-_.points[1])),l=d.shift(),c=d.shift(),w="Q",b.push(k,M,l,c);break;case"t":k=l,M=c,_=o[o.length-1],_.command==="Q"&&(k=l+(l-_.points[0]),M=c+(c-_.points[1])),l+=d.shift(),c+=d.shift(),w="Q",b.push(k,M,l,c);break;case"A":E=d.shift(),F=d.shift(),j=d.shift(),L=d.shift(),V=d.shift(),ue=l,ke=c,l=d.shift(),c=d.shift(),w="A",b=this.convertEndpointToCenterParameterization(ue,ke,l,c,L,V,E,F,j);break;case"a":E=d.shift(),F=d.shift(),j=d.shift(),L=d.shift(),V=d.shift(),ue=l,ke=c,l+=d.shift(),c+=d.shift(),w="A",b=this.convertEndpointToCenterParameterization(ue,ke,l,c,L,V,E,F,j);break}o.push({command:w||p,points:b,start:{x:v,y:S},pathLength:this.calcLength(v,S,w||p,b)})}(p==="z"||p==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,t,r,i){var s,o,a,l,c=Qe;switch(r){case"L":return c.getLineLength(e,t,i[0],i[1]);case"C":for(s=0,o=c.getPointOnCubicBezier(0,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)a=c.getPointOnCubicBezier(l,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"Q":for(s=0,o=c.getPointOnQuadraticBezier(0,e,t,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)a=c.getPointOnQuadraticBezier(l,e,t,i[0],i[1],i[2],i[3]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"A":s=0;var u=i[4],f=i[5],h=i[4]+f,p=Math.PI/180;if(Math.abs(u-h)<p&&(p=Math.abs(u-h)),o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),f<0)for(l=u-p;l>h;l-=p)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=u+p;l<h;l+=p)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),s}return 0}static convertEndpointToCenterParameterization(e,t,r,i,s,o,a,l,c){var u=c*(Math.PI/180),f=Math.cos(u)*(e-r)/2+Math.sin(u)*(t-i)/2,h=-1*Math.sin(u)*(e-r)/2+Math.cos(u)*(t-i)/2,p=f*f/(a*a)+h*h/(l*l);p>1&&(a*=Math.sqrt(p),l*=Math.sqrt(p));var d=Math.sqrt((a*a*(l*l)-a*a*(h*h)-l*l*(f*f))/(a*a*(h*h)+l*l*(f*f)));s===o&&(d*=-1),isNaN(d)&&(d=0);var g=d*a*h/l,m=d*-l*f/a,y=(e+r)/2+Math.cos(u)*g-Math.sin(u)*m,w=(t+i)/2+Math.sin(u)*g+Math.cos(u)*m,b=function(F){return Math.sqrt(F[0]*F[0]+F[1]*F[1])},v=function(F,j){return(F[0]*j[0]+F[1]*j[1])/(b(F)*b(j))},S=function(F,j){return(F[0]*j[1]<F[1]*j[0]?-1:1)*Math.acos(v(F,j))},_=S([1,0],[(f-g)/a,(h-m)/l]),k=[(f-g)/a,(h-m)/l],M=[(-1*f-g)/a,(-1*h-m)/l],E=S(k,M);return v(k,M)<=-1&&(E=Math.PI),v(k,M)>=1&&(E=0),o===0&&E>0&&(E=E-2*Math.PI),o===1&&E<0&&(E=E+2*Math.PI),[y,w,a,l,_,E,u,o]}}Qe.prototype.className="Path";Qe.prototype._attrsAffectingSize=["data"];ht(Qe);T.addGetterSetter(Qe,"data");class Ds extends Vr{_sceneFunc(e){super._sceneFunc(e);var t=Math.PI*2,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var o=this.pointerLength(),a=r.length,l,c;if(s){const h=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],p=Qe.calcLength(i[i.length-4],i[i.length-3],"C",h),d=Qe.getPointOnQuadraticBezier(Math.min(1,1-o/p),h[0],h[1],h[2],h[3],h[4],h[5]);l=r[a-2]-d.x,c=r[a-1]-d.y}else l=r[a-2]-r[a-4],c=r[a-1]-r[a-3];var u=(Math.atan2(c,l)+t)%t,f=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(u),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(l=(i[0]+i[2])/2-r[0],c=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],c=r[3]-r[1]),e.rotate((Math.atan2(-c,-l)+t)%t),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+t*2,height:e.height+t*2}}}Ds.prototype.className="Arrow";ht(Ds);T.addGetterSetter(Ds,"pointerLength",10,Q());T.addGetterSetter(Ds,"pointerWidth",10,Q());T.addGetterSetter(Ds,"pointerAtBeginning",!1);T.addGetterSetter(Ds,"pointerAtEnding",!0);class zo extends X{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}zo.prototype._centroid=!0;zo.prototype.className="Circle";zo.prototype._attrsAffectingSize=["radius"];ht(zo);T.addGetterSetter(zo,"radius",0,Q());class Fi extends X{_sceneFunc(e){var t=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),t!==r&&e.scale(1,r/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Fi.prototype.className="Ellipse";Fi.prototype._centroid=!0;Fi.prototype._attrsAffectingSize=["radiusX","radiusY"];ht(Fi);T.addComponentsGetterSetter(Fi,"radius",["x","y"]);T.addGetterSetter(Fi,"radiusX",0,Q());T.addGetterSetter(Fi,"radiusY",0,Q());let Sr=class D_ extends X{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let o;if(s){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[s,this.cropX(),this.cropY(),a,l,0,0,t,r]:o=[s,0,0,t,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?R.drawRoundedRectPath(e,t,r,i):e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)),s&&(i&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var t=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?R.drawRoundedRectPath(e,t,r,i):e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width}getHeight(){var e,t;return(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height}static fromURL(e,t,r=null){var i=R.createImageElement();i.onload=function(){var s=new D_({image:i});t(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}};Sr.prototype.className="Image";ht(Sr);T.addGetterSetter(Sr,"cornerRadius",0,Np(4));T.addGetterSetter(Sr,"image");T.addComponentsGetterSetter(Sr,"crop",["x","y","width","height"]);T.addGetterSetter(Sr,"cropX",0,Q());T.addGetterSetter(Sr,"cropY",0,Q());T.addGetterSetter(Sr,"cropWidth",0,Q());T.addGetterSetter(Sr,"cropHeight",0,Q());var F_=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],$O="Change.konva",jO="none",sd="up",od="right",ad="down",ld="left",HO=F_.length;class Bp extends xo{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var t=this,r,i=function(){t._sync()};for(r=0;r<HO;r++)e.on(F_[r]+$O,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),t=this.getTag(),r,i,s,o,a,l,c;if(e&&t){switch(r=e.width(),i=e.height(),s=t.pointerDirection(),o=t.pointerWidth(),c=t.pointerHeight(),a=0,l=0,s){case sd:a=r/2,l=-1*c;break;case od:a=r+o,l=i/2;break;case ad:a=r/2,l=i+c;break;case ld:a=-1*o,l=i/2;break}t.setAttrs({x:-1*a,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*a,y:-1*l})}}}Bp.prototype.className="Label";ht(Bp);class Fs extends X{_sceneFunc(e){var t=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,c=0,u=0,f=0;typeof a=="number"?l=c=u=f=Math.min(a,t/2,r/2):(l=Math.min(a[0]||0,t/2,r/2),c=Math.min(a[1]||0,t/2,r/2),f=Math.min(a[2]||0,t/2,r/2),u=Math.min(a[3]||0,t/2,r/2)),e.beginPath(),e.moveTo(l,0),i===sd&&(e.lineTo((t-s)/2,0),e.lineTo(t/2,-1*o),e.lineTo((t+s)/2,0)),e.lineTo(t-c,0),e.arc(t-c,c,c,Math.PI*3/2,0,!1),i===od&&(e.lineTo(t,(r-o)/2),e.lineTo(t+s,r/2),e.lineTo(t,(r+o)/2)),e.lineTo(t,r-f),e.arc(t-f,r-f,f,0,Math.PI/2,!1),i===ad&&(e.lineTo((t+s)/2,r),e.lineTo(t/2,r+o),e.lineTo((t-s)/2,r)),e.lineTo(u,r),e.arc(u,r-u,u,Math.PI/2,Math.PI,!1),i===ld&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,t=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s===sd?(t-=i,a+=i):s===ad?a+=i:s===ld?(e-=r*1.5,o+=r):s===od&&(o+=r*1.5),{x:e,y:t,width:o,height:a}}}Fs.prototype.className="Tag";ht(Fs);T.addGetterSetter(Fs,"pointerDirection",jO);T.addGetterSetter(Fs,"pointerWidth",0,Q());T.addGetterSetter(Fs,"pointerHeight",0,Q());T.addGetterSetter(Fs,"cornerRadius",0,Np(4));class vl extends X{_sceneFunc(e){var t=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),t?R.drawRoundedRectPath(e,r,i,t):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}}vl.prototype.className="Rect";ht(vl);T.addGetterSetter(vl,"cornerRadius",0,Np(4));class Bs extends X{_sceneFunc(e){const t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r++)e.lineTo(t[r].x,t[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:t*Math.sin(i*2*Math.PI/e),y:-1*t*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var t=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(o=>{t=Math.min(t,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),s=Math.max(s,o.y)}),{x:t,y:i,width:r-t,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Bs.prototype.className="RegularPolygon";Bs.prototype._centroid=!0;Bs.prototype._attrsAffectingSize=["radius"];ht(Bs);T.addGetterSetter(Bs,"radius",0,Q());T.addGetterSetter(Bs,"sides",0,Q());var Dv=Math.PI*2;class $s extends X{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Dv,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Dv,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}$s.prototype.className="Ring";$s.prototype._centroid=!0;$s.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ht($s);T.addGetterSetter($s,"innerRadius",0,Q());T.addGetterSetter($s,"outerRadius",0,Q());class xr extends X{constructor(e){super(e),this._updated=!0,this.anim=new Nn(()=>{var t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var t=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[t],o=this.frameOffsets(),a=s[i+0],l=s[i+1],c=s[i+2],u=s[i+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,u),e.closePath(),e.fillStrokeShape(this)),f)if(o){var h=o[t],p=r*2;e.drawImage(f,a,l,c,u,h[p+0],h[p+1],c,u)}else e.drawImage(f,a,l,c,u,0,0,c,u)}_hitFunc(e){var t=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[t],o=this.frameOffsets(),a=s[i+2],l=s[i+3];if(e.beginPath(),o){var c=o[t],u=r*2;e.rect(c[u+0],c[u+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),t=this.animation(),r=this.animations(),i=r[t],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}xr.prototype.className="Sprite";ht(xr);T.addGetterSetter(xr,"animation");T.addGetterSetter(xr,"animations");T.addGetterSetter(xr,"frameOffsets");T.addGetterSetter(xr,"image");T.addGetterSetter(xr,"frameIndex",0,Q());T.addGetterSetter(xr,"frameRate",17,Q());T.backCompat(xr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Bi extends X{_sceneFunc(e){var t=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var s=1;s<i*2;s++){var o=s%2===0?r:t,a=o*Math.sin(s*Math.PI/i),l=-1*o*Math.cos(s*Math.PI/i);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Bi.prototype.className="Star";Bi.prototype._centroid=!0;Bi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];ht(Bi);T.addGetterSetter(Bi,"numPoints",5,Q());T.addGetterSetter(Bi,"innerRadius",0,Q());T.addGetterSetter(Bi,"outerRadius",0,Q());function B_(n){return Array.from(n)}var Ys="auto",VO="center",ta="justify",zO="Change.konva",GO="2d",Fv="-",$_="left",WO="text",UO="Text",KO="top",YO="bottom",Bv="middle",j_="normal",qO="px ",Jl=" ",XO="right",JO="word",QO="char",$v="none",Gf="",H_=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],ZO=H_.length;function eM(n){return n.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!r&&(e=`"${e}"`),e}).join(", ")}var Ql;function Wf(){return Ql||(Ql=R.createCanvasElement().getContext(GO),Ql)}function tM(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function nM(n){n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function rM(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let ut=class extends X{constructor(e){super(rM(e)),this._partialTextX=0,this._partialTextY=0;for(var t=0;t<ZO;t++)this.on(H_[t]+zO,this._setTextData);this._setTextData()}_sceneFunc(e){var t=this.textArr,r=t.length;if(this.text()){var i=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,a=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),f=this.letterSpacing(),h=this.fill(),p=this.textDecoration(),d=p.indexOf("underline")!==-1,g=p.indexOf("line-through")!==-1,m,y=0,y=o/2,w=0,b=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",Bv),e.setAttr("textAlign",$_),a===Bv?l=(this.getHeight()-r*o-i*2)/2:a===YO&&(l=this.getHeight()-r*o-i*2),e.translate(i,l+i),m=0;m<r;m++){var w=0,b=0,v=t[m],S=v.text,_=v.width,k=v.lastInParagraph,M,E,F;if(e.save(),c===XO?w+=u-_-i*2:c===VO&&(w+=(u-_-i*2)/2),d){e.save(),e.beginPath(),e.moveTo(w,y+b+Math.round(s/2)),M=S.split(" ").length-1,E=M===0,F=c===ta&&!k?u-i*2:_,e.lineTo(w+Math.round(F),y+b+Math.round(s/2)),e.lineWidth=s/15;const re=this._getLinearGradient();e.strokeStyle=re||h,e.stroke(),e.restore()}if(g){e.save(),e.beginPath(),e.moveTo(w,y+b),M=S.split(" ").length-1,E=M===0,F=c===ta&&k&&!E?u-i*2:_,e.lineTo(w+Math.round(F),y+b),e.lineWidth=s/15;const re=this._getLinearGradient();e.strokeStyle=re||h,e.stroke(),e.restore()}if(f!==0||c===ta){M=S.split(" ").length-1;for(var j=B_(S),L=0;L<j.length;L++){var V=j[L];V===" "&&!k&&c===ta&&(w+=(u-i*2-_)/M),this._partialTextX=w,this._partialTextY=y+b,this._partialText=V,e.fillStrokeShape(this),w+=this.measureSize(V).width+f}}else this._partialTextX=w,this._partialTextY=y+b,this._partialText=S,e.fillStrokeShape(this);e.restore(),r>1&&(y+=o)}}}_hitFunc(e){var t=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var t=R._isString(e)?e:e==null?"":e+"";return this._setAttr(WO,t),this}getWidth(){var e=this.attrs.width===Ys||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Ys||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return R.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t=Wf(),r=this.fontSize(),i;return t.save(),t.font=this._getContextFont(),i=t.measureText(e),t.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+Jl+this.fontVariant()+Jl+(this.fontSize()+qO)+eM(this.fontFamily())}_addTextLine(e){this.align()===ta&&(e=e.trim());var r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){var t=this.letterSpacing(),r=e.length;return Wf().measureText(e).width+(r?t*(r-1):0)}_setTextData(){var e=this.text().split(`
`),t=+this.fontSize(),r=0,i=this.lineHeight()*t,s=this.attrs.width,o=this.attrs.height,a=s!==Ys&&s!==void 0,l=o!==Ys&&o!==void 0,c=this.padding(),u=s-c*2,f=o-c*2,h=0,p=this.wrap(),d=p!==$v,g=p!==QO&&d,m=this.ellipsis();this.textArr=[],Wf().font=this._getContextFont();for(var y=m?this._getTextWidth(Gf):0,w=0,b=e.length;w<b;++w){var v=e[w],S=this._getTextWidth(v);if(a&&S>u)for(;v.length>0;){for(var _=0,k=v.length,M="",E=0;_<k;){var F=_+k>>>1,j=v.slice(0,F+1),L=this._getTextWidth(j)+y;L<=u?(_=F+1,M=j,E=L):k=F}if(M){if(g){var V,ue=v[M.length],ke=ue===Jl||ue===Fv;ke&&E<=u?V=M.length:V=Math.max(M.lastIndexOf(Jl),M.lastIndexOf(Fv))+1,V>0&&(_=V,M=M.slice(0,_),E=this._getTextWidth(M))}M=M.trimRight(),this._addTextLine(M),r=Math.max(r,E),h+=i;var re=this._shouldHandleEllipsis(h);if(re){this._tryToAddEllipsisToLastLine();break}if(v=v.slice(_),v=v.trimLeft(),v.length>0&&(S=this._getTextWidth(v),S<=u)){this._addTextLine(v),h+=i,r=Math.max(r,S);break}}else break}else this._addTextLine(v),h+=i,r=Math.max(r,S),this._shouldHandleEllipsis(h)&&w<b-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&h+i>f)break}this.textHeight=t,this.textWidth=r}_shouldHandleEllipsis(e){var t=+this.fontSize(),r=this.lineHeight()*t,i=this.attrs.height,s=i!==Ys&&i!==void 0,o=this.padding(),a=i-o*2,l=this.wrap(),c=l!==$v;return!c||s&&e+r>a}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,t=e!==Ys&&e!==void 0,r=this.padding(),i=e-r*2,s=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!s)){if(t){var a=this._getTextWidth(o.text+Gf)<i;a||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+Gf)}}getStrokeScaleEnabled(){return!0}};ut.prototype._fillFunc=tM;ut.prototype._strokeFunc=nM;ut.prototype.className=UO;ut.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];ht(ut);T.overWriteSetter(ut,"width",Rp());T.overWriteSetter(ut,"height",Rp());T.addGetterSetter(ut,"fontFamily","Arial");T.addGetterSetter(ut,"fontSize",12,Q());T.addGetterSetter(ut,"fontStyle",j_);T.addGetterSetter(ut,"fontVariant",j_);T.addGetterSetter(ut,"padding",0,Q());T.addGetterSetter(ut,"align",$_);T.addGetterSetter(ut,"verticalAlign",KO);T.addGetterSetter(ut,"lineHeight",1,Q());T.addGetterSetter(ut,"wrap",JO);T.addGetterSetter(ut,"ellipsis",!1,rr());T.addGetterSetter(ut,"letterSpacing",0,Q());T.addGetterSetter(ut,"text","",Vo());T.addGetterSetter(ut,"textDecoration","");var iM="",V_="normal";function z_(n){n.fillText(this.partialText,0,0)}function G_(n){n.strokeText(this.partialText,0,0)}class Et extends X{constructor(e){super(e),this.dummyCanvas=R.createCanvasElement(),this.dataArray=[],this.dataArray=Qe.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=Qe.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;t==="underline"&&e.beginPath();for(var o=0;o<s.length;o++){e.save();var a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),t==="underline"&&(o===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}t==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var r=t[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<t.length;i++){var s=t[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return R.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return ut.prototype.setText.call(this,e)}_getContextFont(){return ut.prototype._getContextFont.call(this)}_getTextSize(e){var t=this.dummyCanvas,r=t.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,t=this._getTextSize(this.attrs.text),r=this.letterSpacing(),i=this.align(),s=this.kerningFunc();this.textWidth=t.width,this.textHeight=t.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var a=0,l=0;l<e.dataArray.length;l++)e.dataArray[l].pathLength>0&&(a+=e.dataArray[l].pathLength);var c=0;i==="center"&&(c=Math.max(0,a/2-o/2)),i==="right"&&(c=Math.max(0,a-o));for(var u=B_(this.text()),f=this.text().split(" ").length-1,h,p,d,g=-1,m=0,y=function(){m=0;for(var L=e.dataArray,V=g+1;V<L.length;V++){if(L[V].pathLength>0)return g=V,L[V];L[V].command==="M"&&(h={x:L[V].points[0],y:L[V].points[1]})}return{}},w=function(L){var V=e._getTextSize(L).width+r;L===" "&&i==="justify"&&(V+=(a-o)/f);var ue=0,ke=0;for(p=void 0;Math.abs(V-ue)/V>.01&&ke<20;){ke++;for(var re=ue;d===void 0;)d=y(),d&&re+d.pathLength<V&&(re+=d.pathLength,d=void 0);if(Object.keys(d).length===0||h===void 0)return;var le=!1;switch(d.command){case"L":Qe.getLineLength(h.x,h.y,d.points[0],d.points[1])>V?p=Qe.getPointOnLine(V,h.x,h.y,d.points[0],d.points[1],h.x,h.y):d=void 0;break;case"A":var ce=d.points[4],Re=d.points[5],me=d.points[4]+Re;m===0?m=ce+1e-8:V>ue?m+=Math.PI/180*Re/Math.abs(Re):m-=Math.PI/360*Re/Math.abs(Re),(Re<0&&m<me||Re>=0&&m>me)&&(m=me,le=!0),p=Qe.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],m,d.points[6]);break;case"C":m===0?V>d.pathLength?m=1e-8:m=V/d.pathLength:V>ue?m+=(V-ue)/d.pathLength/2:m=Math.max(m-(ue-V)/d.pathLength/2,0),m>1&&(m=1,le=!0),p=Qe.getPointOnCubicBezier(m,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":m===0?m=V/d.pathLength:V>ue?m+=(V-ue)/d.pathLength:m-=(ue-V)/d.pathLength,m>1&&(m=1,le=!0),p=Qe.getPointOnQuadraticBezier(m,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3]);break}p!==void 0&&(ue=Qe.getLineLength(h.x,h.y,p.x,p.y)),le&&(le=!1,d=void 0)}},b="C",v=e._getTextSize(b).width+r,S=c/v-1,_=0;_<S&&(w(b),!(h===void 0||p===void 0));_++)h=p;for(var k=0;k<u.length&&(w(u[k]),!(h===void 0||p===void 0));k++){var M=Qe.getLineLength(h.x,h.y,p.x,p.y),E=0;if(s)try{E=s(u[k-1],u[k])*this.fontSize()}catch{E=0}h.x+=E,p.x+=E,this.textWidth+=E;var F=Qe.getPointOnLine(E+M/2,h.x,h.y,p.x,p.y),j=Math.atan2(p.y-h.y,p.x-h.x);this.glyphInfo.push({transposeX:F.x,transposeY:F.y,text:u[k],rotation:j,p0:h,p1:p}),h=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(u){e.push(u.p0.x),e.push(u.p0.y),e.push(u.p1.x),e.push(u.p1.y)});for(var t=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],t=Math.min(t,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);var c=this.fontSize();return{x:t-c/2,y:i-c/2,width:r-t+c,height:s-i+c}}destroy(){return R.releaseCanvas(this.dummyCanvas),super.destroy()}}Et.prototype._fillFunc=z_;Et.prototype._strokeFunc=G_;Et.prototype._fillFuncHit=z_;Et.prototype._strokeFuncHit=G_;Et.prototype.className="TextPath";Et.prototype._attrsAffectingSize=["text","fontSize","data"];ht(Et);T.addGetterSetter(Et,"data");T.addGetterSetter(Et,"fontFamily","Arial");T.addGetterSetter(Et,"fontSize",12,Q());T.addGetterSetter(Et,"fontStyle",V_);T.addGetterSetter(Et,"align","left");T.addGetterSetter(Et,"letterSpacing",0,Q());T.addGetterSetter(Et,"textBaseline","middle");T.addGetterSetter(Et,"fontVariant",V_);T.addGetterSetter(Et,"text",iM);T.addGetterSetter(Et,"textDecoration",null);T.addGetterSetter(Et,"kerningFunc",null);var W_="tr-konva",sM=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(n=>n+`.${W_}`).join(" "),jv="nodesRect",oM=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],aM={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const lM="ontouchstart"in fe._global;function cM(n,e){if(n==="rotater")return"crosshair";e+=R.degToRad(aM[n]||0);var t=(R.radToDeg(e)%360+360)%360;return R._inRange(t,315+22.5,360)||R._inRange(t,0,22.5)?"ns-resize":R._inRange(t,45-22.5,45+22.5)?"nesw-resize":R._inRange(t,90-22.5,90+22.5)?"ew-resize":R._inRange(t,135-22.5,135+22.5)?"nwse-resize":R._inRange(t,180-22.5,180+22.5)?"ns-resize":R._inRange(t,225-22.5,225+22.5)?"nesw-resize":R._inRange(t,270-22.5,270+22.5)?"ew-resize":R._inRange(t,315-22.5,315+22.5)?"nwse-resize":(R.error("Transformer has unknown angle for cursor detection: "+t),"pointer")}var Qc=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Hv=1e8;function uM(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function U_(n,e,t){const r=t.x+(n.x-t.x)*Math.cos(e)-(n.y-t.y)*Math.sin(e),i=t.y+(n.x-t.x)*Math.sin(e)+(n.y-t.y)*Math.cos(e);return Object.assign(Object.assign({},n),{rotation:n.rotation+e,x:r,y:i})}function fM(n,e){const t=uM(n);return U_(n,e,t)}function hM(n,e,t){let r=e;for(let i=0;i<n.length;i++){const s=fe.getAngle(n[i]),o=Math.abs(s-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<t&&(r=s)}return r}class qe extends xo{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(sM,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return R.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return W_+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(i=>i.isAncestorOf(this)?(R.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},o=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(o,s),i.on(oM.map(a=>a+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,r=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!t)return;const i=e.getAbsolutePosition(),s=i.x-t.x,o=i.y-t.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+s,y:l.y+o}),a.startDrag(r)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(jv),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(jv,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=i.x*s.x-e.offsetX()*s.x,l=i.y*s.y-e.offsetY()*s.y;const c=(fe.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:o.x+a*Math.cos(c)+l*Math.sin(-c),y:o.y+l*Math.cos(c)+a*Math.sin(c),width:i.width*s.x,height:i.height*s.y,rotation:c};return U_(u,-fe.getAngle(t),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-Hv,y:-Hv,width:0,height:0,rotation:0};const t=[];this.nodes().map(c=>{const u=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],h=c.getAbsoluteTransform();f.forEach(function(p){var d=h.point(p);t.push(d)})});const r=new Yn;r.rotate(-fe.getAngle(this.rotation()));var i,s,o,a;t.forEach(function(c){var u=r.point(c);i===void 0&&(i=o=u.x,s=a=u.y),i=Math.min(i,u.x),s=Math.min(s,u.y),o=Math.max(o,u.x),a=Math.max(a,u.y)}),r.invert();const l=r.point({x:i,y:s});return{x:l.x,y:l.y,width:o-i,height:a-s,rotation:fe.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Qc.forEach((function(e){this._createAnchor(e)}).bind(this)),this._createAnchor("rotater")}_createAnchor(e){var t=new vl({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:lM?10:"auto"}),r=this;t.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),t.on("dragstart",i=>{t.stopDrag(),i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),t.on("mouseenter",()=>{var i=fe.getAngle(this.rotation()),s=cM(e,i);t.getStage().content&&(t.getStage().content.style.cursor=s),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){var e=new X({name:"back",width:0,height:0,draggable:!0,sceneFunc(t){var r=this.getParent(),i=r.padding();t.beginPath(),t.rect(-i,-i,this.width()+i*2,this.height()+i*2),t.moveTo(this.width()/2,-i),r.rotateEnabled()&&t.lineTo(this.width()/2,-r.rotateAnchorOffset()*R._sign(this.height())-i),t.fillStrokeShape(this)},hitFunc:(t,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();t.beginPath(),t.rect(-i,-i,r.width()+i*2,r.height()+i*2),t.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var t=this._getNodeRect(),r=t.width,i=t.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){var t,r,i,s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),s.setAbsolutePosition(l);const u=s.getAbsolutePosition();if(!(c.x===u.x&&c.y===u.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();t=s.x()-f.width/2,r=-s.y()+f.height/2;let L=Math.atan2(-r,t)+Math.PI/2;f.height<0&&(L-=Math.PI);var h=fe.getAngle(this.rotation());const V=h+L,ue=fe.getAngle(this.rotationSnapTolerance()),re=hM(this.rotationSnaps(),V,ue)-f.rotation,le=fM(f,re);this._fitNodesInto(le,e);return}var p=this.keepRatio()||e.shiftKey,w=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(p){var d=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(d.y-s.y(),2));var g=this.findOne(".top-left").x()>d.x?-1:1,m=this.findOne(".top-left").y()>d.y?-1:1;t=i*this.cos*g,r=i*this.sin*m,this.findOne(".top-left").x(d.x-t),this.findOne(".top-left").y(d.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(p){var d=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(d.y-s.y(),2));var g=this.findOne(".top-right").x()<d.x?-1:1,m=this.findOne(".top-right").y()>d.y?-1:1;t=i*this.cos*g,r=i*this.sin*m,this.findOne(".top-right").x(d.x+t),this.findOne(".top-right").y(d.y-r)}var y=s.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(p){var d=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(s.y()-d.y,2));var g=d.x<s.x()?-1:1,m=s.y()<d.y?-1:1;t=i*this.cos*g,r=i*this.sin*m,s.x(d.x-t),s.y(d.y+r)}y=s.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(p){var d=w?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(s.y()-d.y,2));var g=this.findOne(".bottom-right").x()<d.x?-1:1,m=this.findOne(".bottom-right").y()<d.y?-1:1;t=i*this.cos*g,r=i*this.sin*m,this.findOne(".bottom-right").x(d.x+t),this.findOne(".bottom-right").y(d.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var w=this.centeredScaling()||e.altKey;if(w){var b=this.findOne(".top-left"),v=this.findOne(".bottom-right"),S=b.x(),_=b.y(),k=this.getWidth()-v.x(),M=this.getHeight()-v.y();v.move({x:-S,y:-_}),b.move({x:k,y:M})}var E=this.findOne(".top-left").getAbsolutePosition();t=E.x,r=E.y;var F=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),j=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:r,width:F,height:j,rotation:fe.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var t=this.getNode();this._fire("transformend",{evt:e,target:t}),t&&this._nodes.forEach(r=>{r._fire("transformend",{evt:e,target:r})}),this._movingAnchorName=null}}_fitNodesInto(e,t){var r=this._getNodeRect();const i=1;if(R._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(R._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=this.flipEnabled();var o=new Yn;if(o.rotate(fe.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=o.point({x:-this.padding()*2,y:0});if(e.x+=f.x,e.y+=f.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,!s){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=o.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=o.point({x:0,y:-this.padding()*2});if(e.x+=f.x,e.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=o.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,e);f?e=f:R.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,l=new Yn;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/a,r.height/a);const c=new Yn;c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(e.width/a,e.height/a);const u=c.multiply(l.invert());this._nodes.forEach(f=>{var h;const p=f.getParent().getAbsoluteTransform(),d=f.getTransform().copy();d.translate(f.offsetX(),f.offsetY());const g=new Yn;g.multiply(p.copy().invert()).multiply(u).multiply(p).multiply(d);const m=g.decompose();f.setAttrs(m),this._fire("transform",{evt:t,target:f}),f._fire("transform",{evt:t,target:f}),(h=f.getLayer())===null||h===void 0||h.batchDraw()}),this.rotation(R._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e,t=this._getNodeRect();this.rotation(R._getRotation(t.rotation));var r=t.width,i=t.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(c=>{c.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*R._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),xo.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return ee.prototype.toObject.call(this)}clone(e){var t=ee.prototype.clone.call(this,e);return t}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function dM(n){return n instanceof Array||R.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(e){Qc.indexOf(e)===-1&&R.warn("Unknown anchor name: "+e+". Available names are: "+Qc.join(", "))}),n||[]}qe.prototype.className="Transformer";ht(qe);T.addGetterSetter(qe,"enabledAnchors",Qc,dM);T.addGetterSetter(qe,"flipEnabled",!0,rr());T.addGetterSetter(qe,"resizeEnabled",!0);T.addGetterSetter(qe,"anchorSize",10,Q());T.addGetterSetter(qe,"rotateEnabled",!0);T.addGetterSetter(qe,"rotationSnaps",[]);T.addGetterSetter(qe,"rotateAnchorOffset",50,Q());T.addGetterSetter(qe,"rotationSnapTolerance",5,Q());T.addGetterSetter(qe,"borderEnabled",!0);T.addGetterSetter(qe,"anchorStroke","rgb(0, 161, 255)");T.addGetterSetter(qe,"anchorStrokeWidth",1,Q());T.addGetterSetter(qe,"anchorFill","white");T.addGetterSetter(qe,"anchorCornerRadius",0,Q());T.addGetterSetter(qe,"borderStroke","rgb(0, 161, 255)");T.addGetterSetter(qe,"borderStrokeWidth",1,Q());T.addGetterSetter(qe,"borderDash");T.addGetterSetter(qe,"keepRatio",!0);T.addGetterSetter(qe,"centeredScaling",!1);T.addGetterSetter(qe,"ignoreStroke",!1);T.addGetterSetter(qe,"padding",0,Q());T.addGetterSetter(qe,"node");T.addGetterSetter(qe,"nodes");T.addGetterSetter(qe,"boundBoxFunc");T.addGetterSetter(qe,"anchorDragBoundFunc");T.addGetterSetter(qe,"shouldOverdrawWholeArea",!1);T.addGetterSetter(qe,"useSingleNodeRotation",!0);T.backCompat(qe,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class zr extends X{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,fe.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}zr.prototype.className="Wedge";zr.prototype._centroid=!0;zr.prototype._attrsAffectingSize=["radius"];ht(zr);T.addGetterSetter(zr,"radius",0,Q());T.addGetterSetter(zr,"angle",0,Q());T.addGetterSetter(zr,"clockwise",!1);T.backCompat(zr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Vv(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var pM=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],mM=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function gM(n,e){var t=n.data,r=n.width,i=n.height,s,o,a,l,c,u,f,h,p,d,g,m,y,w,b,v,S,_,k,M,E,F,j,L,V=e+e+1,ue=r-1,ke=i-1,re=e+1,le=re*(re+1)/2,ce=new Vv,Re=null,me=ce,Ce=null,Ae=null,Je=pM[e],Ye=mM[e];for(a=1;a<V;a++)me=me.next=new Vv,a===re&&(Re=me);for(me.next=ce,f=u=0,o=0;o<i;o++){for(v=S=_=k=h=p=d=g=0,m=re*(M=t[u]),y=re*(E=t[u+1]),w=re*(F=t[u+2]),b=re*(j=t[u+3]),h+=le*M,p+=le*E,d+=le*F,g+=le*j,me=ce,a=0;a<re;a++)me.r=M,me.g=E,me.b=F,me.a=j,me=me.next;for(a=1;a<re;a++)l=u+((ue<a?ue:a)<<2),h+=(me.r=M=t[l])*(L=re-a),p+=(me.g=E=t[l+1])*L,d+=(me.b=F=t[l+2])*L,g+=(me.a=j=t[l+3])*L,v+=M,S+=E,_+=F,k+=j,me=me.next;for(Ce=ce,Ae=Re,s=0;s<r;s++)t[u+3]=j=g*Je>>Ye,j!==0?(j=255/j,t[u]=(h*Je>>Ye)*j,t[u+1]=(p*Je>>Ye)*j,t[u+2]=(d*Je>>Ye)*j):t[u]=t[u+1]=t[u+2]=0,h-=m,p-=y,d-=w,g-=b,m-=Ce.r,y-=Ce.g,w-=Ce.b,b-=Ce.a,l=f+((l=s+e+1)<ue?l:ue)<<2,v+=Ce.r=t[l],S+=Ce.g=t[l+1],_+=Ce.b=t[l+2],k+=Ce.a=t[l+3],h+=v,p+=S,d+=_,g+=k,Ce=Ce.next,m+=M=Ae.r,y+=E=Ae.g,w+=F=Ae.b,b+=j=Ae.a,v-=M,S-=E,_-=F,k-=j,Ae=Ae.next,u+=4;f+=r}for(s=0;s<r;s++){for(S=_=k=v=p=d=g=h=0,u=s<<2,m=re*(M=t[u]),y=re*(E=t[u+1]),w=re*(F=t[u+2]),b=re*(j=t[u+3]),h+=le*M,p+=le*E,d+=le*F,g+=le*j,me=ce,a=0;a<re;a++)me.r=M,me.g=E,me.b=F,me.a=j,me=me.next;for(c=r,a=1;a<=e;a++)u=c+s<<2,h+=(me.r=M=t[u])*(L=re-a),p+=(me.g=E=t[u+1])*L,d+=(me.b=F=t[u+2])*L,g+=(me.a=j=t[u+3])*L,v+=M,S+=E,_+=F,k+=j,me=me.next,a<ke&&(c+=r);for(u=s,Ce=ce,Ae=Re,o=0;o<i;o++)l=u<<2,t[l+3]=j=g*Je>>Ye,j>0?(j=255/j,t[l]=(h*Je>>Ye)*j,t[l+1]=(p*Je>>Ye)*j,t[l+2]=(d*Je>>Ye)*j):t[l]=t[l+1]=t[l+2]=0,h-=m,p-=y,d-=w,g-=b,m-=Ce.r,y-=Ce.g,w-=Ce.b,b-=Ce.a,l=s+((l=o+re)<ke?l:ke)*r<<2,h+=v+=Ce.r=t[l],p+=S+=Ce.g=t[l+1],d+=_+=Ce.b=t[l+2],g+=k+=Ce.a=t[l+3],Ce=Ce.next,m+=M=Ae.r,y+=E=Ae.g,w+=F=Ae.b,b+=j=Ae.a,v-=M,S-=E,_-=F,k-=j,Ae=Ae.next,u+=r}}const vM=function(e){var t=Math.round(this.blurRadius());t>0&&gM(e,t)};T.addGetterSetter(ee,"blurRadius",0,Q(),T.afterSetFilter);const yM=function(n){var e=this.brightness()*255,t=n.data,r=t.length,i;for(i=0;i<r;i+=4)t[i]+=e,t[i+1]+=e,t[i+2]+=e};T.addGetterSetter(ee,"brightness",0,Q(),T.afterSetFilter);const bM=function(n){var e=Math.pow((this.contrast()+100)/100,2),t=n.data,r=t.length,i=150,s=150,o=150,a;for(a=0;a<r;a+=4)i=t[a],s=t[a+1],o=t[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,t[a]=i,t[a+1]=s,t[a+2]=o};T.addGetterSetter(ee,"contrast",0,Q(),T.afterSetFilter);const _M=function(n){var e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,a=n.data,l=n.width,c=n.height,u=l*4,f=c;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:R.error("Unknown emboss direction: "+r)}do{var h=(f-1)*u,p=s;f+p<1&&(p=0),f+p>c&&(p=0);var d=(f-1+p)*l*4,g=l;do{var m=h+(g-1)*4,y=o;g+y<1&&(y=0),g+y>l&&(y=0);var w=d+(g-1+y)*4,b=a[m]-a[w],v=a[m+1]-a[w+1],S=a[m+2]-a[w+2],_=b,k=_>0?_:-_,M=v>0?v:-v,E=S>0?S:-S;if(M>k&&(_=v),E>k&&(_=S),_*=e,i){var F=a[m]+_,j=a[m+1]+_,L=a[m+2]+_;a[m]=F>255?255:F<0?0:F,a[m+1]=j>255?255:j<0?0:j,a[m+2]=L>255?255:L<0?0:L}else{var V=t-_;V<0?V=0:V>255&&(V=255),a[m]=a[m+1]=a[m+2]=V}}while(--g)}while(--f)};T.addGetterSetter(ee,"embossStrength",.5,Q(),T.afterSetFilter);T.addGetterSetter(ee,"embossWhiteLevel",.5,Q(),T.afterSetFilter);T.addGetterSetter(ee,"embossDirection","top-left",null,T.afterSetFilter);T.addGetterSetter(ee,"embossBlend",!1,null,T.afterSetFilter);function Uf(n,e,t,r,i){var s=t-e,o=i-r,a;return s===0?r+o/2:o===0?r:(a=(n-e)/s,a=o*a+r,a)}const wM=function(n){var e=n.data,t=e.length,r=e[0],i=r,s,o=e[1],a=o,l,c=e[2],u=c,f,h,p=this.enhance();if(p!==0){for(h=0;h<t;h+=4)s=e[h+0],s<r?r=s:s>i&&(i=s),l=e[h+1],l<o?o=l:l>a&&(a=l),f=e[h+2],f<c?c=f:f>u&&(u=f);i===r&&(i=255,r=0),a===o&&(a=255,o=0),u===c&&(u=255,c=0);var d,g,m,y,w,b,v,S,_;for(p>0?(g=i+p*(255-i),m=r-p*(r-0),w=a+p*(255-a),b=o-p*(o-0),S=u+p*(255-u),_=c-p*(c-0)):(d=(i+r)*.5,g=i+p*(i-d),m=r+p*(r-d),y=(a+o)*.5,w=a+p*(a-y),b=o+p*(o-y),v=(u+c)*.5,S=u+p*(u-v),_=c+p*(c-v)),h=0;h<t;h+=4)e[h+0]=Uf(e[h+0],r,i,m,g),e[h+1]=Uf(e[h+1],o,a,b,w),e[h+2]=Uf(e[h+2],c,u,_,S)}};T.addGetterSetter(ee,"enhance",0,Q(),T.afterSetFilter);const CM=function(n){var e=n.data,t=e.length,r,i;for(r=0;r<t;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};T.addGetterSetter(ee,"hue",0,Q(),T.afterSetFilter);T.addGetterSetter(ee,"saturation",0,Q(),T.afterSetFilter);T.addGetterSetter(ee,"luminance",0,Q(),T.afterSetFilter);const SM=function(n){var e=n.data,t=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a,l=r*i*Math.cos(s*Math.PI/180),c=r*i*Math.sin(s*Math.PI/180),u=.299*r+.701*l+.167*c,f=.587*r-.587*l+.33*c,h=.114*r-.114*l-.497*c,p=.299*r-.299*l-.328*c,d=.587*r+.413*l+.035*c,g=.114*r-.114*l+.293*c,m=.299*r-.3*l+1.25*c,y=.587*r-.586*l-1.05*c,w=.114*r+.886*l-.2*c,b,v,S,_;for(a=0;a<t;a+=4)b=e[a+0],v=e[a+1],S=e[a+2],_=e[a+3],e[a+0]=u*b+f*v+h*S+o,e[a+1]=p*b+d*v+g*S+o,e[a+2]=m*b+y*v+w*S+o,e[a+3]=_},xM=function(n){var e=n.data,t=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o,a=r*i*Math.cos(s*Math.PI/180),l=r*i*Math.sin(s*Math.PI/180),c=.299*r+.701*a+.167*l,u=.587*r-.587*a+.33*l,f=.114*r-.114*a-.497*l,h=.299*r-.299*a-.328*l,p=.587*r+.413*a+.035*l,d=.114*r-.114*a+.293*l,g=.299*r-.3*a+1.25*l,m=.587*r-.586*a-1.05*l,y=.114*r+.886*a-.2*l,w,b,v,S;for(o=0;o<t;o+=4)w=e[o+0],b=e[o+1],v=e[o+2],S=e[o+3],e[o+0]=c*w+u*b+f*v,e[o+1]=h*w+p*b+d*v,e[o+2]=g*w+m*b+y*v,e[o+3]=S};T.addGetterSetter(ee,"hue",0,Q(),T.afterSetFilter);T.addGetterSetter(ee,"saturation",0,Q(),T.afterSetFilter);T.addGetterSetter(ee,"value",0,Q(),T.afterSetFilter);const AM=function(n){var e=n.data,t=e.length,r;for(r=0;r<t;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};var kM=function(n,e,t){var r=n.data,i=e.data,s=n.width,o=n.height,a=t.polarCenterX||s/2,l=t.polarCenterY||o/2,c,u,f,h=0,p=0,d=0,g=0,m,y=Math.sqrt(a*a+l*l);u=s-a,f=o-l,m=Math.sqrt(u*u+f*f),y=m>y?m:y;var w=o,b=s,v,S,_=360/b*Math.PI/180,k,M;for(S=0;S<b;S+=1)for(k=Math.sin(S*_),M=Math.cos(S*_),v=0;v<w;v+=1)u=Math.floor(a+y*v/w*M),f=Math.floor(l+y*v/w*k),c=(f*s+u)*4,h=r[c+0],p=r[c+1],d=r[c+2],g=r[c+3],c=(S+v*s)*4,i[c+0]=h,i[c+1]=p,i[c+2]=d,i[c+3]=g},EM=function(n,e,t){var r=n.data,i=e.data,s=n.width,o=n.height,a=t.polarCenterX||s/2,l=t.polarCenterY||o/2,c,u,f,h,p,d=0,g=0,m=0,y=0,w,b=Math.sqrt(a*a+l*l);u=s-a,f=o-l,w=Math.sqrt(u*u+f*f),b=w>b?w:b;var v=o,S=s,_,k,M=0,E,F;for(u=0;u<s;u+=1)for(f=0;f<o;f+=1)h=u-a,p=f-l,_=Math.sqrt(h*h+p*p)*v/b,k=(Math.atan2(p,h)*180/Math.PI+360+M)%360,k=k*S/360,E=Math.floor(k),F=Math.floor(_),c=(F*s+E)*4,d=r[c+0],g=r[c+1],m=r[c+2],y=r[c+3],c=(f*s+u)*4,i[c+0]=d,i[c+1]=g,i[c+2]=m,i[c+3]=y};const TM=function(n){var e=n.width,t=n.height,r,i,s,o,a,l,c,u,f,h,p=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),g=Math.floor(e*(d%360)/360);if(!(p<1)){var m=R.createCanvasElement();m.width=e,m.height=t;var y=m.getContext("2d").getImageData(0,0,e,t);R.releaseCanvas(m),kM(n,y,{polarCenterX:e/2,polarCenterY:t/2});for(var w=e/Math.pow(2,p);w<=8;)w=w*2,p-=1;w=Math.ceil(w);var b=w,v=0,S=b,_=1;for(g+w>e&&(v=b,S=0,_=-1),i=0;i<t;i+=1)for(r=v;r!==S;r+=_)s=Math.round(r+g)%e,f=(e*i+s)*4,a=y.data[f+0],l=y.data[f+1],c=y.data[f+2],u=y.data[f+3],h=(e*i+r)*4,y.data[h+0]=a,y.data[h+1]=l,y.data[h+2]=c,y.data[h+3]=u;for(i=0;i<t;i+=1)for(b=Math.floor(w),o=0;o<p;o+=1){for(r=0;r<b+1;r+=1)f=(e*i+r)*4,a=y.data[f+0],l=y.data[f+1],c=y.data[f+2],u=y.data[f+3],h=(e*i+b*2-r-1)*4,y.data[h+0]=a,y.data[h+1]=l,y.data[h+2]=c,y.data[h+3]=u;b*=2}EM(y,n,{polarRotation:0})}};T.addGetterSetter(ee,"kaleidoscopePower",2,Q(),T.afterSetFilter);T.addGetterSetter(ee,"kaleidoscopeAngle",0,Q(),T.afterSetFilter);function Zl(n,e,t){var r=(t*n.width+e)*4,i=[];return i.push(n.data[r++],n.data[r++],n.data[r++],n.data[r++]),i}function na(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}function OM(n){for(var e=[0,0,0],t=0;t<n.length;t++)e[0]+=n[t][0],e[1]+=n[t][1],e[2]+=n[t][2];return e[0]/=n.length,e[1]/=n.length,e[2]/=n.length,e}function MM(n,e){var t=Zl(n,0,0),r=Zl(n,n.width-1,0),i=Zl(n,0,n.height-1),s=Zl(n,n.width-1,n.height-1),o=e||10;if(na(t,r)<o&&na(r,s)<o&&na(s,i)<o&&na(i,t)<o){for(var a=OM([r,t,s,i]),l=[],c=0;c<n.width*n.height;c++){var u=na(a,[n.data[c*4],n.data[c*4+1],n.data[c*4+2]]);l[c]=u<o?0:255}return l}}function IM(n,e){for(var t=0;t<n.width*n.height;t++)n.data[4*t+3]=e[t]}function PM(n,e,t){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<t;a++)for(var l=0;l<e;l++){for(var c=a*e+l,u=0,f=0;f<i;f++)for(var h=0;h<i;h++){var p=a+f-s,d=l+h-s;if(p>=0&&p<t&&d>=0&&d<e){var g=p*e+d,m=r[f*i+h];u+=n[g]*m}}o[c]=u===255*8?255:0}return o}function NM(n,e,t){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<t;a++)for(var l=0;l<e;l++){for(var c=a*e+l,u=0,f=0;f<i;f++)for(var h=0;h<i;h++){var p=a+f-s,d=l+h-s;if(p>=0&&p<t&&d>=0&&d<e){var g=p*e+d,m=r[f*i+h];u+=n[g]*m}}o[c]=u>=255*4?255:0}return o}function RM(n,e,t){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<t;a++)for(var l=0;l<e;l++){for(var c=a*e+l,u=0,f=0;f<i;f++)for(var h=0;h<i;h++){var p=a+f-s,d=l+h-s;if(p>=0&&p<t&&d>=0&&d<e){var g=p*e+d,m=r[f*i+h];u+=n[g]*m}}o[c]=u}return o}const LM=function(n){var e=this.threshold(),t=MM(n,e);return t&&(t=PM(t,n.width,n.height),t=NM(t,n.width,n.height),t=RM(t,n.width,n.height),IM(n,t)),n};T.addGetterSetter(ee,"threshold",0,Q(),T.afterSetFilter);const DM=function(n){var e=this.noise()*255,t=n.data,r=t.length,i=e/2,s;for(s=0;s<r;s+=4)t[s+0]+=i-2*i*Math.random(),t[s+1]+=i-2*i*Math.random(),t[s+2]+=i-2*i*Math.random()};T.addGetterSetter(ee,"noise",.2,Q(),T.afterSetFilter);const FM=function(n){var e=Math.ceil(this.pixelSize()),t=n.width,r=n.height,i,s,o,a,l,c,u,f=Math.ceil(t/e),h=Math.ceil(r/e),p,d,g,m,y,w,b,v=n.data;if(e<=0){R.error("pixelSize value can not be <= 0");return}for(y=0;y<f;y+=1)for(w=0;w<h;w+=1){for(a=0,l=0,c=0,u=0,p=y*e,d=p+e,g=w*e,m=g+e,b=0,i=p;i<d;i+=1)if(!(i>=t))for(s=g;s<m;s+=1)s>=r||(o=(t*s+i)*4,a+=v[o+0],l+=v[o+1],c+=v[o+2],u+=v[o+3],b+=1);for(a=a/b,l=l/b,c=c/b,u=u/b,i=p;i<d;i+=1)if(!(i>=t))for(s=g;s<m;s+=1)s>=r||(o=(t*s+i)*4,v[o+0]=a,v[o+1]=l,v[o+2]=c,v[o+3]=u)}};T.addGetterSetter(ee,"pixelSize",8,Q(),T.afterSetFilter);const BM=function(n){var e=Math.round(this.levels()*254)+1,t=n.data,r=t.length,i=255/e,s;for(s=0;s<r;s+=1)t[s]=Math.floor(t[s]/i)*i};T.addGetterSetter(ee,"levels",.5,Q(),T.afterSetFilter);const $M=function(n){var e=n.data,t=e.length,r=this.red(),i=this.green(),s=this.blue(),o,a;for(o=0;o<t;o+=4)a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=a*r,e[o+1]=a*i,e[o+2]=a*s,e[o+3]=e[o+3]};T.addGetterSetter(ee,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});T.addGetterSetter(ee,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});T.addGetterSetter(ee,"blue",0,m_,T.afterSetFilter);const jM=function(n){var e=n.data,t=e.length,r=this.red(),i=this.green(),s=this.blue(),o=this.alpha(),a,l;for(a=0;a<t;a+=4)l=1-o,e[a]=r*o+e[a]*l,e[a+1]=i*o+e[a+1]*l,e[a+2]=s*o+e[a+2]*l};T.addGetterSetter(ee,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});T.addGetterSetter(ee,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});T.addGetterSetter(ee,"blue",0,m_,T.afterSetFilter);T.addGetterSetter(ee,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const HM=function(n){var e=n.data,t=e.length,r,i,s,o;for(r=0;r<t;r+=4)i=e[r+0],s=e[r+1],o=e[r+2],e[r+0]=Math.min(255,i*.393+s*.769+o*.189),e[r+1]=Math.min(255,i*.349+s*.686+o*.168),e[r+2]=Math.min(255,i*.272+s*.534+o*.131)},VM=function(n){var e=n.data,t=n.width,r=n.height,i=t*4,s=r;do{var o=(s-1)*i,a=t;do{var l=o+(a-1)*4,c=e[l],u=e[l+1],f=e[l+2];c>127&&(c=255-c),u>127&&(u=255-u),f>127&&(f=255-f),e[l]=c,e[l+1]=u,e[l+2]=f}while(--a)}while(--s)},zM=function(n){var e=this.threshold()*255,t=n.data,r=t.length,i;for(i=0;i<r;i+=1)t[i]=t[i]<e?0:255};T.addGetterSetter(ee,"threshold",.5,Q(),T.afterSetFilter);const ui=Rv.Util._assign(Rv,{Arc:Hr,Arrow:Ds,Circle:zo,Ellipse:Fi,Image:Sr,Label:Bp,Tag:Fs,Line:Vr,Path:Qe,Rect:vl,RegularPolygon:Bs,Ring:$s,Sprite:xr,Star:Bi,Text:ut,TextPath:Et,Transformer:qe,Wedge:zr,Filters:{Blur:vM,Brighten:yM,Contrast:bM,Emboss:_M,Enhance:wM,Grayscale:CM,HSL:SM,HSV:xM,Invert:AM,Kaleidoscope:TM,Mask:LM,Noise:DM,Pixelate:FM,Posterize:BM,RGB:$M,RGBA:jM,Sepia:HM,Solarize:VM,Threshold:zM}});/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function GM(n,e){const t=new Set(n.split(","));return r=>t.has(r)}const WM=()=>{},UM=Object.prototype.hasOwnProperty,Zc=(n,e)=>UM.call(n,e),ps=Array.isArray,Rc=n=>K_(n)==="[object Map]",KM=n=>typeof n=="function",YM=n=>typeof n=="string",yl=n=>typeof n=="symbol",Wu=n=>n!==null&&typeof n=="object",qM=Object.prototype.toString,K_=n=>qM.call(n),XM=n=>K_(n).slice(8,-1),$p=n=>YM(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Go=(n,e)=>!Object.is(n,e);/**
* @vue/reactivity v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let JM;function QM(n,e=JM){e&&e.active&&e.effects.push(n)}let ms;class Y_{constructor(e,t,r,i){this.fn=e,this.trigger=t,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,QM(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Uu();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(ZM(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ku()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=gi,t=ms;try{return gi=!0,ms=this,this._runnings++,zv(this),this.fn()}finally{Gv(this),this._runnings--,ms=t,gi=e}}stop(){this.active&&(zv(this),Gv(this),this.onStop&&this.onStop(),this.active=!1)}}function ZM(n){return n.value}function zv(n){n._trackId++,n._depsLength=0}function Gv(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)q_(n.deps[e],n);n.deps.length=n._depsLength}}function q_(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let gi=!0,cd=0;const X_=[];function Uu(){X_.push(gi),gi=!1}function Ku(){const n=X_.pop();gi=n===void 0?!0:n}function jp(){cd++}function Hp(){for(cd--;!cd&&ud.length;)ud.shift()()}function J_(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const r=n.deps[n._depsLength];r!==e?(r&&q_(r,n),n.deps[n._depsLength++]=e):n._depsLength++}}const ud=[];function Q_(n,e,t){jp();for(const r of n.keys()){let i;r._dirtyLevel<e&&(i??(i=n.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=n.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&ud.push(r.scheduler)))}Hp()}const Z_=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},fd=new WeakMap,gs=Symbol(""),hd=Symbol("");function Hn(n,e,t){if(gi&&ms){let r=fd.get(n);r||fd.set(n,r=new Map);let i=r.get(t);i||r.set(t,i=Z_(()=>r.delete(t))),J_(ms,i)}}function vi(n,e,t,r,i,s){const o=fd.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&ps(n)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!yl(u)&&u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":ps(n)?$p(t)&&a.push(o.get("length")):(a.push(o.get(gs)),Rc(n)&&a.push(o.get(hd)));break;case"delete":ps(n)||(a.push(o.get(gs)),Rc(n)&&a.push(o.get(hd)));break;case"set":Rc(n)&&a.push(o.get(gs));break}jp();for(const l of a)l&&Q_(l,4);Hp()}const eI=GM("__proto__,__v_isRef,__isVue"),ew=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(yl)),Wv=tI();function tI(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const r=et(this);for(let s=0,o=this.length;s<o;s++)Hn(r,"get",s+"");const i=r[e](...t);return i===-1||i===!1?r[e](...t.map(et)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Uu(),jp();const r=et(this)[e].apply(this,t);return Hp(),Ku(),r}}),n}function nI(n){yl(n)||(n=String(n));const e=et(this);return Hn(e,"has",n),e.hasOwnProperty(n)}class tw{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?mI:iw:s?pI:rw).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ps(e);if(!i){if(o&&Zc(Wv,t))return Reflect.get(Wv,t,r);if(t==="hasOwnProperty")return nI}const a=Reflect.get(e,t,r);return(yl(t)?ew.has(t):eI(t))||(i||Hn(e,"get",t),s)?a:Es(a)?o&&$p(t)?a:a.value:Wu(a)?i?ow(a):sw(a):a}}class rI extends tw{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=ks(s);if(!Ao(r)&&!ks(r)&&(s=et(s),r=et(r)),!ps(e)&&Es(s)&&!Es(r))return l?!1:(s.value=r,!0)}const o=ps(e)&&$p(t)?Number(t)<e.length:Zc(e,t),a=Reflect.set(e,t,r,i);return e===et(i)&&(o?Go(r,s)&&vi(e,"set",t,r):vi(e,"add",t,r)),a}deleteProperty(e,t){const r=Zc(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&vi(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!yl(t)||!ew.has(t))&&Hn(e,"has",t),r}ownKeys(e){return Hn(e,"iterate",ps(e)?"length":gs),Reflect.ownKeys(e)}}class iI extends tw{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const sI=new rI,oI=new iI,Vp=n=>n,Yu=n=>Reflect.getPrototypeOf(n);function ec(n,e,t=!1,r=!1){n=n.__v_raw;const i=et(n),s=et(e);t||(Go(e,s)&&Hn(i,"get",e),Hn(i,"get",s));const{has:o}=Yu(i),a=r?Vp:t?zp:Qa;if(o.call(i,e))return a(n.get(e));if(o.call(i,s))return a(n.get(s));n!==i&&n.get(e)}function tc(n,e=!1){const t=this.__v_raw,r=et(t),i=et(n);return e||(Go(n,i)&&Hn(r,"has",n),Hn(r,"has",i)),n===i?t.has(n):t.has(n)||t.has(i)}function nc(n,e=!1){return n=n.__v_raw,!e&&Hn(et(n),"iterate",gs),Reflect.get(n,"size",n)}function Uv(n,e=!1){!e&&!Ao(n)&&!ks(n)&&(n=et(n));const t=et(this);return Yu(t).has.call(t,n)||(t.add(n),vi(t,"add",n,n)),this}function Kv(n,e,t=!1){!t&&!Ao(e)&&!ks(e)&&(e=et(e));const r=et(this),{has:i,get:s}=Yu(r);let o=i.call(r,n);o||(n=et(n),o=i.call(r,n));const a=s.call(r,n);return r.set(n,e),o?Go(e,a)&&vi(r,"set",n,e):vi(r,"add",n,e),this}function Yv(n){const e=et(this),{has:t,get:r}=Yu(e);let i=t.call(e,n);i||(n=et(n),i=t.call(e,n)),r&&r.call(e,n);const s=e.delete(n);return i&&vi(e,"delete",n,void 0),s}function qv(){const n=et(this),e=n.size!==0,t=n.clear();return e&&vi(n,"clear",void 0,void 0),t}function rc(n,e){return function(r,i){const s=this,o=s.__v_raw,a=et(o),l=e?Vp:n?zp:Qa;return!n&&Hn(a,"iterate",gs),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function ic(n,e,t){return function(...r){const i=this.__v_raw,s=et(i),o=Rc(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=i[n](...r),u=t?Vp:e?zp:Qa;return!e&&Hn(s,"iterate",l?hd:gs),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:a?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Xr(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function aI(){const n={get(s){return ec(this,s)},get size(){return nc(this)},has:tc,add:Uv,set:Kv,delete:Yv,clear:qv,forEach:rc(!1,!1)},e={get(s){return ec(this,s,!1,!0)},get size(){return nc(this)},has:tc,add(s){return Uv.call(this,s,!0)},set(s,o){return Kv.call(this,s,o,!0)},delete:Yv,clear:qv,forEach:rc(!1,!0)},t={get(s){return ec(this,s,!0)},get size(){return nc(this,!0)},has(s){return tc.call(this,s,!0)},add:Xr("add"),set:Xr("set"),delete:Xr("delete"),clear:Xr("clear"),forEach:rc(!0,!1)},r={get(s){return ec(this,s,!0,!0)},get size(){return nc(this,!0)},has(s){return tc.call(this,s,!0)},add:Xr("add"),set:Xr("set"),delete:Xr("delete"),clear:Xr("clear"),forEach:rc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ic(s,!1,!1),t[s]=ic(s,!0,!1),e[s]=ic(s,!1,!0),r[s]=ic(s,!0,!0)}),[n,t,e,r]}const[lI,cI,uI,fI]=aI();function nw(n,e){const t=e?n?fI:uI:n?cI:lI;return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Zc(t,i)&&i in r?t:r,i,s)}const hI={get:nw(!1,!1)},dI={get:nw(!0,!1)},rw=new WeakMap,pI=new WeakMap,iw=new WeakMap,mI=new WeakMap;function gI(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vI(n){return n.__v_skip||!Object.isExtensible(n)?0:gI(XM(n))}function sw(n){return ks(n)?n:aw(n,!1,sI,hI,rw)}function ow(n){return aw(n,!0,oI,dI,iw)}function aw(n,e,t,r,i){if(!Wu(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=vI(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function Lc(n){return ks(n)?Lc(n.__v_raw):!!(n&&n.__v_isReactive)}function ks(n){return!!(n&&n.__v_isReadonly)}function Ao(n){return!!(n&&n.__v_isShallow)}function et(n){const e=n&&n.__v_raw;return e?et(e):n}const Qa=n=>Wu(n)?sw(n):n,zp=n=>Wu(n)?ow(n):n;class lw{constructor(e,t,r,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Y_(()=>e(this._value),()=>Dc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=et(this);return(!e._cacheable||e.effect.dirty)&&Go(e._value,e._value=e.effect.run())&&Dc(e,4),cw(e),e.effect._dirtyLevel>=2&&Dc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function yI(n,e,t=!1){let r,i;const s=KM(n);return s?(r=n,i=WM):(r=n.get,i=n.set),new lw(r,i,s||!i,t)}function cw(n){var e;gi&&ms&&(n=et(n),J_(ms,(e=n.dep)!=null?e:n.dep=Z_(()=>n.dep=void 0,n instanceof lw?n:void 0)))}function Dc(n,e=4,t,r){n=et(n);const i=n.dep;i&&Q_(i,e)}function Es(n){return!!(n&&n.__v_isRef===!0)}function er(n){return bI(n,!1)}function bI(n,e){return Es(n)?n:new _I(n,e)}class _I{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:et(e),this._value=t?e:Qa(e)}get value(){return cw(this),this._value}set value(e){const t=this.__v_isShallow||Ao(e)||ks(e);e=t?e:et(e),Go(e,this._rawValue)&&(this._rawValue,this._rawValue=e,this._value=t?e:Qa(e),Dc(this,4))}}/**
* @vue/shared v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wI={},sc=()=>{},bl=Array.isArray,CI=n=>Gp(n)==="[object Map]",SI=n=>Gp(n)==="[object Set]",vs=n=>typeof n=="function",uw=n=>n!==null&&typeof n=="object",xI=n=>(uw(n)||vs(n))&&vs(n.then)&&vs(n.catch),AI=Object.prototype.toString,Gp=n=>AI.call(n),kI=n=>Gp(n)==="[object Object]",Xv=(n,e)=>!Object.is(n,e);let Jv;const EI=()=>Jv||(Jv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});/**
* @vue/runtime-core v3.4.38
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function fo(n,e,t,r){try{return r?n(...r):n()}catch(i){fw(i,e,t)}}function Ia(n,e,t,r){if(vs(n)){const i=fo(n,e,t,r);return i&&xI(i)&&i.catch(s=>{fw(s,e,t)}),i}if(bl(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Ia(n[s],e,t,r));return i}}function fw(n,e,t,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Uu(),fo(l,null,10,[n,o,a]),Ku();return}}TI(n,t,i,r)}function TI(n,e,t,r=!0){console.error(n)}let eu=!1,dd=!1;const qn=[];let li=0;const ho=[];let ri=null,ns=0;const OI=Promise.resolve();function MI(n){let e=li+1,t=qn.length;for(;e<t;){const r=e+t>>>1,i=qn[r],s=Za(i);s<n||s===n&&i.pre?e=r+1:t=r}return e}function II(n){(!qn.length||!qn.includes(n,eu&&n.allowRecurse?li+1:li))&&(n.id==null?qn.push(n):qn.splice(MI(n.id),0,n),hw())}function hw(){!eu&&!dd&&(dd=!0,OI.then(dw))}function PI(n){bl(n)?ho.push(...n):(!ri||!ri.includes(n,n.allowRecurse?ns+1:ns))&&ho.push(n),hw()}function NI(n){if(ho.length){const e=[...new Set(ho)].sort((t,r)=>Za(t)-Za(r));if(ho.length=0,ri){ri.push(...e);return}for(ri=e,ns=0;ns<ri.length;ns++){const t=ri[ns];t.active!==!1&&t()}ri=null,ns=0}}const Za=n=>n.id==null?1/0:n.id,RI=(n,e)=>{const t=Za(n)-Za(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function dw(n){dd=!1,eu=!0,qn.sort(RI);try{for(li=0;li<qn.length;li++){const e=qn[li];e&&e.active!==!1&&fo(e,e.i,e.i?15:14)}}finally{li=0,qn.length=0,NI(),eu=!1,(qn.length||ho.length)&&dw()}}let LI=null;function DI(n,e,t=Wo,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{Uu();const a=GI(t),l=Ia(e,t,n,o);return a(),Ku(),l});return r?i.unshift(s):i.push(s),s}}const pw=n=>(e,t=Wo)=>{(!qu||n==="sp")&&DI(n,(...r)=>e(...r),t)},mw=pw("m"),FI=pw("bum");let BI=null;function $I(n,e,t=!1){const r=Wo||LI;if(r||BI){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&vs(e)?e.call(r&&r.proxy):e}}const Qv=zI,jI=Symbol.for("v-scx"),HI=()=>$I(jI),oc={};function _l(n,e,t){return VI(n,e,t)}function VI(n,e,{immediate:t,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=wI){if(e&&s){const S=e;e=(..._)=>{S(..._),v()}}const l=Wo,c=S=>r===!0?S:rs(S,r===!1?1:void 0);let u,f=!1,h=!1;if(Es(n)?(u=()=>n.value,f=Ao(n)):Lc(n)?(u=()=>c(n),f=!0):bl(n)?(h=!0,f=n.some(S=>Lc(S)||Ao(S)),u=()=>n.map(S=>{if(Es(S))return S.value;if(Lc(S))return c(S);if(vs(S))return fo(S,l,2)})):vs(n)?e?u=()=>fo(n,l,2):u=()=>(p&&p(),Ia(n,l,3,[d])):u=sc,e&&r){const S=u;u=()=>rs(S())}let p,d=S=>{p=b.onStop=()=>{fo(S,l,4),p=b.onStop=void 0}},g;if(qu)if(d=sc,e?t&&Ia(e,l,3,[u(),h?[]:void 0,d]):u(),i==="sync"){const S=HI();g=S.__watcherHandles||(S.__watcherHandles=[])}else return sc;let m=h?new Array(n.length).fill(oc):oc;const y=()=>{if(!(!b.active||!b.dirty))if(e){const S=b.run();(r||f||(h?S.some((_,k)=>Xv(_,m[k])):Xv(S,m)))&&(p&&p(),Ia(e,l,3,[S,m===oc?void 0:h&&m[0]===oc?[]:m,d]),m=S)}else b.run()};y.allowRecurse=!!e;let w;i==="sync"?w=y:i==="post"?w=()=>Qv(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),w=()=>II(y));const b=new Y_(u,sc,w),v=()=>{b.stop()};return e?t?y():m=b.run():i==="post"?Qv(b.run.bind(b),l&&l.suspense):b.run(),g&&g.push(v),v}function rs(n,e=1/0,t){if(e<=0||!uw(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Es(n))rs(n.value,e,t);else if(bl(n))for(let r=0;r<n.length;r++)rs(n[r],e,t);else if(SI(n)||CI(n))n.forEach(r=>{rs(r,e,t)});else if(kI(n)){for(const r in n)rs(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&rs(n[r],e,t)}return n}function zI(n,e){e&&e.pendingBranch?bl(n)?e.effects.push(...n):e.effects.push(n):PI(n)}let Wo=null,pd;{const n=EI(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};pd=e("__VUE_INSTANCE_SETTERS__",t=>Wo=t),e("__VUE_SSR_SETTERS__",t=>qu=t)}const GI=n=>{const e=Wo;return pd(n),n.scope.on(),()=>{n.scope.off(),pd(e)}};let qu=!1;const wl=(n,e)=>yI(n,e,qu);/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function WI(n,e,t){return(e=KI(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function J(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zv(Object(t),!0).forEach(function(r){WI(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zv(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UI(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KI(n){var e=UI(n,"string");return typeof e=="symbol"?e:e+""}const ey=()=>{};let Wp={},gw={},vw=null,yw={mark:ey,measure:ey};try{typeof window<"u"&&(Wp=window),typeof document<"u"&&(gw=document),typeof MutationObserver<"u"&&(vw=MutationObserver),typeof performance<"u"&&(yw=performance)}catch{}const{userAgent:ty=""}=Wp.navigator||{},ki=Wp,at=gw,ny=vw,ac=yw;ki.document;const Gr=!!at.documentElement&&!!at.head&&typeof at.addEventListener=="function"&&typeof at.createElement=="function",bw=~ty.indexOf("MSIE")||~ty.indexOf("Trident/");var YI=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,qI=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,_w={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},XI={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ww=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Wt="classic",Xu="duotone",JI="sharp",QI="sharp-duotone",Cw=[Wt,Xu,JI,QI],ZI={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},eP={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},tP=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),nP={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},rP=["fak","fa-kit","fakd","fa-kit-duotone"],ry={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},iP=["kit"],sP={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},oP=["fak","fakd"],aP={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},iy={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},lc={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},lP=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],cP=["fak","fa-kit","fakd","fa-kit-duotone"],uP={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},fP={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},hP={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},md={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},dP=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],gd=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...lP,...dP],pP=["solid","regular","light","thin","duotone","brands"],Sw=[1,2,3,4,5,6,7,8,9,10],mP=Sw.concat([11,12,13,14,15,16,17,18,19,20]),gP=[...Object.keys(hP),...pP,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",lc.GROUP,lc.SWAP_OPACITY,lc.PRIMARY,lc.SECONDARY].concat(Sw.map(n=>"".concat(n,"x"))).concat(mP.map(n=>"w-".concat(n))),vP={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Fr="___FONT_AWESOME___",vd=16,xw="fa",Aw="svg-inline--fa",Ts="data-fa-i2svg",yd="data-fa-pseudo-element",yP="data-fa-pseudo-element-pending",Up="data-prefix",Kp="data-icon",sy="fontawesome-i2svg",bP="async",_P=["HTML","HEAD","STYLE","SCRIPT"],kw=(()=>{try{return!0}catch{return!1}})();function Cl(n){return new Proxy(n,{get(e,t){return t in e?e[t]:e[Wt]}})}const Ew=J({},_w);Ew[Wt]=J(J(J(J({},{"fa-duotone":"duotone"}),_w[Wt]),ry.kit),ry["kit-duotone"]);const wP=Cl(Ew),bd=J({},nP);bd[Wt]=J(J(J(J({},{duotone:"fad"}),bd[Wt]),iy.kit),iy["kit-duotone"]);const oy=Cl(bd),_d=J({},md);_d[Wt]=J(J({},_d[Wt]),aP.kit);const Yp=Cl(_d),wd=J({},fP);wd[Wt]=J(J({},wd[Wt]),sP.kit);Cl(wd);const CP=YI,Tw="fa-layers-text",SP=qI,xP=J({},ZI);Cl(xP);const AP=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Kf=XI,kP=[...iP,...gP],Pa=ki.FontAwesomeConfig||{};function EP(n){var e=at.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function TP(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}at&&typeof at.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,r]=e;const i=TP(EP(t));i!=null&&(Pa[r]=i)});const Ow={styleDefault:"solid",familyDefault:Wt,cssPrefix:xw,replacementClass:Aw,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Pa.familyPrefix&&(Pa.cssPrefix=Pa.familyPrefix);const ko=J(J({},Ow),Pa);ko.autoReplaceSvg||(ko.observeMutations=!1);const ye={};Object.keys(Ow).forEach(n=>{Object.defineProperty(ye,n,{enumerable:!0,set:function(e){ko[n]=e,Na.forEach(t=>t(ye))},get:function(){return ko[n]}})});Object.defineProperty(ye,"familyPrefix",{enumerable:!0,set:function(n){ko.cssPrefix=n,Na.forEach(e=>e(ye))},get:function(){return ko.cssPrefix}});ki.FontAwesomeConfig=ye;const Na=[];function OP(n){return Na.push(n),()=>{Na.splice(Na.indexOf(n),1)}}const Jr=vd,dr={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function MP(n){if(!n||!Gr)return;const e=at.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;const t=at.head.childNodes;let r=null;for(let i=t.length-1;i>-1;i--){const s=t[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return at.head.insertBefore(e,r),n}const IP="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function el(){let n=12,e="";for(;n-- >0;)e+=IP[Math.random()*62|0];return e}function Uo(n){const e=[];for(let t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function qp(n){return n.classList?Uo(n.classList):(n.getAttribute("class")||"").split(" ").filter(e=>e)}function Mw(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function PP(n){return Object.keys(n||{}).reduce((e,t)=>e+"".concat(t,'="').concat(Mw(n[t]),'" '),"").trim()}function Ju(n){return Object.keys(n||{}).reduce((e,t)=>e+"".concat(t,": ").concat(n[t].trim(),";"),"")}function Xp(n){return n.size!==dr.size||n.x!==dr.x||n.y!==dr.y||n.rotate!==dr.rotate||n.flipX||n.flipY}function NP(n){let{transform:e,containerWidth:t,iconWidth:r}=n;const i={transform:"translate(".concat(t/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function RP(n){let{transform:e,width:t=vd,height:r=vd,startCentered:i=!1}=n,s="";return i&&bw?s+="translate(".concat(e.x/Jr-t/2,"em, ").concat(e.y/Jr-r/2,"em) "):i?s+="translate(calc(-50% + ".concat(e.x/Jr,"em), calc(-50% + ").concat(e.y/Jr,"em)) "):s+="translate(".concat(e.x/Jr,"em, ").concat(e.y/Jr,"em) "),s+="scale(".concat(e.size/Jr*(e.flipX?-1:1),", ").concat(e.size/Jr*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var LP=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function Iw(){const n=xw,e=Aw,t=ye.cssPrefix,r=ye.replacementClass;let i=LP;if(t!==n||r!==e){const s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(r))}return i}let ay=!1;function Yf(){ye.autoAddCss&&!ay&&(MP(Iw()),ay=!0)}var DP={mixout(){return{dom:{css:Iw,insertCss:Yf}}},hooks(){return{beforeDOMElementCreation(){Yf()},beforeI2svg(){Yf()}}}};const Br=ki||{};Br[Fr]||(Br[Fr]={});Br[Fr].styles||(Br[Fr].styles={});Br[Fr].hooks||(Br[Fr].hooks={});Br[Fr].shims||(Br[Fr].shims=[]);var pr=Br[Fr];const Pw=[],Nw=function(){at.removeEventListener("DOMContentLoaded",Nw),tu=1,Pw.map(n=>n())};let tu=!1;Gr&&(tu=(at.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(at.readyState),tu||at.addEventListener("DOMContentLoaded",Nw));function FP(n){Gr&&(tu?setTimeout(n,0):Pw.push(n))}function Sl(n){const{tag:e,attributes:t={},children:r=[]}=n;return typeof n=="string"?Mw(n):"<".concat(e," ").concat(PP(t),">").concat(r.map(Sl).join(""),"</").concat(e,">")}function ly(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}var qf=function(e,t,r,i){var s=Object.keys(e),o=s.length,a=t,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function BP(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const s=n.charCodeAt(t++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}function Cd(n){const e=BP(n);return e.length===1?e[0].toString(16):null}function $P(n,e){const t=n.length;let r=n.charCodeAt(e),i;return r>=55296&&r<=56319&&t>e+1&&(i=n.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function cy(n){return Object.keys(n).reduce((e,t)=>{const r=n[t];return!!r.icon?e[r.iconName]=r.icon:e[t]=r,e},{})}function Sd(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=t,i=cy(e);typeof pr.hooks.addPack=="function"&&!r?pr.hooks.addPack(n,cy(e)):pr.styles[n]=J(J({},pr.styles[n]||{}),i),n==="fas"&&Sd("fa",e)}const{styles:tl,shims:jP}=pr,Rw=Object.keys(Yp),HP=Rw.reduce((n,e)=>(n[e]=Object.keys(Yp[e]),n),{});let Jp=null,Lw={},Dw={},Fw={},Bw={},$w={};function VP(n){return~kP.indexOf(n)}function zP(n,e){const t=e.split("-"),r=t[0],i=t.slice(1).join("-");return r===n&&i!==""&&!VP(i)?i:null}const jw=()=>{const n=r=>qf(tl,(i,s,o)=>(i[o]=qf(s,r,{}),i),{});Lw=n((r,i,s)=>(i[3]&&(r[i[3]]=s),i[2]&&i[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=s}),r)),Dw=n((r,i,s)=>(r[s]=s,i[2]&&i[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=s}),r)),$w=n((r,i,s)=>{const o=i[2];return r[s]=s,o.forEach(a=>{r[a]=s}),r});const e="far"in tl||ye.autoFetchSvg,t=qf(jP,(r,i)=>{const s=i[0];let o=i[1];const a=i[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(r.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:o,iconName:a}),r},{names:{},unicodes:{}});Fw=t.names,Bw=t.unicodes,Jp=Qu(ye.styleDefault,{family:ye.familyDefault})};OP(n=>{Jp=Qu(n.styleDefault,{family:ye.familyDefault})});jw();function Qp(n,e){return(Lw[n]||{})[e]}function GP(n,e){return(Dw[n]||{})[e]}function as(n,e){return($w[n]||{})[e]}function Hw(n){return Fw[n]||{prefix:null,iconName:null}}function WP(n){const e=Bw[n],t=Qp("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function Ei(){return Jp}const Vw=()=>({prefix:null,iconName:null,rest:[]});function UP(n){let e=Wt;const t=Rw.reduce((r,i)=>(r[i]="".concat(ye.cssPrefix,"-").concat(i),r),{});return Cw.forEach(r=>{(n.includes(t[r])||n.some(i=>HP[r].includes(i)))&&(e=r)}),e}function Qu(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:t=Wt}=e,r=wP[t][n];if(t===Xu&&!n)return"fad";const i=oy[t][n]||oy[t][r],s=n in pr.styles?n:null;return i||s||null}function KP(n){let e=[],t=null;return n.forEach(r=>{const i=zP(ye.cssPrefix,r);i?t=i:r&&e.push(r)}),{iconName:t,rest:e}}function uy(n){return n.sort().filter((e,t,r)=>r.indexOf(e)===t)}function Zu(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:t=!1}=e;let r=null;const i=gd.concat(cP),s=uy(n.filter(f=>i.includes(f))),o=uy(n.filter(f=>!gd.includes(f))),a=s.filter(f=>(r=f,!ww.includes(f))),[l=null]=a,c=UP(s),u=J(J({},KP(o)),{},{prefix:Qu(l,{family:c})});return J(J(J({},u),JP({values:n,family:c,styles:tl,config:ye,canonical:u,givenPrefix:r})),YP(t,r,u))}function YP(n,e,t){let{prefix:r,iconName:i}=t;if(n||!r||!i)return{prefix:r,iconName:i};const s=e==="fa"?Hw(i):{},o=as(r,i);return i=s.iconName||o||i,r=s.prefix||r,r==="far"&&!tl.far&&tl.fas&&!ye.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const qP=Cw.filter(n=>n!==Wt||n!==Xu),XP=Object.keys(md).filter(n=>n!==Wt).map(n=>Object.keys(md[n])).flat();function JP(n){const{values:e,family:t,canonical:r,givenPrefix:i="",styles:s={},config:o={}}=n,a=t===Xu,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(l||c||u)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&qP.includes(t)&&(Object.keys(s).find(h=>XP.includes(h))||o.autoFetchSvg)){const h=tP.get(t).defaultShortPrefixId;r.prefix=h,r.iconName=as(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=Ei()||"fas"),r}class QP{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=t.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=J(J({},this.definitions[s]||{}),i[s]),Sd(s,i[s]);const o=Yp[Wt][s];o&&Sd(o,i[s]),jw()})}reset(){this.definitions={}}_pullDefinitions(e,t){const r=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(r).map(i=>{const{prefix:s,iconName:o,icon:a}=r[i],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let fy=[],ro={};const po={},ZP=Object.keys(po);function eN(n,e){let{mixoutsTo:t}=e;return fy=n,ro={},Object.keys(po).forEach(r=>{ZP.indexOf(r)===-1&&delete po[r]}),fy.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(t[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(o=>{t[s]||(t[s]={}),t[s][o]=i[s][o]})}),r.hooks){const s=r.hooks();Object.keys(s).forEach(o=>{ro[o]||(ro[o]=[]),ro[o].push(s[o])})}r.provides&&r.provides(po)}),t}function xd(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];return(ro[n]||[]).forEach(o=>{e=o.apply(null,[e,...r])}),e}function Os(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];(ro[n]||[]).forEach(s=>{s.apply(null,t)})}function Ti(){const n=arguments[0],e=Array.prototype.slice.call(arguments,1);return po[n]?po[n].apply(null,e):void 0}function Ad(n){n.prefix==="fa"&&(n.prefix="fas");let{iconName:e}=n;const t=n.prefix||Ei();if(e)return e=as(t,e)||e,ly(zw.definitions,t,e)||ly(pr.styles,t,e)}const zw=new QP,tN=()=>{ye.autoReplaceSvg=!1,ye.observeMutations=!1,Os("noAuto")},nN={i2svg:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Gr?(Os("beforeI2svg",n),Ti("pseudoElements2svg",n),Ti("i2svg",n)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=n;ye.autoReplaceSvg===!1&&(ye.autoReplaceSvg=!0),ye.observeMutations=!0,FP(()=>{iN({autoReplaceSvgRoot:e}),Os("watch",n)})}},rN={icon:n=>{if(n===null)return null;if(typeof n=="object"&&n.prefix&&n.iconName)return{prefix:n.prefix,iconName:as(n.prefix,n.iconName)||n.iconName};if(Array.isArray(n)&&n.length===2){const e=n[1].indexOf("fa-")===0?n[1].slice(3):n[1],t=Qu(n[0]);return{prefix:t,iconName:as(t,e)||e}}if(typeof n=="string"&&(n.indexOf("".concat(ye.cssPrefix,"-"))>-1||n.match(CP))){const e=Zu(n.split(" "),{skipLookups:!0});return{prefix:e.prefix||Ei(),iconName:as(e.prefix,e.iconName)||e.iconName}}if(typeof n=="string"){const e=Ei();return{prefix:e,iconName:as(e,n)||n}}}},kn={noAuto:tN,config:ye,dom:nN,parse:rN,library:zw,findIconDefinition:Ad,toHtml:Sl},iN=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=at}=n;(Object.keys(pr.styles).length>0||ye.autoFetchSvg)&&Gr&&ye.autoReplaceSvg&&kn.dom.i2svg({node:e})};function ef(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(t=>Sl(t))}}),Object.defineProperty(n,"node",{get:function(){if(!Gr)return;const t=at.createElement("div");return t.innerHTML=n.html,t.children}}),n}function sN(n){let{children:e,main:t,mask:r,attributes:i,styles:s,transform:o}=n;if(Xp(o)&&t.found&&!r.found){const{width:a,height:l}=t,c={x:a/l/2,y:.5};i.style=Ju(J(J({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function oN(n){let{prefix:e,iconName:t,children:r,attributes:i,symbol:s}=n;const o=s===!0?"".concat(e,"-").concat(ye.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:J(J({},i),{},{id:o}),children:r}]}]}function Zp(n){const{icons:{main:e,mask:t},prefix:r,iconName:i,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:f=!1}=n,{width:h,height:p}=t.found?t:e,d=oP.includes(r),g=[ye.replacementClass,i?"".concat(ye.cssPrefix,"-").concat(i):""].filter(S=>u.classes.indexOf(S)===-1).filter(S=>S!==""||!!S).concat(u.classes).join(" ");let m={children:[],attributes:J(J({},u.attributes),{},{"data-prefix":r,"data-icon":i,class:g,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(p)})};const y=d&&!~u.classes.indexOf("fa-fw")?{width:"".concat(h/p*16*.0625,"em")}:{};f&&(m.attributes[Ts]=""),a&&(m.children.push({tag:"title",attributes:{id:m.attributes["aria-labelledby"]||"title-".concat(c||el())},children:[a]}),delete m.attributes.title);const w=J(J({},m),{},{prefix:r,iconName:i,main:e,mask:t,maskId:l,transform:s,symbol:o,styles:J(J({},y),u.styles)}),{children:b,attributes:v}=t.found&&e.found?Ti("generateAbstractMask",w)||{children:[],attributes:{}}:Ti("generateAbstractIcon",w)||{children:[],attributes:{}};return w.children=b,w.attributes=v,o?oN(w):sN(w)}function hy(n){const{content:e,width:t,height:r,transform:i,title:s,extra:o,watchable:a=!1}=n,l=J(J(J({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Ts]="");const c=J({},o.styles);Xp(i)&&(c.transform=RP({transform:i,startCentered:!0,width:t,height:r}),c["-webkit-transform"]=c.transform);const u=Ju(c);u.length>0&&(l.style=u);const f=[];return f.push({tag:"span",attributes:l,children:[e]}),s&&f.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),f}function aN(n){const{content:e,title:t,extra:r}=n,i=J(J(J({},r.attributes),t?{title:t}:{}),{},{class:r.classes.join(" ")}),s=Ju(r.styles);s.length>0&&(i.style=s);const o=[];return o.push({tag:"span",attributes:i,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}const{styles:Xf}=pr;function kd(n){const e=n[0],t=n[1],[r]=n.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(ye.cssPrefix,"-").concat(Kf.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ye.cssPrefix,"-").concat(Kf.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(ye.cssPrefix,"-").concat(Kf.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:t,icon:i}}const lN={found:!1,width:512,height:512};function cN(n,e){!kw&&!ye.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))}function Ed(n,e){let t=e;return e==="fa"&&ye.styleDefault!==null&&(e=Ei()),new Promise((r,i)=>{if(t==="fa"){const s=Hw(n)||{};n=s.iconName||n,e=s.prefix||e}if(n&&e&&Xf[e]&&Xf[e][n]){const s=Xf[e][n];return r(kd(s))}cN(n,e),r(J(J({},lN),{},{icon:ye.showMissingIcons&&n?Ti("missingIconAbstract")||{}:{}}))})}const dy=()=>{},Td=ye.measurePerformance&&ac&&ac.mark&&ac.measure?ac:{mark:dy,measure:dy},ga='FA "6.7.1"',uN=n=>(Td.mark("".concat(ga," ").concat(n," begins")),()=>Gw(n)),Gw=n=>{Td.mark("".concat(ga," ").concat(n," ends")),Td.measure("".concat(ga," ").concat(n),"".concat(ga," ").concat(n," begins"),"".concat(ga," ").concat(n," ends"))};var em={begin:uN,end:Gw};const Fc=()=>{};function py(n){return typeof(n.getAttribute?n.getAttribute(Ts):null)=="string"}function fN(n){const e=n.getAttribute?n.getAttribute(Up):null,t=n.getAttribute?n.getAttribute(Kp):null;return e&&t}function hN(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(ye.replacementClass)}function dN(){return ye.autoReplaceSvg===!0?Bc.replace:Bc[ye.autoReplaceSvg]||Bc.replace}function pN(n){return at.createElementNS("http://www.w3.org/2000/svg",n)}function mN(n){return at.createElement(n)}function Ww(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:t=n.tag==="svg"?pN:mN}=e;if(typeof n=="string")return at.createTextNode(n);const r=t(n.tag);return Object.keys(n.attributes||[]).forEach(function(s){r.setAttribute(s,n.attributes[s])}),(n.children||[]).forEach(function(s){r.appendChild(Ww(s,{ceFn:t}))}),r}function gN(n){let e=" ".concat(n.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const Bc={replace:function(n){const e=n[0];if(e.parentNode)if(n[1].forEach(t=>{e.parentNode.insertBefore(Ww(t),e)}),e.getAttribute(Ts)===null&&ye.keepOriginalSource){let t=at.createComment(gN(e));e.parentNode.replaceChild(t,e)}else e.remove()},nest:function(n){const e=n[0],t=n[1];if(~qp(e).indexOf(ye.replacementClass))return Bc.replace(n);const r=new RegExp("".concat(ye.cssPrefix,"-.*"));if(delete t[0].attributes.id,t[0].attributes.class){const s=t[0].attributes.class.split(" ").reduce((o,a)=>(a===ye.replacementClass||a.match(r)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});t[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const i=t.map(s=>Sl(s)).join(`
`);e.setAttribute(Ts,""),e.innerHTML=i}};function my(n){n()}function Uw(n,e){const t=typeof e=="function"?e:Fc;if(n.length===0)t();else{let r=my;ye.mutateApproach===bP&&(r=ki.requestAnimationFrame||my),r(()=>{const i=dN(),s=em.begin("mutate");n.map(i),s(),t()})}}let tm=!1;function Kw(){tm=!0}function Od(){tm=!1}let nu=null;function gy(n){if(!ny||!ye.observeMutations)return;const{treeCallback:e=Fc,nodeCallback:t=Fc,pseudoElementsCallback:r=Fc,observeMutationsRoot:i=at}=n;nu=new ny(s=>{if(tm)return;const o=Ei();Uo(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!py(a.addedNodes[0])&&(ye.searchPseudoElements&&r(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&ye.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&py(a.target)&&~AP.indexOf(a.attributeName))if(a.attributeName==="class"&&fN(a.target)){const{prefix:l,iconName:c}=Zu(qp(a.target));a.target.setAttribute(Up,l||o),c&&a.target.setAttribute(Kp,c)}else hN(a.target)&&t(a.target)})}),Gr&&nu.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function vN(){nu&&nu.disconnect()}function yN(n){const e=n.getAttribute("style");let t=[];return e&&(t=e.split(";").reduce((r,i)=>{const s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),t}function bN(n){const e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),r=n.innerText!==void 0?n.innerText.trim():"";let i=Zu(qp(n));return i.prefix||(i.prefix=Ei()),e&&t&&(i.prefix=e,i.iconName=t),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=GP(i.prefix,n.innerText)||Qp(i.prefix,Cd(n.innerText))),!i.iconName&&ye.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=n.firstChild.data)),i}function _N(n){const e=Uo(n.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),t=n.getAttribute("title"),r=n.getAttribute("data-fa-title-id");return ye.autoA11y&&(t?e["aria-labelledby"]="".concat(ye.replacementClass,"-title-").concat(r||el()):(e["aria-hidden"]="true",e.focusable="false")),e}function wN(){return{iconName:null,title:null,titleId:null,prefix:null,transform:dr,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function vy(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:t,prefix:r,rest:i}=bN(n),s=_N(n),o=xd("parseNodeAttributes",{},n);let a=e.styleParser?yN(n):[];return J({iconName:t,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:dr,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:a,attributes:s}},o)}const{styles:CN}=pr;function Yw(n){const e=ye.autoReplaceSvg==="nest"?vy(n,{styleParser:!1}):vy(n);return~e.extra.classes.indexOf(Tw)?Ti("generateLayersText",n,e):Ti("generateSvgReplacementMutation",n,e)}function SN(){return[...rP,...gd]}function yy(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Gr)return Promise.resolve();const t=at.documentElement.classList,r=u=>t.add("".concat(sy,"-").concat(u)),i=u=>t.remove("".concat(sy,"-").concat(u)),s=ye.autoFetchSvg?SN():ww.concat(Object.keys(CN));s.includes("fa")||s.push("fa");const o=[".".concat(Tw,":not([").concat(Ts,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Ts,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Uo(n.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();const l=em.begin("onTree"),c=a.reduce((u,f)=>{try{const h=Yw(f);h&&u.push(h)}catch(h){kw||h.name==="MissingIcon"&&console.error(h)}return u},[]);return new Promise((u,f)=>{Promise.all(c).then(h=>{Uw(h,()=>{r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(h=>{l(),f(h)})})}function xN(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Yw(n).then(t=>{t&&Uw([t],e)})}function AN(n){return function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:Ad(e||{});let{mask:i}=t;return i&&(i=(i||{}).icon?i:Ad(i||{})),n(r,J(J({},t),{},{mask:i}))}}const kN=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=dr,symbol:r=!1,mask:i=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!n)return;const{prefix:f,iconName:h,icon:p}=n;return ef(J({type:"icon"},n),()=>(Os("beforeDOMElementCreation",{iconDefinition:n,params:e}),ye.autoA11y&&(o?c["aria-labelledby"]="".concat(ye.replacementClass,"-title-").concat(a||el()):(c["aria-hidden"]="true",c.focusable="false")),Zp({icons:{main:kd(p),mask:i?kd(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:f,iconName:h,transform:J(J({},dr),t),symbol:r,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var EN={mixout(){return{icon:AN(kN)}},hooks(){return{mutationObserverCallbacks(n){return n.treeCallback=yy,n.nodeCallback=xN,n}}},provides(n){n.i2svg=function(e){const{node:t=at,callback:r=()=>{}}=e;return yy(t,r)},n.generateSvgReplacementMutation=function(e,t){const{iconName:r,title:i,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:f}=t;return new Promise((h,p)=>{Promise.all([Ed(r,o),c.iconName?Ed(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(d=>{let[g,m]=d;h([e,Zp({icons:{main:g,mask:m},prefix:o,iconName:r,transform:a,symbol:l,maskId:u,title:i,titleId:s,extra:f,watchable:!0})])}).catch(p)})},n.generateAbstractIcon=function(e){let{children:t,attributes:r,main:i,transform:s,styles:o}=e;const a=Ju(o);a.length>0&&(r.style=a);let l;return Xp(s)&&(l=Ti("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),t.push(l||i.icon),{children:t,attributes:r}}}},TN={mixout(){return{layer(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:t=[]}=e;return ef({type:"layer"},()=>{Os("beforeDOMElementCreation",{assembler:n,params:e});let r=[];return n(i=>{Array.isArray(i)?i.map(s=>{r=r.concat(s.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(ye.cssPrefix,"-layers"),...t].join(" ")},children:r}]})}}}},ON={mixout(){return{counter(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:t=null,classes:r=[],attributes:i={},styles:s={}}=e;return ef({type:"counter",content:n},()=>(Os("beforeDOMElementCreation",{content:n,params:e}),aN({content:n.toString(),title:t,extra:{attributes:i,styles:s,classes:["".concat(ye.cssPrefix,"-layers-counter"),...r]}})))}}}},MN={mixout(){return{text(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=dr,title:r=null,classes:i=[],attributes:s={},styles:o={}}=e;return ef({type:"text",content:n},()=>(Os("beforeDOMElementCreation",{content:n,params:e}),hy({content:n,transform:J(J({},dr),t),title:r,extra:{attributes:s,styles:o,classes:["".concat(ye.cssPrefix,"-layers-text"),...i]}})))}}},provides(n){n.generateLayersText=function(e,t){const{title:r,transform:i,extra:s}=t;let o=null,a=null;if(bw){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return ye.autoA11y&&!r&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,hy({content:e.innerHTML,width:o,height:a,transform:i,title:r,extra:s,watchable:!0})])}}};const IN=new RegExp('"',"ug"),by=[1105920,1112319],_y=J(J(J(J({},{FontAwesome:{normal:"fas",400:"fas"}}),eP),vP),uP),Md=Object.keys(_y).reduce((n,e)=>(n[e.toLowerCase()]=_y[e],n),{}),PN=Object.keys(Md).reduce((n,e)=>{const t=Md[e];return n[e]=t[900]||[...Object.entries(t)][0][1],n},{});function NN(n){const e=n.replace(IN,""),t=$P(e,0),r=t>=by[0]&&t<=by[1],i=e.length===2?e[0]===e[1]:!1;return{value:Cd(i?e[0]:e),isSecondary:r||i}}function RN(n,e){const t=n.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(Md[t]||{})[i]||PN[t]}function wy(n,e){const t="".concat(yP).concat(e.replace(":","-"));return new Promise((r,i)=>{if(n.getAttribute(t)!==null)return r();const o=Uo(n.children).filter(h=>h.getAttribute(yd)===e)[0],a=ki.getComputedStyle(n,e),l=a.getPropertyValue("font-family"),c=l.match(SP),u=a.getPropertyValue("font-weight"),f=a.getPropertyValue("content");if(o&&!c)return n.removeChild(o),r();if(c&&f!=="none"&&f!==""){const h=a.getPropertyValue("content");let p=RN(l,u);const{value:d,isSecondary:g}=NN(h),m=c[0].startsWith("FontAwesome");let y=Qp(p,d),w=y;if(m){const b=WP(d);b.iconName&&b.prefix&&(y=b.iconName,p=b.prefix)}if(y&&!g&&(!o||o.getAttribute(Up)!==p||o.getAttribute(Kp)!==w)){n.setAttribute(t,w),o&&n.removeChild(o);const b=wN(),{extra:v}=b;v.attributes[yd]=e,Ed(y,p).then(S=>{const _=Zp(J(J({},b),{},{icons:{main:S,mask:Vw()},prefix:p,iconName:w,extra:v,watchable:!0})),k=at.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?n.insertBefore(k,n.firstChild):n.appendChild(k),k.outerHTML=_.map(M=>Sl(M)).join(`
`),n.removeAttribute(t),r()}).catch(i)}else r()}else r()})}function LN(n){return Promise.all([wy(n,"::before"),wy(n,"::after")])}function DN(n){return n.parentNode!==document.head&&!~_P.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(yd)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function Cy(n){if(Gr)return new Promise((e,t)=>{const r=Uo(n.querySelectorAll("*")).filter(DN).map(LN),i=em.begin("searchPseudoElements");Kw(),Promise.all(r).then(()=>{i(),Od(),e()}).catch(()=>{i(),Od(),t()})})}var FN={hooks(){return{mutationObserverCallbacks(n){return n.pseudoElementsCallback=Cy,n}}},provides(n){n.pseudoElements2svg=function(e){const{node:t=at}=e;ye.searchPseudoElements&&Cy(t)}}};let Sy=!1;var BN={mixout(){return{dom:{unwatch(){Kw(),Sy=!0}}}},hooks(){return{bootstrap(){gy(xd("mutationObserverCallbacks",{}))},noAuto(){vN()},watch(n){const{observeMutationsRoot:e}=n;Sy?Od():gy(xd("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const xy=n=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return n.toLowerCase().split(" ").reduce((t,r)=>{const i=r.toLowerCase().split("-"),s=i[0];let o=i.slice(1).join("-");if(s&&o==="h")return t.flipX=!0,t;if(s&&o==="v")return t.flipY=!0,t;if(o=parseFloat(o),isNaN(o))return t;switch(s){case"grow":t.size=t.size+o;break;case"shrink":t.size=t.size-o;break;case"left":t.x=t.x-o;break;case"right":t.x=t.x+o;break;case"up":t.y=t.y-o;break;case"down":t.y=t.y+o;break;case"rotate":t.rotate=t.rotate+o;break}return t},e)};var $N={mixout(){return{parse:{transform:n=>xy(n)}}},hooks(){return{parseNodeAttributes(n,e){const t=e.getAttribute("data-fa-transform");return t&&(n.transform=xy(t)),n}}},provides(n){n.generateAbstractTransformGrouping=function(e){let{main:t,transform:r,containerWidth:i,iconWidth:s}=e;const o={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),c="rotate(".concat(r.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},f={transform:"translate(".concat(s/2*-1," -256)")},h={outer:o,inner:u,path:f};return{tag:"g",attributes:J({},h.outer),children:[{tag:"g",attributes:J({},h.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:J(J({},t.icon.attributes),h.path)}]}]}}}};const Jf={x:0,y:0,width:"100%",height:"100%"};function Ay(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function jN(n){return n.tag==="g"?n.children:[n]}var HN={hooks(){return{parseNodeAttributes(n,e){const t=e.getAttribute("data-fa-mask"),r=t?Zu(t.split(" ").map(i=>i.trim())):Vw();return r.prefix||(r.prefix=Ei()),n.mask=r,n.maskId=e.getAttribute("data-fa-mask-id"),n}}},provides(n){n.generateAbstractMask=function(e){let{children:t,attributes:r,main:i,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=i,{width:u,icon:f}=s,h=NP({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:J(J({},Jf),{},{fill:"white"})},d=c.children?{children:c.children.map(Ay)}:{},g={tag:"g",attributes:J({},h.inner),children:[Ay(J({tag:c.tag,attributes:J(J({},c.attributes),h.path)},d))]},m={tag:"g",attributes:J({},h.outer),children:[g]},y="mask-".concat(o||el()),w="clip-".concat(o||el()),b={tag:"mask",attributes:J(J({},Jf),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,m]},v={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:jN(f)},b]};return t.push(v,{tag:"rect",attributes:J({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(y,")")},Jf)}),{children:t,attributes:r}}}},VN={provides(n){let e=!1;ki.matchMedia&&(e=ki.matchMedia("(prefers-reduced-motion: reduce)").matches),n.missingIconAbstract=function(){const t=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:J(J({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=J(J({},i),{},{attributeName:"opacity"}),o={tag:"circle",attributes:J(J({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:J(J({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:J(J({},s),{},{values:"1;0;1;1;0;1;"})}),t.push(o),t.push({tag:"path",attributes:J(J({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:J(J({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:J(J({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:J(J({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}},zN={hooks(){return{parseNodeAttributes(n,e){const t=e.getAttribute("data-fa-symbol"),r=t===null?!1:t===""?!0:t;return n.symbol=r,n}}}},GN=[DP,EN,TN,ON,MN,FN,BN,$N,HN,VN,zN];eN(GN,{mixoutsTo:kn});kn.noAuto;kn.config;kn.library;kn.dom;const Id=kn.parse;kn.findIconDefinition;kn.toHtml;const WN=kn.icon;kn.layer;kn.text;kn.counter;function ky(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Pr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ky(Object(t),!0).forEach(function(r){ln(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ky(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UN(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KN(n){var e=UN(n,"string");return typeof e=="symbol"?e:e+""}function ru(n){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ru(n)}function ln(n,e,t){return e=KN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function YN(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function qN(n,e){if(n==null)return{};var t=YN(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}var XN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qw={exports:{}};(function(n){(function(e){var t=function(y,w,b){if(!c(w)||f(w)||h(w)||p(w)||l(w))return w;var v,S=0,_=0;if(u(w))for(v=[],_=w.length;S<_;S++)v.push(t(y,w[S],b));else{v={};for(var k in w)Object.prototype.hasOwnProperty.call(w,k)&&(v[y(k,b)]=t(y,w[k],b))}return v},r=function(y,w){w=w||{};var b=w.separator||"_",v=w.split||/(?=[A-Z])/;return y.split(v).join(b)},i=function(y){return d(y)?y:(y=y.replace(/[\-_\s]+(.)?/g,function(w,b){return b?b.toUpperCase():""}),y.substr(0,1).toLowerCase()+y.substr(1))},s=function(y){var w=i(y);return w.substr(0,1).toUpperCase()+w.substr(1)},o=function(y,w){return r(y,w).toLowerCase()},a=Object.prototype.toString,l=function(y){return typeof y=="function"},c=function(y){return y===Object(y)},u=function(y){return a.call(y)=="[object Array]"},f=function(y){return a.call(y)=="[object Date]"},h=function(y){return a.call(y)=="[object RegExp]"},p=function(y){return a.call(y)=="[object Boolean]"},d=function(y){return y=y-0,y===y},g=function(y,w){var b=w&&"process"in w?w.process:w;return typeof b!="function"?y:function(v,S){return b(v,y,S)}},m={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(y,w){return t(g(i,w),y)},decamelizeKeys:function(y,w){return t(g(o,w),y,w)},pascalizeKeys:function(y,w){return t(g(s,w),y)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};n.exports?n.exports=m:e.humps=m})(XN)})(qw);var JN=qw.exports,QN=["class","style"];function ZN(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.indexOf(":"),i=JN.camelize(t.slice(0,r)),s=t.slice(r+1).trim();return e[i]=s,e},{})}function eR(n){return n.split(/\s+/).reduce(function(e,t){return e[t]=!0,e},{})}function Xw(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n=="string")return n;var r=(n.children||[]).map(function(l){return Xw(l)}),i=Object.keys(n.attributes||{}).reduce(function(l,c){var u=n.attributes[c];switch(c){case"class":l.class=eR(u);break;case"style":l.style=ZN(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});t.class;var s=t.style,o=s===void 0?{}:s,a=qN(t,QN);return $o(n.tag,Pr(Pr(Pr({},e),{},{class:i.class,style:Pr(Pr({},i.style),o)},i.attrs),a),r)}var Jw=!1;try{Jw=!0}catch{}function tR(){if(!Jw&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function Qf(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?ln({},n,e):{}}function nR(n){var e,t=(e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-li":n.listItem,"fa-inverse":n.inverse,"fa-flip":n.flip===!0,"fa-flip-horizontal":n.flip==="horizontal"||n.flip==="both","fa-flip-vertical":n.flip==="vertical"||n.flip==="both"},ln(ln(ln(ln(ln(ln(ln(ln(ln(ln(e,"fa-".concat(n.size),n.size!==null),"fa-rotate-".concat(n.rotation),n.rotation!==null),"fa-pull-".concat(n.pull),n.pull!==null),"fa-swap-opacity",n.swapOpacity),"fa-bounce",n.bounce),"fa-shake",n.shake),"fa-beat",n.beat),"fa-fade",n.fade),"fa-beat-fade",n.beatFade),"fa-flash",n.flash),ln(ln(e,"fa-spin-pulse",n.spinPulse),"fa-spin-reverse",n.spinReverse));return Object.keys(t).map(function(r){return t[r]?r:null}).filter(function(r){return r})}function Ey(n){if(n&&ru(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(Id.icon)return Id.icon(n);if(n===null)return null;if(ru(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}var rR=Ge({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,t){var r=t.attrs,i=At(function(){return Ey(e.icon)}),s=At(function(){return Qf("classes",nR(e))}),o=At(function(){return Qf("transform",typeof e.transform=="string"?Id.transform(e.transform):e.transform)}),a=At(function(){return Qf("mask",Ey(e.mask))}),l=At(function(){return WN(i.value,Pr(Pr(Pr(Pr({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});gr(l,function(u){if(!u)return tR("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var c=At(function(){return l.value?Xw(l.value.abstract[0],{},r):null});return function(){return c.value}}});/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const iR={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},sR=iR,oR={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},aR={prefix:"fas",iconName:"square-plus",icon:[448,512,[61846,"plus-square"],"f0fe","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM200 344l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},lR=aR,cR={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},uR={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},fR={prefix:"fas",iconName:"text-width",icon:[448,512,[],"f035","M64 128l0-32 128 0 0 128-16 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-16 0 0-128 128 0 0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-48c0-26.5-21.5-48-48-48L224 32 48 32C21.5 32 0 53.5 0 80l0 48c0 17.7 14.3 32 32 32s32-14.3 32-32zM9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3l64 64c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6l0-32 192 0 0 32c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l64-64c12.5-12.5 12.5-32.8 0-45.3l-64-64c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 32-192 0 0-32c0-12.9-7.8-24.6-19.8-29.6s-25.7-2.2-34.9 6.9l-64 64z"]},hR={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},dR={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},pR=dR,mR={prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M463.5 224l8.5 0c13.3 0 24-10.7 24-24l0-128c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l119.5 0z"]},gR={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},vR={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},yR=vR,bR={prefix:"fas",iconName:"arrow-up",icon:[384,512,[8593],"f062","M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"]},_R={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},wR=_R,CR={prefix:"fas",iconName:"map",icon:[576,512,[128506,62072],"f279","M384 476.1L192 421.2l0-385.3L384 90.8l0 385.3zm32-1.2l0-386.5L543.1 37.5c15.8-6.3 32.9 5.3 32.9 22.3l0 334.8c0 9.8-6 18.6-15.1 22.3L416 474.8zM15.1 95.1L160 37.2l0 386.5L32.9 474.5C17.1 480.8 0 469.2 0 452.2L0 117.4c0-9.8 6-18.6 15.1-22.3z"]},SR={prefix:"fas",iconName:"clock-rotate-left",icon:[512,512,["history"],"f1da","M75 75L41 41C25.9 25.9 0 36.6 0 57.9L0 168c0 13.3 10.7 24 24 24l110.1 0c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1c0-13.3-10.7-24-24-24z"]},xR=SR;function Lt(n){this.content=n}Lt.prototype={constructor:Lt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),s=r.content.slice();return i==-1?s.push(t||n,e):(s[i+1]=e,t&&(s[i]=t)),new Lt(s)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Lt(t)},addToStart:function(n,e){return new Lt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Lt(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),s=r.find(n);return i.splice(s==-1?i.length:s,0,e,t),new Lt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Lt.from(n),n.size?new Lt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Lt.from(n),n.size?new Lt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Lt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Lt.from=function(n){if(n instanceof Lt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Lt(e)};function Qw(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),s=e.child(r);if(i==s){t+=i.nodeSize;continue}if(!i.sameMarkup(s))return t;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)t++;return t}if(i.content.size||s.content.size){let o=Qw(i.content,s.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Zw(n,e,t,r){for(let i=n.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:t,b:r};let o=n.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=Zw(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class q{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,s){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let s="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new q(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let s=0,o=0;o<t;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=l}return new q(r,i)}cutByIndex(e,t){return e==t?q.empty:e==0&&t==this.content.length?this:new q(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),s=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new q(i,s)}addToStart(e){return new q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Qw(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Zw(this,e,t,r)}findIndex(e,t=-1){if(e==0)return cc(0,e);if(e==this.size)return cc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||t>0?cc(r+1,o):cc(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return q.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new q(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return q.empty;let t,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(t||(t=e.slice(0,i)),t[t.length-1]=s.withText(t[t.length-1].text+s.text)):t&&t.push(s)}return new q(t||e,r)}static from(e){if(!e)return q.empty;if(e instanceof q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}q.empty=new q([],0);const Zf={index:0,offset:0};function cc(n,e){return Zf.index=n,Zf.offset=e,Zf}function iu(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!iu(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!iu(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let nt=class Pd{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))t||(t=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&iu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Pd.none;if(e instanceof Pd)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};nt.none=[];class su extends Error{}class ae{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=tC(this.content,e+this.openStart,t);return r&&new ae(r,this.openStart,this.openEnd)}removeBetween(e,t){return new ae(eC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return ae.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ae(q.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(t||!s.type.spec.isolating);s=s.lastChild)i++;return new ae(e,r,i)}}ae.empty=new ae(q.empty,0,0);function eC(n,e,t){let{index:r,offset:i}=n.findIndex(e),s=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||s.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,s.copy(eC(s.content,e-i-1,t-i-1)))}function tC(n,e,t,r){let{index:i,offset:s}=n.findIndex(e),o=n.maybeChild(i);if(s==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=tC(o.content,e-s-1,t);return a&&n.replaceChild(i,o.copy(a))}function AR(n,e,t){if(t.openStart>n.depth)throw new su("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new su("Inconsistent open depths");return nC(n,e,t,0)}function nC(n,e,t,r){let i=n.index(r),s=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=nC(n,e,t,r+1);return s.copy(s.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return bs(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=kR(t,n);return bs(s,iC(n,o,a,e,r))}else return bs(s,ou(n,e,r))}function rC(n,e){if(!e.type.compatibleContent(n.type))throw new su("Cannot join "+e.type.name+" onto "+n.type.name)}function Nd(n,e,t){let r=n.node(t);return rC(r,e.node(t)),r}function ys(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Ra(n,e,t,r){let i=(e||n).node(t),s=0,o=e?e.index(t):i.childCount;n&&(s=n.index(t),n.depth>t?s++:n.textOffset&&(ys(n.nodeAfter,r),s++));for(let a=s;a<o;a++)ys(i.child(a),r);e&&e.depth==t&&e.textOffset&&ys(e.nodeBefore,r)}function bs(n,e){return n.type.checkContent(e),n.copy(e)}function iC(n,e,t,r,i){let s=n.depth>i&&Nd(n,e,i+1),o=r.depth>i&&Nd(t,r,i+1),a=[];return Ra(null,n,i,a),s&&o&&e.index(i)==t.index(i)?(rC(s,o),ys(bs(s,iC(n,e,t,r,i+1)),a)):(s&&ys(bs(s,ou(n,e,i+1)),a),Ra(e,t,i,a),o&&ys(bs(o,ou(t,r,i+1)),a)),Ra(r,null,i,a),new q(a)}function ou(n,e,t){let r=[];if(Ra(null,n,t,r),n.depth>t){let i=Nd(n,e,t+1);ys(bs(i,ou(n,e,t+1)),r)}return Ra(e,null,t,r),new q(r)}function kR(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let s=t-1;s>=0;s--)i=e.node(s).copy(q.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class nl{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return nt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new au(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,s=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new nl(t,r,s)}static resolveCached(e,t){let r=Ty.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==t)return o}else Ty.set(e,r=new ER);let i=r.elts[r.i]=nl.resolve(e,t);return r.i=(r.i+1)%TR,i}}class ER{constructor(){this.elts=[],this.i=0}}const TR=12,Ty=new WeakMap;class au{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const OR=Object.create(null);let yi=class Rd{constructor(e,t,r,i=nt.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||q.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&iu(this.attrs,t||e.defaultAttrs||OR)&&nt.sameSet(this.marks,r||nt.none)}copy(e=null){return e==this.content?this:new Rd(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Rd(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return ae.empty;let i=this.resolve(e),s=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ae(c,i.depth-o,s.depth-o)}replace(e,t,r){return AR(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return nl.resolveCached(this,e)}resolveNoCache(e){return nl.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),sC(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=q.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=nt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!nt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=q.fromJSON(e,t.content),s=e.nodeType(t.type).create(t.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};yi.prototype.text=void 0;class lu extends yi{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):sC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new lu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new lu(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function sC(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Ms{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new MR(e,t);if(r.next==null)return Ms.empty;let i=oC(r);r.next&&r.err("Unexpected trailing text");let s=FR(DR(i));return BR(s,r),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let s=t;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let h=s(f,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Ms.empty=new Ms(!0);class MR{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function oC(n){let e=[];do e.push(IR(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function IR(n){let e=[];do e.push(PR(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function PR(n){let e=LR(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=NR(n,e);else break;return e}function Oy(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function NR(n,e){let t=Oy(n),r=t;return n.eat(",")&&(n.next!="}"?r=Oy(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function RR(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let s in t){let o=t[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function LR(n){if(n.eat("(")){let e=oC(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=RR(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function DR(n){let e=[[]];return i(s(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=t())}else if(o.type=="star"){let l=t();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function aC(n,e){return e-n}function My(n,e){let t=[];return r(e),t.sort(aC);function r(i){let s=n[i];if(s.length==1&&!s[0].term)return r(s[0].to);t.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&t.indexOf(l)==-1&&r(l)}}}function FR(n){let e=Object.create(null);return t(My(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);My(n,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Ms(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(aC);s.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return s}}function BR(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function lC(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function cC(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let s=n[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function uC(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let s=n[i];s.validate&&s.validate(e[i])}}function fC(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new jR(n,r,e[r]);return t}let Iy=class hC{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=fC(e,r.attrs),this.defaultAttrs=lC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ms.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:cC(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new yi(this,this.computeAttrs(e),q.from(t),nt.setFrom(r))}createChecked(e=null,t,r){return t=q.from(t),this.checkContent(t),new yi(this,this.computeAttrs(e),t,nt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=q.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),s=i&&i.fillBefore(q.empty,!0);return s?new yi(this,e,t.append(s),nt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){uC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:nt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((s,o)=>r[s]=new hC(s,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function $R(n,e,t){let r=t.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${s}`)}}class jR{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?$R(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class tf{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=fC(e,i.attrs),this.excluded=null;let s=lC(this.attrs);this.instance=s?new nt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new nt(this,cC(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new tf(s,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){uC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class dC{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=Lt.from(e.nodes),t.marks=Lt.from(e.marks||{}),this.nodes=Iy.compile(this.spec.nodes,this),this.marks=tf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Ms.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?Py(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Py(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Iy){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new lu(r,r.defaultAttrs,e,nt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return yi.fromJSON(this,e)}markFromJSON(e){return nt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Py(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],s=n.marks[i],o=s;if(s)t.push(s);else for(let a in n.marks){let l=n.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function HR(n){return n.tag!=null}function VR(n){return n.style!=null}class bi{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(HR(i))this.tags.push(i);else if(VR(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,t={}){let r=new Ry(this,t,!1);return r.addAll(e,nt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Ry(this,t,!0);return r.addAll(e,nt.none,t.from,t.to),ae.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(WR(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||t.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,t,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<s)break}t.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Ly(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Ly(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new bi(e,bi.schemaRules(e)))}}const pC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},zR={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mC={ol:!0,ul:!0},cu=1,uu=2,La=4;function Ny(n,e,t){return e!=null?(e?cu:0)|(e==="full"?uu:0):n&&n.whitespace=="pre"?cu|uu:t&~La}class uc{constructor(e,t,r,i,s,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=nt.none,this.match=s||(o&La?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(q.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&cu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let t=q.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(q.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!pC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Ry{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let i=t.topNode,s,o=Ny(null,t.preserveWhitespace,0)|(r?La:0);i?s=new uc(i.type,i.attrs,nt.none,!0,t.topMatch||i.type.contentMatch,o):r?s=new uc(null,null,nt.none,!0,null,o):s=new uc(e.schema.topNodeType,null,nt.none,!0,null,o),this.nodes=[s],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top;if(i.options&uu||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i.options&cu)i.options&uu?r=r.replace(/\r\n?/g,`
`):r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=i.content[i.content.length-1],o=e.previousSibling;(!s||o&&o.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=e.nodeName.toLowerCase(),s;mC.hasOwnProperty(i)&&this.parser.normalizeLists&&GR(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));if(o?o.ignore:zR.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let a,l=this.top,c=this.needsBlock;if(pC.hasOwnProperty(i))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);return}let u=o&&o.skip?t:this.readStyles(e,t);u&&this.addAll(e,u),a&&this.sync(l),this.needsBlock=c}else{let a=this.readStyles(e,t);a&&this.addElementByRule(e,o,a,o.consuming===!1?s:void 0)}}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,i){let s,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(o,t.attrs||null,r,t.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,t,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,t);this.findAtPoint(e,s)}findPlace(e,t){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=o,!a.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)t=this.enterInner(r[s],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=nt.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):Dy(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,t,r,i){let s=this.findPlace(e.create(t),r);return s&&(s=this.enterInner(e,t,r,!0,i)),s}enterInner(e,t,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Ny(e,s,o.options);o.options&La&&o.content.length==0&&(a|=La);let l=nt.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Dy(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new uc(e,t,l,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function GR(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&mC.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function WR(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Ly(n){let e={};for(let t in n)e[t]=n[t];return e}function Dy(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class js{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=eh(t).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=$c(eh(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,t);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&$c(eh(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return $c(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new js(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Fy(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Fy(e.marks)}}function Fy(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function eh(n){return n.document||window.document}const By=new WeakMap;function UR(n){let e=By.get(n);return e===void 0&&By.set(n,e=KR(n)),e}function KR(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function $c(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=UR(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(t=i.slice(0,o),i=i.slice(o+1));let a,l=t?n.createElementNS(t,i):n.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let h=f.indexOf(" ");h>0?l.setAttributeNS(f.slice(0,h),f.slice(h+1),c[f]):l.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:d}=$c(n,h,t,r);if(l.appendChild(p),d){if(a)throw new RangeError("Multiple content holes");a=d}}}return{dom:l,contentDOM:a}}const gC=65535,vC=Math.pow(2,16);function YR(n,e){return n+e*vC}function $y(n){return n&gC}function qR(n){return(n-(n&gC))/vC}const yC=1,bC=2,jc=4,_C=8;class Ld{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&_C)>0}get deletedBefore(){return(this.delInfo&(yC|jc))>0}get deletedAfter(){return(this.delInfo&(bC|jc))>0}get deletedAcross(){return(this.delInfo&jc)>0}}class _n{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&_n.empty)return _n.empty}recover(e){let t=0,r=$y(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+qR(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],f=l+c;if(e<=f){let h=c?e==l?-1:e==f?1:t:t,p=l+i+(h<0?0:u);if(r)return p;let d=e==(t<0?l:f)?null:YR(a/3,e-l),g=e==l?bC:e==f?yC:jc;return(t<0?e!=l:e!=f)&&(g|=_C),new Ld(p,g,d)}i+=u-c}return r?e+i:new Ld(e+i,0,null)}touches(e,t){let r=0,i=$y(t),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+t],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new _n(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?_n.empty:new _n(e<0?[0,-e,0]:[0,0,e])}}_n.empty=new _n([]);class mo{constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}slice(e=0,t=this.maps.length){return new mo(this.maps,this.mirror,e,t)}copy(){return new mo(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new mo;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Ld(e,i,null)}}const th=Object.create(null);class Kt{getMap(){return _n.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=th[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in th)throw new RangeError("Duplicate use of step JSON ID "+e);return th[e]=t,t.prototype.jsonID=e,t}}class _t{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new _t(e,null)}static fail(e){return new _t(null,e)}static fromReplace(e,t,r,i){try{return _t.ok(e.replace(t,r,i))}catch(s){if(s instanceof su)return _t.fail(s.message);throw s}}}function nm(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let s=n.child(i);s.content.size&&(s=s.copy(nm(s.content,e,s))),s.isInline&&(s=e(s,t,i)),r.push(s)}return q.fromArray(r)}class fi extends Kt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ae(nm(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return _t.fromReplace(e,this.from,this.to,s)}invert(){return new mr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new fi(t.pos,r.pos,this.mark)}merge(e){return e instanceof fi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new fi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new fi(t.from,t.to,e.markFromJSON(t.mark))}}Kt.jsonID("addMark",fi);class mr extends Kt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new ae(nm(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return _t.fromReplace(e,this.from,this.to,r)}invert(){return new fi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new mr(t.pos,r.pos,this.mark)}merge(e){return e instanceof mr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new mr(t.from,t.to,e.markFromJSON(t.mark))}}Kt.jsonID("removeMark",mr);class hi extends Kt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return _t.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return _t.fromReplace(e,this.pos,this.pos+1,new ae(q.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new hi(this.pos,t.marks[i]);return new hi(this.pos,this.mark)}}return new Eo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new hi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new hi(t.pos,e.markFromJSON(t.mark))}}Kt.jsonID("addNodeMark",hi);class Eo extends Kt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return _t.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return _t.fromReplace(e,this.pos,this.pos+1,new ae(q.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new hi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Eo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Eo(t.pos,e.markFromJSON(t.mark))}}Kt.jsonID("removeNodeMark",Eo);class Ot extends Kt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Dd(e,this.from,this.to)?_t.fail("Structure replace would overwrite content"):_t.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new _n([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ot(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ot(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Ot)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ot(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?ae.empty:new ae(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ot(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ot(t.from,t.to,ae.fromJSON(e,t.slice),!!t.structure)}}Kt.jsonID("replace",Ot);class It extends Kt{constructor(e,t,r,i,s,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Dd(e,this.from,this.gapFrom)||Dd(e,this.gapTo,this.to)))return _t.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return _t.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?_t.fromReplace(e,this.from,this.to,r):_t.fail("Content does not fit in gap")}getMap(){return new _n([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new It(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||s>r.pos?null:new It(t.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new It(t.from,t.to,t.gapFrom,t.gapTo,ae.fromJSON(e,t.slice),t.insert,!!t.structure)}}Kt.jsonID("replaceAround",It);function Dd(n,e,t){let r=n.resolve(e),i=t-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function XR(n,e,t,r){let i=[],s=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,t),d=r.addToSet(f);for(let g=0;g<f.length;g++)f[g].isInSet(d)||(o&&o.to==h&&o.mark.eq(f[g])?o.to=p:i.push(o=new mr(h,p,f[g])));a&&a.to==h?a.to=p:s.push(a=new fi(h,p,r))}}),i.forEach(l=>n.step(l)),s.forEach(l=>n.step(l))}function JR(n,e,t,r){let i=[],s=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof tf){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let f=l[u],h;for(let p=0;p<i.length;p++){let d=i[p];d.step==s-1&&f.eq(i[p].style)&&(h=d)}h?(h.to=c,h.step=s):i.push({style:f,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>n.step(new mr(o.from,o.to,o.style)))}function rm(n,e,t,r=t.contentMatch,i=!0){let s=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)o.push(new Ot(a,u,ae.empty));else{r=f;for(let h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||n.step(new mr(a,u,c.marks[h]));if(i&&c.isText&&t.whitespace!="pre"){let h,p=/\r?\n|\r/g,d;for(;h=p.exec(c.text);)d||(d=new ae(q.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new Ot(a+h.index,a+h.index+h[0].length,d))}}a=u}if(!r.validEnd){let l=r.fillBefore(q.empty,!0);n.replace(a,a,new ae(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function QR(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Ko(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),s=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(s,o,t))return r;if(r==0||i.type.spec.isolating||!QR(i,s,o))break}return null}function ZR(n,e,t){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=q.empty,f=0;for(let d=s,g=!1;d>t;d--)g||r.index(d)>0?(g=!0,u=q.from(r.node(d).copy(u)),f++):l--;let h=q.empty,p=0;for(let d=s,g=!1;d>t;d--)g||i.after(d+1)<i.end(d)?(g=!0,h=q.from(i.node(d).copy(h)),p++):c++;n.step(new It(l,c,o,a,new ae(u.append(h),f,p),u.size-f,!0))}function im(n,e,t=null,r=n){let i=eL(n,e),s=i&&tL(r,e);return s?i.map(jy).concat({type:e,attrs:t}).concat(s.map(jy)):null}function jy(n){return{type:n,attrs:null}}function eL(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return t.canReplaceWith(r,i,o)?s:null}function tL(n,e){let{parent:t,startIndex:r,endIndex:i}=n,s=t.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function nL(n,e,t){let r=q.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=q.from(t[o].type.create(t[o].attrs,r))}let i=e.start,s=e.end;n.step(new It(i,s,i,s,new ae(r,0,0),t.length,!0))}function rL(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&iL(n.doc,n.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",d=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!d?c=!1:!p&&d&&(c=!0)}c===!1&&CC(n,o,a,s),rm(n,n.mapping.slice(s).map(a,1),r,void 0,c===null);let u=n.mapping.slice(s),f=u.map(a,1),h=u.map(a+o.nodeSize,1);return n.step(new It(f,h,f+1,h-1,new ae(q.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&wC(n,o,a,s),!1}})}function wC(n,e,t,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=n.mapping.slice(r).map(t+1+s+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function CC(n,e,t,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+s);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function iL(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function sL(n,e,t,r,i){let s=n.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");t||(t=s.type);let o=t.create(r,null,i||s.marks);if(s.isLeaf)return n.replaceWith(e,e+s.nodeSize,o);if(!t.validContent(s.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new It(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ae(q.from(o),0,0),1,!0))}function go(n,e,t=1,r){let i=n.resolve(e),s=i.depth-t,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=t-2;c>s;c--,u--){let f=i.node(c),h=i.index(c);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),d=r&&r[u+1];d&&(p=p.replaceChild(0,d.type.create(d.attrs)));let g=r&&r[u]||f;if(!f.canReplace(h+1,f.childCount)||!g.type.validContent(p))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function oL(n,e,t=1,r){let i=n.doc.resolve(e),s=q.empty,o=q.empty;for(let a=i.depth,l=i.depth-t,c=t-1;a>l;a--,c--){s=q.from(i.node(a).copy(s));let u=r&&r[c];o=q.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}n.step(new Ot(e,e,new ae(s.append(o),t,t),!0))}function $i(n,e){let t=n.resolve(e),r=t.index();return SC(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function aL(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?n.type.schema.nodes.text:s.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(s.marks))return!1}return t.validEnd}function SC(n,e){return!!(n&&e&&!n.isLeaf&&aL(n,e))}function nf(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):t>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&SC(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function lL(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,s=n.doc.resolve(e-t),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",f=!!o.contentMatch.matchType(i);u&&!f?r=!1:!u&&f&&(r=!0)}let a=n.steps.length;if(r===!1){let u=n.doc.resolve(e+t);CC(n,u.node(),u.before(),a)}o.inlineContent&&rm(n,e+t-1,o,s.node().contentMatchAt(s.index()),r==null);let l=n.mapping.slice(a),c=l.map(e-t);if(n.step(new Ot(c,l.map(e+t,-1),ae.empty,!0)),r===!0){let u=n.doc.resolve(c);wC(n,u.node(),u.before(),n.steps.length)}return n}function cL(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,t))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,t))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function xC(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let s=0;s<t.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(t.openStart==0&&t.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let f=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function rf(n,e,t=e,r=ae.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),s=n.resolve(t);return AC(i,s,r)?new Ot(e,t,r):new uL(i,s,r).fit()}function AC(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class uL{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ae(s,o,a);return e>-1?new It(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new Ot(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=t.firstChild;if(t.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}t=s.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=nh(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(t==1&&(o?c.matchType(o.type)||(f=c.fillBefore(q.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:f};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=nh(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ae(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=nh(e,t);if(i.childCount<=1&&t>0){let s=e.size-t<=t+i.size;this.unplaced=new ae(va(e,t-1,1),t-1,s?t-1:r)}else this.unplaced=new ae(va(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:s}){for(;this.depth>t;)this.closeFrontierNode();if(s)for(let g=0;g<s.length;g++)this.openFrontierNode(s[g]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:f,type:h}=this.frontier[t];if(i){for(let g=0;g<i.childCount;g++)u.push(i.child(g));f=f.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let g=a.child(c),m=f.matchType(g.type);if(!m)break;c++,(c>1||l==0||g.content.size)&&(f=m,u.push(kC(g.mark(h.allowedMarks(g.marks)),c==1?l:0,c==a.childCount?p:-1)))}let d=c==a.childCount;d||(p=-1),this.placed=ya(this.placed,t,q.from(u)),this.frontier[t].match=f,d&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,m=a;g<p;g++){let y=m.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),m=y.content}this.unplaced=d?e==0?ae.empty:new ae(va(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new ae(va(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!rh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],s=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=rh(e,t,i,r,s);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=rh(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:s?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=ya(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ya(this.placed,this.depth,q.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(q.empty,!0);t.childCount&&(this.placed=ya(this.placed,this.frontier.length,t))}}function va(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(va(n.firstChild.content,e-1,t)))}function ya(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(ya(n.lastChild.content,e-1,t)))}function nh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function kC(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,kC(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(q.empty,!0)))),n.copy(r)}function rh(n,e,t,r,i){let s=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==s.childCount&&!t.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!fL(t,s.content,o)?a:null}function fL(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function hL(n){return n.spec.defining||n.spec.definingForContent}function dL(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),s=n.doc.resolve(t);if(AC(i,s,r))return n.step(new Ot(e,t,r));let o=TC(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let d=i.node(h).type.spec;if(d.defining||d.definingAsContext||d.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let d=h.firstChild;if(c.push(d),p==r.openStart)break;h=d.content}for(let h=u-1;h>=0;h--){let p=c[h],d=hL(p.type);if(d&&!p.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(d||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),d=c[p];if(d)for(let g=0;g<o.length;g++){let m=o[(g+l)%o.length],y=!0;m<0&&(y=!1,m=-m);let w=i.node(m-1),b=i.index(m-1);if(w.canReplaceWith(b,b,d.type,d.marks))return n.replace(i.before(m),y?s.after(m):t,new ae(EC(r.content,0,r.openStart,p),p,r.openEnd))}}let f=n.steps.length;for(let h=o.length-1;h>=0&&(n.replace(e,t,r),!(n.steps.length>f));h--){let p=o[h];p<0||(e=i.before(p),t=s.after(p))}}function EC(n,e,t,r,i){if(e<t){let s=n.firstChild;n=n.replaceChild(0,s.copy(EC(s.content,e+1,t,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(n).append(n);n=o.append(s.matchFragment(o).fillBefore(q.empty,!0))}return n}function pL(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=cL(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new ae(q.from(r),0,0))}function mL(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),s=TC(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function TC(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let s=n.start(i);if(s<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&t.push(i)}return t}class vo extends Kt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return _t.fail("No node at attribute step's position");let r=Object.create(null);for(let s in t.attrs)r[s]=t.attrs[s];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return _t.fromReplace(e,this.pos,this.pos+1,new ae(q.from(i),0,t.isLeaf?0:1))}getMap(){return _n.empty}invert(e){return new vo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new vo(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new vo(t.pos,t.attr,t.value)}}Kt.jsonID("attr",vo);class rl extends Kt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return _t.ok(r)}getMap(){return _n.empty}invert(e){return new rl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new rl(t.attr,t.value)}}Kt.jsonID("docAttr",rl);let To=class extends Error{};To=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};To.prototype=Object.create(Error.prototype);To.prototype.constructor=To;To.prototype.name="TransformError";class gL{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new mo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new To(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=ae.empty){let i=rf(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new ae(q.from(r),0,0))}delete(e,t){return this.replace(e,t,ae.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return dL(this,e,t,r),this}replaceRangeWith(e,t,r){return pL(this,e,t,r),this}deleteRange(e,t){return mL(this,e,t),this}lift(e,t){return ZR(this,e,t),this}join(e,t=1){return lL(this,e,t),this}wrap(e,t){return nL(this,e,t),this}setBlockType(e,t=e,r,i=null){return rL(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return sL(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new vo(e,t,r)),this}setDocAttribute(e,t){return this.step(new rl(e,t)),this}addNodeMark(e,t){return this.step(new hi(e,t)),this}removeNodeMark(e,t){if(!(t instanceof nt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new Eo(e,t)),this}split(e,t=1,r){return oL(this,e,t,r),this}addMark(e,t,r){return XR(this,e,t,r),this}removeMark(e,t,r){return JR(this,e,t,r),this}clearIncompatible(e,t,r){return rm(this,e,t,r),this}}const ih=Object.create(null);class Ie{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new vL(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=ae.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?ae.empty:t),a==0&&zy(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),zy(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new Te(e):Qs(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=t<0?Qs(e.node(0),e.node(s),e.before(s+1),e.index(s),t,r):Qs(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new tr(e.node(0))}static atStart(e){return Qs(e,e,0,0,1)||new tr(e)}static atEnd(e){return Qs(e,e,e.content.size,e.childCount,-1)||new tr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ih[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ih)throw new RangeError("Duplicate use of selection JSON ID "+e);return ih[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Te.between(this.$anchor,this.$head).getBookmark()}}Ie.prototype.visible=!0;class vL{constructor(e,t){this.$from=e,this.$to=t}}let Hy=!1;function Vy(n){!Hy&&!n.parent.inlineContent&&(Hy=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Te extends Ie{constructor(e,t=e){Vy(e),Vy(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ie.near(r);let i=e.resolve(t.map(this.anchor));return new Te(i.parent.inlineContent?i:r,r)}replace(e,t=ae.empty){if(super.replace(e,t),t==ae.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Te&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new sf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Te(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let s=Ie.findFrom(t,r,!0)||Ie.findFrom(t,-r,!0);if(s)t=s.$head;else return Ie.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(Ie.findFrom(e,-r,!0)||Ie.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Te(e,t)}}Ie.jsonID("text",Te);class sf{constructor(e,t){this.anchor=e,this.head=t}map(e){return new sf(e.map(this.anchor),e.map(this.head))}resolve(e){return Te.between(e.resolve(this.anchor),e.resolve(this.head))}}class Se extends Ie{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),s=e.resolve(i);return r?Ie.near(s):new Se(s)}content(){return new ae(q.from(this.node),0,0)}eq(e){return e instanceof Se&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new sm(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Se(e.resolve(t.anchor))}static create(e,t){return new Se(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Se.prototype.visible=!1;Ie.jsonID("node",Se);class sm{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new sf(r,r):new sm(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Se.isSelectable(r)?new Se(t):Ie.near(t)}}class tr extends Ie{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=ae.empty){if(t==ae.empty){e.delete(0,e.doc.content.size);let r=Ie.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new tr(e)}map(e){return new tr(e)}eq(e){return e instanceof tr}getBookmark(){return yL}}Ie.jsonID("all",tr);const yL={map(){return this},resolve(n){return new tr(n)}};function Qs(n,e,t,r,i,s=!1){if(e.inlineContent)return Te.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Se.isSelectable(a))return Se.create(n,t-(i<0?a.nodeSize:0))}else{let l=Qs(n,a,t+i,i<0?a.childCount:0,i,s);if(l)return l}t+=a.nodeSize*i}return null}function zy(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof Ot||i instanceof It))return;let s=n.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(Ie.near(n.doc.resolve(o),t))}const Gy=1,fc=2,Wy=4;class bL extends gL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Gy)&~fc,this.storedMarks=null,this}get selectionSet(){return(this.updated&Gy)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=fc,this}ensureMarks(e){return nt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&fc)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~fc,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||nt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(t);s=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,s)),this.selection.empty||this.setSelection(Ie.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Wy,this}get scrolledIntoView(){return(this.updated&Wy)>0}}function Uy(n,e){return!e||!n?n:n.bind(e)}class ba{constructor(e,t,r){this.name=e,this.init=Uy(t.init,r),this.apply=Uy(t.apply,r)}}const _L=[new ba("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ba("selection",{init(n,e){return n.selection||Ie.atStart(e.doc)},apply(n){return n.selection}}),new ba("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new ba("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class sh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=_L.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ba(r.key,r.spec.state,r))})}}class io{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:t.length})}}if(!s)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new io(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];t[s.name]=s.apply(e,this[s.name],this,t)}return t}get tr(){return new bL(this)}static create(e){let t=new sh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new io(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new sh(this.schema,e.plugins),r=t.fields,i=new io(t);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(t[r]=s.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new sh(e.schema,e.plugins),s=new io(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=yi.fromJSON(e.schema,t.doc);else if(o.name=="selection")s.selection=Ie.fromJSON(s.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){s[o.name]=c.fromJSON.call(l,e,t[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function OC(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=OC(i,e,{})),t[r]=i}return t}class on{constructor(e){this.spec=e,this.props={},e.props&&OC(e.props,this,this.props),this.key=e.key?e.key.key:MC("plugin")}getState(e){return e[this.key]}}const oh=Object.create(null);function MC(n){return n in oh?n+"$"+ ++oh[n]:(oh[n]=0,n+"$")}class ir{constructor(e="key"){this.key=MC(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Dt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},il=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Fd=null;const Mr=function(n,e,t){let r=Fd||(Fd=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},wL=function(){Fd=null},Is=function(n,e,t,r){return t&&(Ky(n,e,t,r,-1)||Ky(n,e,t,r,1))},CL=/^(img|br|input|textarea|hr)$/i;function Ky(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Rn(n))){let s=n.parentNode;if(!s||s.nodeType!=1||xl(n)||CL.test(n.nodeName)||n.contentEditable=="false")return!1;e=Dt(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Rn(n):0}else return!1}}function Rn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function SL(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Rn(n)}else if(n.parentNode&&!xl(n))e=Dt(n),n=n.parentNode;else return null}}function xL(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!xl(n))e=Dt(n)+1,n=n.parentNode;else return null}}function AL(n,e,t){for(let r=e==0,i=e==Rn(n);r||i;){if(n==t)return!0;let s=Dt(n);if(n=n.parentNode,!n)return!1;r=r&&s==0,i=i&&s==Rn(n)}}function xl(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const of=function(n){return n.focusNode&&Is(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function is(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function kL(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function EL(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Rn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Rn(r.startContainer),r.startOffset)}}}const _r=typeof navigator<"u"?navigator:null,Yy=typeof document<"u"?document:null,ji=_r&&_r.userAgent||"",Bd=/Edge\/(\d+)/.exec(ji),IC=/MSIE \d/.exec(ji),$d=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ji),fn=!!(IC||$d||Bd),_i=IC?document.documentMode:$d?+$d[1]:Bd?+Bd[1]:0,nr=!fn&&/gecko\/(\d+)/i.test(ji);nr&&+(/Firefox\/(\d+)/.exec(ji)||[0,0])[1];const jd=!fn&&/Chrome\/(\d+)/.exec(ji),Gt=!!jd,PC=jd?+jd[1]:0,tn=!fn&&!!_r&&/Apple Computer/.test(_r.vendor),Oo=tn&&(/Mobile\/\w+/.test(ji)||!!_r&&_r.maxTouchPoints>2),In=Oo||(_r?/Mac/.test(_r.platform):!1),TL=_r?/Win/.test(_r.platform):!1,Kn=/Android \d/.test(ji),Al=!!Yy&&"webkitFontSmoothing"in Yy.documentElement.style,OL=Al?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ML(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Er(n,e){return typeof n=="number"?n:n[e]}function IL(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function qy(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,s=n.dom.ownerDocument;for(let o=t||n.dom;o;o=il(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?ML(s):IL(a),u=0,f=0;if(e.top<c.top+Er(r,"top")?f=-(c.top-e.top+Er(i,"top")):e.bottom>c.bottom-Er(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+Er(i,"top")-c.top:e.bottom-c.bottom+Er(i,"bottom")),e.left<c.left+Er(r,"left")?u=-(c.left-e.left+Er(i,"left")):e.right>c.right-Er(r,"right")&&(u=e.right-c.right+Er(i,"right")),u||f)if(l)s.defaultView.scrollBy(u,f);else{let h=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let d=a.scrollLeft-h,g=a.scrollTop-p;e={left:e.left-d,top:e.top-g,right:e.right-d,bottom:e.bottom-g}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function PL(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(s,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:NC(n.dom)}}function NC(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=il(r));return e}function NL({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;RC(t,r==0?0:r-e)}function RC(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:s}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let qs=null;function RL(n){if(n.setActive)return n.setActive();if(qs)return n.focus(qs);let e=NC(n);n.focus(qs==null?{get preventScroll(){return qs={preventScroll:!0},!0}}:void 0),qs||(qs=!1,RC(e,0))}function LC(n,e){let t,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,f=0;u;u=u.nextSibling,f++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Mr(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let d=h[p];if(d.top<=o&&d.bottom>=a){o=Math.max(d.bottom,o),a=Math.min(d.top,a);let g=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(g<r){t=u,r=g,i=g&&t.nodeType==3?{left:d.right<e.left?d.right:d.left,top:e.top}:e,u.nodeType==1&&g&&(s=f+(e.left>=(d.left+d.right)/2?1:0));continue}}else d.top>e.top&&!l&&d.left<=e.left&&d.right>=e.left&&(l=u,c={left:Math.max(d.left,Math.min(d.right,e.left)),top:d.top});!t&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(s=f+1)}}return!t&&l&&(t=l,i=c,r=0),t&&t.nodeType==3?LL(t,i):!t||r&&t.nodeType==1?{node:n,offset:s}:LC(t,i)}function LL(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let s=Zr(r,1);if(s.top!=s.bottom&&om(e,s))return{node:n,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:n,offset:0}}function om(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function DL(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function FL(n,e,t){let{node:r,offset:i}=LC(e,t),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,s)}function BL(n,e,t,r){let i=-1;for(let s=e,o=!1;s!=n.dom;){let a=n.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function DC(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),s=i;;){let o=n.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(om(e,c))return DC(o,e,c)}}if((s=(s+1)%r)==i)break}return n}function $L(n,e){let t=n.dom.ownerDocument,r,i=0,s=EL(t,e.left,e.top);s&&({node:r,offset:i}=s);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!om(e,c)||(o=DC(n.dom,e,c),!o))return null}if(tn)for(let c=o;r&&c;c=il(c))c.draggable&&(r=void 0);if(o=DL(o,e),r){if(nr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;Al&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=BL(n,r,i,e))}a==null&&(a=FL(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Xy(n){return n.top<n.bottom||n.left<n.right}function Zr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Xy(r))return r}return Array.prototype.find.call(t,Xy)||n.getBoundingClientRect()}const jL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function FC(n,e,t){let{node:r,offset:i,atom:s}=n.docView.domFromPos(e,t<0?-1:1),o=Al||nr;if(r.nodeType==3)if(o&&(jL.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let l=Zr(Mr(r,i,i),t);if(nr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Zr(Mr(r,i-1,i-1),-1);if(c.top==l.top){let u=Zr(Mr(r,i,i+1),-1);if(u.top!=l.top)return ra(u,u.left<c.left)}}return l}else{let l=i,c=i,u=t<0?1:-1;return t<0&&!i?(c++,u=-1):t>=0&&i==r.nodeValue.length?(l--,u=1):t<0?l--:c++,ra(Zr(Mr(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(t<0||i==Rn(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return ah(l.getBoundingClientRect(),!1)}if(s==null&&i<Rn(r)){let l=r.childNodes[i];if(l.nodeType==1)return ah(l.getBoundingClientRect(),!0)}return ah(r.getBoundingClientRect(),t>=0)}if(s==null&&i&&(t<0||i==Rn(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Mr(l,Rn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return ra(Zr(c,1),!1)}if(s==null&&i<Rn(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Mr(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return ra(Zr(c,-1),!0)}return ra(Zr(r.nodeType==3?Mr(r):r,-t),t>=0)}function ra(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function ah(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function BC(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function HL(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return BC(n,e,()=>{let{node:s}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=FC(n,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Mr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const VL=/[\u0590-\u08ac]/;function zL(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=n.domSelection();return a?!VL.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?s:o:BC(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=n.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",t,"character");let p=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:d,focusOffset:g}=n.domSelectionRange(),m=d&&!p.contains(d.nodeType==1?d:d.parentNode)||l==d&&c==g;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),m}):r.pos==r.start()||r.pos==r.end()}let Jy=null,Qy=null,Zy=!1;function GL(n,e,t){return Jy==e&&Qy==t?Zy:(Jy=e,Qy=t,Zy=t=="up"||t=="down"?HL(n,e,t):zL(n,e,t))}const $n=0,e0=1,ls=2,wr=3;class kl{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=$n,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>Dt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!t||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof jC){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof $C&&s.side>=0;r--);if(t<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&t&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,t):{node:this.contentDOM,offset:s?Dt(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,t):{node:this.contentDOM,offset:s?Dt(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let f=a;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Dt(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Dt(f.dom);break}t+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let s=Math.min(e,t),o=Math.max(e,t);for(let p=0,d=0;p<this.children.length;p++){let g=this.children[p],m=d+g.size;if(s>d&&o<m)return g.setSelection(e-d-g.border,t-d-g.border,r,i);d=m}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((nr||tn)&&e==t){let{node:p,offset:d}=a;if(p.nodeType==3){if(f=!!(d&&p.nodeValue[d-1]==`
`),f&&d==p.nodeValue.length)for(let g=p,m;g;g=g.parentNode){if(m=g.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Dt(m)+1});break}let y=g.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let g=p.childNodes[d-1];f=g&&(g.nodeName=="BR"||g.contentEditable=="false")}}if(nr&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||f&&tn)&&Is(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Is(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==t)&&!f){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>t){let d=a;a=l,l=d}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+s.border,l=o-s.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?ls:e0,e==a&&t==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=wr:s.markDirty(e-a,t-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ls:wr}r=o}this.dirty=ls}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?ls:e0;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class $C extends kl{constructor(e,t,r,i){let s,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,s=this}matchesWidget(e){return this.dirty==$n&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class WL extends kl{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ps extends kl{constructor(e,t,r,i,s){super(e,[],r,i),this.mark=t,this.spec=s}static create(e,t,r,i){let s=i.nodeViews[t.type.name],o=s&&s(t,i,r);return(!o||!o.dom)&&(o=js.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Ps(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&wr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=$n){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=$n}}slice(e,t,r){let i=Ps.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;t<o&&(s=Vd(s,t,o,r)),e>0&&(s=Vd(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class wi extends kl{constructor(e,t,r,i,s,o,a,l,c){super(e,[],s,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,s,o){let a=s.nodeViews[t.type.name],l,c=a&&a(t,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=js.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!f&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let h=u;return u=zC(u,r,t),c?l=new UL(e,t,r,i,u,f||null,h,c,s,o+1):t.isText?new af(e,t,r,i,u,h,s):new wi(e,t,r,i,u,f||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>q.empty)}return e}matchesNode(e,t,r){return this.dirty==$n&&e.eq(this.node)&&fu(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,s=e.composing?this.localCompositionInfo(e,t):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new YL(this,o&&o.node,e);JL(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?nt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,f,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,f,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,f,p,e)||l.updateNextNode(c,u,f,e,h,i)||l.addNode(c,u,f,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ls)&&(o&&this.protectLocalComposition(e,o),HC(this.contentDOM,this.children,e),Oo&&QL(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Te)||r<t||i>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=ZL(this.node.content,o,r-t,i-t);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let s=t;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new WL(this,s,t,i);e.input.compositionNodes.push(o),this.children=Vd(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==wr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=$n}updateOuterDeco(e){if(fu(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=VC(this.dom,this.nodeDOM,Hd(this.outerDeco,this.node,t),Hd(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function t0(n,e,t,r,i){zC(r,e,n);let s=new wi(void 0,n,e,t,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class af extends wi{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==wr||this.dirty!=$n&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=$n||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=$n,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),s=document.createTextNode(i.text);return new af(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=wr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class jC extends kl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==$n&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class UL extends wi{constructor(e,t,r,i,s,o,a,l,c,u){super(e,t,r,i,s,o,a,c,u),this.spec=l}update(e,t,r,i){if(this.dirty==wr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,t,r);return s&&this.updateInner(e,t,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function HC(n,e,t){let r=n.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=n0(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof Ps){let l=r?r.previousSibling:n.lastChild;HC(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=n0(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const Da=function(n){n&&(this.nodeName=n)};Da.prototype=Object.create(null);const cs=[new Da];function Hd(n,e,t){if(n.length==0)return cs;let r=t?cs[0]:new Da,i=[r];for(let s=0;s<n.length;s++){let o=n[s].type.attrs;if(o){o.nodeName&&i.push(r=new Da(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&i.length==1&&i.push(r=new Da(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function VC(n,e,t,r){if(t==cs&&r==cs)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=n&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=cs[0]),i=l}KL(i,a||cs[0],o)}return i}function KL(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&n.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&n.classList.add(i[s]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function zC(n,e,t){return VC(n,n,cs,Hd(e,t,n.nodeType!=1))}function fu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function n0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class YL{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=qL(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=$n,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Ps.create(this.top,e[s],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,t,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,r,i,s){let o=this.top.children[i];return o.dirty==wr&&o.dom==o.contentDOM&&(o.dirty=ls),o.update(e,t,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof wi){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,f,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=wr&&fu(t,l.outerDeco));if(!h&&l.update(e,t,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(l,e,t,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=ls,f.updateChildren(i,o+1),f.dirty=$n),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,s,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!fu(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=wi.create(this.top,t,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,i,s){let o=wi.create(this.top,e,t,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new $C(this.top,e,t,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Ps;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof af)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((tn||Gt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new jC(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function qL(n,e){let t=e,r=t.children.length,i=n.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof Ps)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function XL(n,e){return n.type.side-e.type.side}function JL(n,e,t,r){let i=e.locals(n),s=0;if(i.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,f;for(;o<i.length&&i[o].to==s;){let m=i[o++];m.widget&&(u?(f||(f=[u])).push(m):u=m)}if(u)if(f){f.sort(XL);for(let m=0;m<f.length;m++)t(f[m],c,!!l)}else t(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<n.childCount)p=c,h=n.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=s&&a.splice(m--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let d=s+h.nodeSize;if(h.isText){let m=d;o<i.length&&i[o].from<m&&(m=i[o].from);for(let y=0;y<a.length;y++)a[y].to<m&&(m=a[y].to);m<d&&(l=h.cut(m-s),h=h.cut(0,m-s),d=m,p=-1)}else for(;o<i.length&&i[o].to<d;)o++;let g=h.isInline&&!h.isLeaf?a.filter(m=>!m.inline):a.slice();r(h,g,e.forChild(s,h),p),s=d}}function QL(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function ZL(n,e,t,r){for(let i=0,s=0;i<n.childCount&&s<=r;){let o=n.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<n.childCount;){let c=n.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=t){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Vd(n,e,t,r,i){let s=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>t&&s.push(l.slice(t-c,l.size,r)))}return s}function am(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),s=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(of(t)){for(l=o;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Se.isSelectable(f)&&i.parent&&!(f.isInline&&AL(t.focusNode,t.focusOffset,i.dom))){let h=i.posBefore;c=new Se(o==h?a:r.resolve(h))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let f=o,h=o;for(let p=0;p<t.rangeCount;p++){let d=t.getRangeAt(p);f=Math.min(f,n.docView.posFromDOM(d.startContainer,d.startOffset,1)),h=Math.max(h,n.docView.posFromDOM(d.endContainer,d.endOffset,-1))}if(f<0)return null;[l,o]=h==n.state.selection.anchor?[h,f]:[f,h],a=r.resolve(o)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=e=="pointer"||n.state.selection.head<a.pos&&!s?1:-1;c=lm(n,u,a,f)}return c}function GC(n){return n.editable?n.hasFocus():UC(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function Dr(n,e=!1){let t=n.state.selection;if(WC(n,t),!!GC(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Gt){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Is(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)tD(n);else{let{anchor:r,head:i}=t,s,o;r0&&!(t instanceof Te)&&(t.$from.parent.inlineContent||(s=i0(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=i0(n,t.to))),n.docView.setSelection(r,i,n,e),r0&&(s&&s0(s),o&&s0(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&eD(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const r0=tn||Gt&&PC<63;function i0(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,s=r?t.childNodes[r-1]:null;if(tn&&i&&i.contentEditable=="false")return lh(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return lh(i);if(s)return lh(s)}}function lh(n){return n.contentEditable="true",tn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function s0(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function eD(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!GC(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function tD(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,Dt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&fn&&_i<=11&&(r.disabled=!0,r.disabled=!1)}function WC(n,e){if(e instanceof Se){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(o0(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else o0(n)}function o0(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function lm(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||Te.between(e,t,r)}function a0(n){return n.editable&&!n.hasFocus()?!1:UC(n)}function UC(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function nD(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Is(e.node,e.offset,t.anchorNode,t.anchorOffset)}function zd(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),s=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ie.findFrom(s,e)}function ii(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function l0(n,e,t){let r=n.state.selection;if(r instanceof Te)if(t.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ii(n,new Te(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=zd(n.state,e);return i&&i instanceof Se?ii(n,i):!1}else if(!(In&&t.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Se.isSelectable(s)?ii(n,new Se(e<0?n.state.doc.resolve(i.pos-s.nodeSize):i)):Al?ii(n,new Te(n.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Se&&r.node.isInline)return ii(n,new Te(e>0?r.$to:r.$from));{let i=zd(n.state,e);return i?ii(n,i):!1}}}function hu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Fa(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Xs(n,e){return e<0?rD(n):iD(n)}function rD(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,s,o=!1;for(nr&&t.nodeType==1&&r<hu(t)&&Fa(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Fa(a,-1))i=t,s=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(KC(t))break;{let a=t.previousSibling;for(;a&&Fa(a,-1);)i=t.parentNode,s=Dt(a),a=a.previousSibling;if(a)t=a,r=hu(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?Gd(n,t,r):i&&Gd(n,i,s)}function iD(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=hu(t),s,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Fa(a,1))s=t,o=++r;else break}else{if(KC(t))break;{let a=t.nextSibling;for(;a&&Fa(a,1);)s=a.parentNode,o=Dt(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=hu(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}s&&Gd(n,s,o)}function KC(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function sD(n,e){for(;n&&e==n.childNodes.length&&!xl(n);)e=Dt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function oD(n,e){for(;n&&!e&&!xl(n);)e=Dt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Gd(n,e,t){if(e.nodeType!=3){let s,o;(o=sD(e,t))?(e=o,t=0):(s=oD(e,t))&&(e=s,t=s.nodeValue.length)}let r=n.domSelection();if(!r)return;if(of(r)){let s=document.createRange();s.setEnd(e,t),s.setStart(e,t),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&Dr(n)},50)}function c0(n,e){let t=n.state.doc.resolve(e);if(!(Gt||TL)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let s=n.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<t.end()){let s=n.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function u0(n,e,t){let r=n.state.selection;if(r instanceof Te&&!r.empty||t.indexOf("s")>-1||In&&t.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=zd(n.state,e);if(o&&o instanceof Se)return ii(n,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof tr?Ie.near(o,e):Ie.findFrom(o,e);return a?ii(n,a):!1}return!1}function f0(n,e){if(!(n.state.selection instanceof Te))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(s&&!s.isText){let o=n.state.tr;return e<0?o.delete(t.pos-s.nodeSize,t.pos):o.delete(t.pos,t.pos+s.nodeSize),n.dispatch(o),!0}return!1}function h0(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function aD(n){if(!tn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;h0(n,r,"true"),setTimeout(()=>h0(n,r,"false"),20)}return!1}function lD(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function cD(n,e){let t=e.keyCode,r=lD(e);if(t==8||In&&t==72&&r=="c")return f0(n,-1)||Xs(n,-1);if(t==46&&!e.shiftKey||In&&t==68&&r=="c")return f0(n,1)||Xs(n,1);if(t==13||t==27)return!0;if(t==37||In&&t==66&&r=="c"){let i=t==37?c0(n,n.state.selection.from)=="ltr"?-1:1:-1;return l0(n,i,r)||Xs(n,i)}else if(t==39||In&&t==70&&r=="c"){let i=t==39?c0(n,n.state.selection.from)=="ltr"?1:-1:1;return l0(n,i,r)||Xs(n,i)}else{if(t==38||In&&t==80&&r=="c")return u0(n,-1,r)||Xs(n,-1);if(t==40||In&&t==78&&r=="c")return aD(n)||u0(n,1,r)||Xs(n,1);if(r==(In?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function YC(n,e){n.someProp("transformCopied",p=>{e=p(e,n)});let t=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;t.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=n.someProp("clipboardSerializer")||js.fromSchema(n.state.schema),a=eS(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=ZC[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let d=a.createElement(u[p]);for(;l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(t)}`);let h=n.someProp("clipboardTextSerializer",p=>p(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function qC(n,e,t,r,i){let s=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||s||!t);if(l){if(n.someProp("transformPastedText",h=>{e=h(e,s||r,n)}),s)return e?new ae(q.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ae.empty;let f=n.someProp("clipboardTextParser",h=>h(e,i,r,n));if(f)a=f;else{let h=i.marks(),{schema:p}=n.state,d=js.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(g=>{let m=o.appendChild(document.createElement("p"));g&&m.appendChild(d.serializeNode(p.text(g,h)))})}}else n.someProp("transformPastedHTML",f=>{t=f(t,n)}),o=dD(t),Al&&pD(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||bi.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!uD.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=mD(d0(a,+u[1],+u[2]),u[4]);else if(a=ae.maxOpen(fD(a.content,i),!0),a.openStart||a.openEnd){let f=0,h=0;for(let p=a.content.firstChild;f<a.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=d0(a,f,h)}return n.someProp("transformPasted",f=>{a=f(a,n)}),a}const uD=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function fD(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),s,o=[];if(n.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&JC(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=QC(o[o.length-1],s.length));let u=XC(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return q.from(o)}return n}function XC(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,q.from(n));return n}function JC(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let s=JC(n,e,t,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(q.from(XC(t,n,i+1))))}}function QC(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,QC(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(q.empty,!0);return n.copy(t.append(r))}function Wd(n,e,t,r,i,s){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(s=0),i<r-1&&(a=Wd(a,e,t,r,i+1,s)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(q.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function d0(n,e,t){return e<n.openStart&&(n=new ae(Wd(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new ae(Wd(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const ZC={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let p0=null;function eS(){return p0||(p0=document.implementation.createHTMLDocument("title"))}let ch=null;function hD(n){let e=window.trustedTypes;return e?(ch||(ch=e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),ch.createHTML(n)):n}function dD(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=eS().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&ZC[r[1].toLowerCase()])&&(n=i.map(s=>"<"+s+">").join("")+n+i.map(s=>"</"+s+">").reverse().join("")),t.innerHTML=hD(n),i)for(let s=0;s<i.length;s++)t=t.querySelector(i[s])||t;return t}function pD(n){let e=n.querySelectorAll(Gt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function mD(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:s,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=q.from(l.create(r[a+1],i)),s++,o++}return new ae(i,s,o)}const nn={},rn={},gD={touchstart:!0,touchmove:!0};class vD{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function yD(n){for(let e in nn){let t=nn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{_D(n,r)&&!cm(n,r)&&(n.editable||!(r.type in rn))&&t(n,r)},gD[e]?{passive:!0}:void 0)}tn&&n.dom.addEventListener("input",()=>null),Ud(n)}function di(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function bD(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ud(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>cm(n,r))})}function cm(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function _D(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function wD(n,e){!cm(n,e)&&nn[e.type]&&(n.editable||!(e.type in rn))&&nn[e.type](n,e)}rn.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!nS(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Kn&&Gt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Oo&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,is(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||cD(n,t)?t.preventDefault():di(n,"key")};rn.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};rn.keypress=(n,e)=>{let t=e;if(nS(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||In&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Te)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function lf(n){return{left:n.clientX,top:n.clientY}}function CD(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function um(n,e,t,r,i){if(r==-1)return!1;let s=n.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(n.someProp(e,a=>o>s.depth?a(n,t,s.nodeAfter,s.before(o),i,!0):a(n,t,s.node(o),s.before(o),i,!1)))return!0;return!1}function yo(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function SD(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Se.isSelectable(r)?(yo(n,new Se(t)),!0):!1}function xD(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof Se&&(r=t.node);let s=n.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Se.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&s.before(t.$from.depth+1)==t.$from.pos?i=s.before(t.$from.depth):i=s.before(o);break}}return i!=null?(yo(n,Se.create(n.state.doc,i)),!0):!1}function AD(n,e,t,r,i){return um(n,"handleClickOn",e,t,r)||n.someProp("handleClick",s=>s(n,e,r))||(i?xD(n,t):SD(n,t))}function kD(n,e,t,r){return um(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function ED(n,e,t,r){return um(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||TD(n,t,r)}function TD(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(yo(n,Te.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)yo(n,Te.create(r,a+1,a+1+o.content.size));else if(Se.isSelectable(o))yo(n,Se.create(r,a));else continue;return!0}}function fm(n){return du(n)}const tS=In?"metaKey":"ctrlKey";nn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=fm(n),i=Date.now(),s="singleClick";i-n.input.lastClick.time<500&&CD(t,n.input.lastClick)&&!t[tS]&&(n.input.lastClick.type=="singleClick"?s="doubleClick":n.input.lastClick.type=="doubleClick"&&(s="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:s};let o=n.posAtCoords(lf(t));o&&(s=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new OD(n,o,t,!!r)):(s=="doubleClick"?kD:ED)(n,o.pos,o.inside,t)?t.preventDefault():di(n,"pointer"))};class OD{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[tS],this.allowDefault=r.shiftKey;let s,o;if(t.inside>-1)s=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Se&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&nr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),di(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Dr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(lf(e))),this.updateAllowDefault(e),this.allowDefault||!t?di(this.view,"pointer"):AD(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||tn&&this.mightDrag&&!this.mightDrag.node.isAtom||Gt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(yo(this.view,Ie.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):di(this.view,"pointer")}move(e){this.updateAllowDefault(e),di(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}nn.touchstart=n=>{n.input.lastTouch=Date.now(),fm(n),di(n,"pointer")};nn.touchmove=n=>{n.input.lastTouch=Date.now(),di(n,"pointer")};nn.contextmenu=n=>fm(n);function nS(n,e){return n.composing?!0:tn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const MD=Kn?5e3:-1;rn.compositionstart=rn.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Te&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),du(n,!0),n.markCursor=null;else if(du(n,!e.selection.empty),nr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}n.input.composing=!0}rS(n,MD)};rn.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,rS(n,20))};function rS(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>du(n),e))}function iS(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=PD());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function ID(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=SL(e.focusNode,e.focusOffset),r=xL(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,s=n.domObserver.lastChangedTextNode;if(t==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function PD(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function du(n,e=!1){if(!(Kn&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),iS(n),e||n.docView&&n.docView.dirty){let t=am(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function ND(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const sl=fn&&_i<15||Oo&&OL<604;nn.copy=rn.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let s=sl?null:t.clipboardData,o=r.content(),{dom:a,text:l}=YC(n,o);s?(t.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):ND(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function RD(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function LD(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?ol(n,r.value,null,i,e):ol(n,r.textContent,r.innerHTML,i,e)},50)}function ol(n,e,t,r,i){let s=qC(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,i,s||ae.empty)))return!0;if(!s)return!1;let o=RD(s),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(s);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function sS(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}rn.paste=(n,e)=>{let t=e;if(n.composing&&!Kn)return;let r=sl?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&ol(n,sS(r),r.getData("text/html"),i,t)?t.preventDefault():LD(n,t)};class oS{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const aS=In?"altKey":"ctrlKey";nn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,s=i.empty?null:n.posAtCoords(lf(t)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Se?i.to-1:i.to))){if(r&&r.mightDrag)o=Se.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let f=n.docView.nearestDesc(t.target,!0);f&&f.node.type.spec.draggable&&f!=n.docView&&(o=Se.create(n.state.doc,f.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=YC(n,a);(!t.dataTransfer.files.length||!Gt||PC>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(sl?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",sl||t.dataTransfer.setData("text/plain",c),n.dragging=new oS(u,!t[aS],o)};nn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};rn.dragover=rn.dragenter=(n,e)=>e.preventDefault();rn.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(lf(t));if(!i)return;let s=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",d=>{o=d(o,n)}):o=qC(n,sS(t.dataTransfer),sl?null:t.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!t[aS]);if(n.someProp("handleDrop",d=>d(n,t,o||ae.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?xC(n.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=n.state.tr;if(a){let{node:d}=r;d?d.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(f?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(f&&Se.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Se(p));else{let d=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((g,m,y,w)=>d=w),c.setSelection(lm(n,p,c.doc.resolve(d)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};nn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&Dr(n)},20))};nn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};nn.beforeinput=(n,e)=>{if(Gt&&Kn&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",s=>s(n,is(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in rn)nn[n]=rn[n];function al(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class pu{constructor(e,t){this.toDOM=e,this.spec=t||_s,this.side=this.spec.side||0}map(e,t,r,i){let{pos:s,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new Dn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof pu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&al(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ci{constructor(e,t){this.attrs=e,this.spec=t||_s}map(e,t,r,i){let s=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Dn(s,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ci&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}static is(e){return e.type instanceof Ci}destroy(){}}class hm{constructor(e,t){this.attrs=e,this.spec=t||_s}map(e,t,r,i){let s=e.mapResult(t.from+i,1);if(s.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Dn(s.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),s;return i==t.from&&!(s=e.child(r)).isText&&i+s.nodeSize==t.to}eq(e){return this==e||e instanceof hm&&al(this.attrs,e.attrs)&&al(this.spec,e.spec)}destroy(){}}class Dn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Dn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Dn(e,e,new pu(t,r))}static inline(e,t,r,i){return new Dn(e,t,new Ci(r,i))}static node(e,t,r,i){return new Dn(e,t,new hm(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ci}get widget(){return this.type instanceof pu}}const Zs=[],_s={};class xt{constructor(e,t){this.local=e.length?e:Zs,this.children=t.length?t:Zs}static create(e,t){return t.length?mu(t,e,0,_s):Ht}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,s)}}map(e,t,r){return this==Ht||e.maps.length==0?this:this.mapInner(e,t,0,0,r||_s)}mapInner(e,t,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(t,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?DD(this.children,o||[],e,t,r,i,s):o?new xt(o.sort(ws),Zs):Ht}add(e,t){return t.length?this==Ht?xt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=cS(t,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,mu(u,a,c+1,_s)),s+=3}});let o=lS(s?uS(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new xt(o.length?this.local.concat(o).sort(ws):this.local,i||this.children)}remove(e){return e.length==0||this==Ht?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+t,l=r[s+1]+t;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<l&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Ht?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new xt(i,r):Ht}forChild(e,t){if(this==Ht)return this;if(t.isLeaf)return xt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ci){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new xt(i.sort(ws),Zs);return r?new ci([a,r]):a}return r||Ht}eq(e){if(this==e)return!0;if(!(e instanceof xt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return dm(this.localsInner(e))}localsInner(e){if(this==Ht)return Zs;if(e.inlineContent||!this.local.some(Ci.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ci||t.push(this.local[r]);return t}forEachSet(e){e(this)}}xt.empty=new xt([],[]);xt.removeOverlap=dm;const Ht=xt.empty;class ci{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,_s));return ci.from(r)}forChild(e,t){if(t.isLeaf)return xt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,t);s!=Ht&&(s instanceof ci?r=r.concat(s.members):r.push(s))}return ci.from(r)}eq(e){if(!(e instanceof ci)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!t)t=s;else{r&&(t=t.slice(),r=!1);for(let o=0;o<s.length;o++)t.push(s[o])}}return t?dm(r?t:t.sort(ws)):Zs}static from(e){switch(e.length){case 0:return Ht;case 1:return e[0];default:return new ci(e.every(t=>t instanceof xt)?e:e.reduce((t,r)=>t.concat(r instanceof xt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function DD(n,e,t,r,i,s,o){let a=n.slice();for(let c=0,u=s;c<t.maps.length;c++){let f=0;t.maps[c].forEach((h,p,d,g)=>{let m=g-d-(p-h);for(let y=0;y<a.length;y+=3){let w=a[y+1];if(w<0||h>w+u-f)continue;let b=a[y]+u-f;p>=b?a[y+1]=h<=b?-2:-1:h>=u&&m&&(a[y]+=m,a[y+1]+=m)}f+=m}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+s),f=u-i;if(f<0||f>=r.content.size){l=!0;continue}let h=t.map(n[c+1]+s,-1),p=h-i,{index:d,offset:g}=r.content.findIndex(f),m=r.maybeChild(d);if(m&&g==f&&g+m.nodeSize==p){let y=a[c+2].mapInner(t,m,u+1,n[c]+s+1,o);y!=Ht?(a[c]=f,a[c+1]=p,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=FD(a,n,e,t,i,s,o),u=mu(c,r,0,o);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,h=0;f<u.children.length;f+=3){let p=u.children[f];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[f],u.children[f+1],u.children[f+2])}}return new xt(e.sort(ws),a)}function lS(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Dn(i.from+e,i.to+e,i.type))}return t}function FD(n,e,t,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,i,c);f?t.push(f):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+s+1);return t}function cS(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let s=0,o;s<n.length;s++)(o=n[s])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[s]=null);return i}function uS(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function mu(n,e,t,r){let i=[],s=!1;e.forEach((a,l)=>{let c=cS(n,a,l+t);if(c){s=!0;let u=mu(c,a,t+l+1,r);u!=Ht&&i.push(l,l+a.nodeSize,u)}});let o=lS(s?uS(n):n,-t).sort(ws);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new xt(o,i):Ht}function ws(n,e){return n.from-e.from||n.to-e.to}function dm(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==n&&(e=n.slice()),e[i]=s.copy(s.from,r.to),m0(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,s.from),m0(e,i,r.copy(s.from,r.to)));break}}}return e}function m0(n,e,t){for(;e<n.length&&ws(t,n[e])>0;)e++;n.splice(e,0,t)}function uh(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Ht&&e.push(r)}),n.cursorWrapper&&e.push(xt.create(n.state.doc,[n.cursorWrapper.deco])),ci.from(e)}const BD={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},$D=fn&&_i<=11;class jD{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class HD{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new jD,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);fn&&_i<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),$D&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,BD)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(a0(this.view)){if(this.suppressingSelectionUpdates)return Dr(this.view);if(fn&&_i<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Is(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let s=e.focusNode;s;s=il(s))t.add(s);for(let s=e.anchorNode;s;s=il(s))if(t.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&a0(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let f=this.registerMutation(t[u],l);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(a=!0))}if(nr&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,h]=u;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||GD(e,f)!=p)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&of(r)&&(c=am(e))&&c.eq(Ie.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Dr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),VD(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Dr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];t.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(fn&&_i<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:h}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?Dt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Dt(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let g0=new WeakMap,v0=!1;function VD(n){if(!g0.has(n)&&(g0.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=nr,v0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),v0=!0}}function y0(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return Is(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function zD(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return y0(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?y0(n,t):null}function GD(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function WD(n,e,t){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],of(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Gt&&n.input.lastKeyCode===8)for(let m=s;m>i;m--){let y=r.childNodes[m-1],w=y.pmViewDesc;if(y.nodeName=="BR"&&!w){s=m;break}if(!w||w.size)break}let f=n.state.doc,h=n.someProp("domParser")||bi.fromSchema(n.state.schema),p=f.resolve(o),d=null,g=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:UD,context:p});if(c&&c[0].pos!=null){let m=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=m),d={anchor:m+o,head:y+o}}return{doc:g,sel:d,from:o,to:a}}function UD(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(tn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||tn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const KD=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function YD(n,e,t,r,i){let s=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,F=am(n,E);if(F&&!n.state.selection.eq(F)){if(Gt&&Kn&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",L=>L(n,is(13,"Enter"))))return;let j=n.state.tr.setSelection(F);E=="pointer"?j.setMeta("pointer",!0):E=="key"&&j.scrollIntoView(),s&&j.setMeta("composition",s),n.dispatch(j)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=WD(n,e,t),u=n.state.doc,f=u.slice(c.from,c.to),h,p;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,p="end"):(h=n.state.selection.from,p="start"),n.input.lastKeyCode=null;let d=JD(f.content,c.doc.content,c.from,h,p);if(d&&n.input.domChangeCount++,(Oo&&n.input.lastIOSEnter>Date.now()-225||Kn)&&i.some(E=>E.nodeType==1&&!KD.test(E.nodeName))&&(!d||d.endA>=d.endB)&&n.someProp("handleKeyDown",E=>E(n,is(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!d)if(r&&l instanceof Te&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))d={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=b0(n,n.state.doc,c.sel);if(E&&!E.eq(n.state.selection)){let F=n.state.tr.setSelection(E);s&&F.setMeta("composition",s),n.dispatch(F)}}return}n.state.selection.from<n.state.selection.to&&d.start==d.endB&&n.state.selection instanceof Te&&(d.start>n.state.selection.from&&d.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?d.start=n.state.selection.from:d.endA<n.state.selection.to&&d.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(d.endB+=n.state.selection.to-d.endA,d.endA=n.state.selection.to)),fn&&_i<=11&&d.endB==d.start+1&&d.endA==d.start&&d.start>c.from&&c.doc.textBetween(d.start-c.from-1,d.start-c.from+1)==" "&&(d.start--,d.endA--,d.endB--);let g=c.doc.resolveNoCache(d.start-c.from),m=c.doc.resolveNoCache(d.endB-c.from),y=u.resolve(d.start),w=g.sameParent(m)&&g.parent.inlineContent&&y.end()>=d.endA,b;if((Oo&&n.input.lastIOSEnter>Date.now()-225&&(!w||i.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!w&&g.pos<c.doc.content.size&&!g.sameParent(m)&&(b=Ie.findFrom(c.doc.resolve(g.pos+1),1,!0))&&b.head==m.pos)&&n.someProp("handleKeyDown",E=>E(n,is(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>d.start&&XD(u,d.start,d.endA,g,m)&&n.someProp("handleKeyDown",E=>E(n,is(8,"Backspace")))){Kn&&Gt&&n.domObserver.suppressSelectionUpdates();return}Gt&&Kn&&d.endB==d.start&&(n.input.lastAndroidDelete=Date.now()),Kn&&!w&&g.start()!=m.start()&&m.parentOffset==0&&g.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==d.endA&&(d.endB-=2,m=c.doc.resolveNoCache(d.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,is(13,"Enter"))})},20));let v=d.start,S=d.endA,_,k,M;if(w){if(g.pos==m.pos)fn&&_i<=11&&g.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>Dr(n),20)),_=n.state.tr.delete(v,S),k=u.resolve(d.start).marksAcross(u.resolve(d.endA));else if(d.endA==d.endB&&(M=qD(g.parent.content.cut(g.parentOffset,m.parentOffset),y.parent.content.cut(y.parentOffset,d.endA-y.start()))))_=n.state.tr,M.type=="add"?_.addMark(v,S,M.mark):_.removeMark(v,S,M.mark);else if(g.parent.child(g.index()).isText&&g.index()==m.index()-(m.textOffset?0:1)){let E=g.parent.textBetween(g.parentOffset,m.parentOffset);if(n.someProp("handleTextInput",F=>F(n,v,S,E)))return;_=n.state.tr.insertText(E,v,S)}}if(_||(_=n.state.tr.replace(v,S,c.doc.slice(d.start-c.from,d.endB-c.from))),c.sel){let E=b0(n,_.doc,c.sel);E&&!(Gt&&Kn&&n.composing&&E.empty&&(d.start!=d.endB||n.input.lastAndroidDelete<Date.now()-100)&&(E.head==v||E.head==_.mapping.map(S)-1)||fn&&E.empty&&E.head==v)&&_.setSelection(E)}k&&_.ensureMarks(k),s&&_.setMeta("composition",s),n.dispatch(_.scrollIntoView())}function b0(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:lm(n,e.resolve(t.anchor),e.resolve(t.head))}function qD(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<t.length;u++)s=t[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(q.from(c).eq(n))return{mark:a,type:o}}function XD(n,e,t,r,i){if(t-e<=i.pos-r.pos||fh(r,!0,!1)<i.pos)return!1;let s=n.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&t==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=n.resolve(fh(s,!0,!0));return!o.parent.isTextblock||o.pos>t||fh(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function fh(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let s=n.node(r).maybeChild(n.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function JD(n,e,t,r,i){let s=n.findDiffStart(e,t);if(s==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&n.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&_0(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<n.size&&_0(n.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function _0(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class QD{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new vD,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(A0),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=S0(this),C0(this),this.nodeViews=x0(this),this.docView=t0(this.state.doc,w0(this),uh(this),this.dom,this),this.domObserver=new HD(this,(r,i,s,o)=>YD(this,r,i,s,o)),this.domObserver.start(),yD(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ud(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(A0),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(iS(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let p=x0(this);e3(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ud(this),this.editable=S0(this),C0(this);let l=uh(this),c=w0(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(i.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&PL(this);if(o){this.domObserver.stop();let p=f&&(fn||Gt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&ZD(i.selection,e.selection);if(f){let d=Gt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=ID(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=t0(e.doc,c,l,this.dom,this)),d&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&nD(this))?Dr(this,p):(WC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&NL(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Se){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&qy(this,t.getBoundingClientRect(),e)}else qy(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-t.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new oS(e.slice,e.move,i<0?void 0:Se.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(fn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&RL(this.dom),Dr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return $L(this,e)}coordsAtPos(e,t=1){return FC(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return GL(this,t||this.state,e)}pasteHTML(e,t){return ol(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ol(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(bD(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],uh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,wL())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return wD(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?tn&&this.root.nodeType===11&&kL(this.dom.ownerDocument)==this.dom&&zD(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function w0(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Dn.node(0,n.state.doc.content.size,e)]}function C0(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:Dn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function S0(n){return!n.someProp("editable",e=>e(n.state)===!1)}function ZD(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function x0(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function e3(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function A0(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Oi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},t3=typeof navigator<"u"&&/Mac/.test(navigator.platform),n3=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ft=0;Ft<10;Ft++)Oi[48+Ft]=Oi[96+Ft]=String(Ft);for(var Ft=1;Ft<=24;Ft++)Oi[Ft+111]="F"+Ft;for(var Ft=65;Ft<=90;Ft++)Oi[Ft]=String.fromCharCode(Ft+32),gu[Ft]=String.fromCharCode(Ft);for(var hh in Oi)gu.hasOwnProperty(hh)||(gu[hh]=Oi[hh]);function r3(n){var e=t3&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||n3&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?gu:Oi)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const i3=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function s3(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))i3?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),s&&(t="Shift-"+t),t}function o3(n){let e=Object.create(null);for(let t in n)e[s3(t)]=n[t];return e}function dh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function a3(n){return new on({props:{handleKeyDown:fS(n)}})}function fS(n){let e=o3(n);return function(t,r){let i=r3(r),s,o=e[dh(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[dh(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Oi[r.keyCode])&&s!=i){let a=e[dh(s,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const l3=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function hS(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const c3=(n,e,t)=>{let r=hS(n,t);if(!r)return!1;let i=pm(r);if(!i){let o=r.blockRange(),a=o&&Ko(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(gS(n,i,e,-1))return!0;if(r.parent.content.size==0&&(Mo(s,"end")||Se.isSelectable(s)))for(let o=r.depth;;o--){let a=rf(n.doc,r.before(o),r.after(o),ae.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Mo(s,"end")?Ie.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Se.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},u3=(n,e,t)=>{let r=hS(n,t);if(!r)return!1;let i=pm(r);return i?dS(n,i,e):!1},f3=(n,e,t)=>{let r=pS(n,t);if(!r)return!1;let i=mm(r);return i?dS(n,i,e):!1};function dS(n,e,t){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=rf(n.doc,s,l,ae.empty);if(!c||c.from!=s||c instanceof Ot&&c.slice.size>=l-s)return!1;if(t){let u=n.tr.step(c);u.setSelection(Te.create(u.doc,s)),t(u.scrollIntoView())}return!0}function Mo(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const h3=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;s=pm(r)}let o=s&&s.nodeBefore;return!o||!Se.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function pm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function pS(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const d3=(n,e,t)=>{let r=pS(n,t);if(!r)return!1;let i=mm(r);if(!i)return!1;let s=i.nodeAfter;if(gS(n,i,e,1))return!0;if(r.parent.content.size==0&&(Mo(s,"start")||Se.isSelectable(s))){let o=rf(n.doc,r.before(),r.after(),ae.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(Mo(s,"start")?Ie.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Se.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},p3=(n,e,t)=>{let{$head:r,empty:i}=n.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;s=mm(r)}let o=s&&s.nodeAfter;return!o||!Se.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Se.create(n.doc,s.pos)).scrollIntoView()),!0)};function mm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const m3=(n,e)=>{let t=n.selection,r=t instanceof Se,i;if(r){if(t.node.isTextblock||!$i(n.doc,t.from))return!1;i=t.from}else if(i=nf(n.doc,t.from,-1),i==null)return!1;if(e){let s=n.tr.join(i);r&&s.setSelection(Se.create(s.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},g3=(n,e)=>{let t=n.selection,r;if(t instanceof Se){if(t.node.isTextblock||!$i(n.doc,t.to))return!1;r=t.to}else if(r=nf(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},v3=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),s=i&&Ko(i);return s==null?!1:(e&&e(n.tr.lift(i,s).scrollIntoView()),!0)},y3=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function mS(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const b3=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),s=t.indexAfter(-1),o=mS(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ie.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},_3=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof tr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=mS(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,s.createAndFill());a.setSelection(Te.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},w3=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let s=t.before();if(go(n.doc,s))return e&&e(n.tr.split(s).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Ko(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)},C3=(n,e)=>{let{$from:t,to:r}=n.selection,i,s=t.sharedDepth(r);return s==0?!1:(i=t.before(s),e&&e(n.tr.setSelection(Se.create(n.doc,i))),!0)};function S3(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||$i(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function gS(n,e,t,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&S3(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(t){let p=e.pos+s.nodeSize,d=q.empty;for(let y=o.length-1;y>=0;y--)d=q.from(o[y].create(null,d));d=q.from(i.copy(d));let g=n.tr.step(new It(e.pos-1,p,e.pos,p,new ae(d,1,0),o.length,!0)),m=g.doc.resolve(p+2*o.length);m.nodeAfter&&m.nodeAfter.type==i.type&&$i(g.doc,m.pos)&&g.join(m.pos),t(g.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Ie.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),h=f&&Ko(f);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(f,h).scrollIntoView()),!0;if(c&&Mo(s,"start",!0)&&Mo(i,"end")){let p=i,d=[];for(;d.push(p),!p.isTextblock;)p=p.lastChild;let g=s,m=1;for(;!g.isTextblock;g=g.firstChild)m++;if(p.canReplace(p.childCount,p.childCount,g.content)){if(t){let y=q.empty;for(let b=d.length-1;b>=0;b--)y=q.from(d[b].copy(y));let w=n.tr.step(new It(e.pos-d.length,e.pos+s.nodeSize,e.pos+m,e.pos+s.nodeSize-m,new ae(y,d.length,0),0,!0));t(w.scrollIntoView())}return!0}}return!1}function vS(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(t&&t(e.tr.setSelection(Te.create(e.doc,n<0?i.start(s):i.end(s)))),!0):!1}}const x3=vS(-1),A3=vS(1);function k3(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=o&&im(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function k0(n,e=null){return function(t,r){let i=!1;for(let s=0;s<t.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[s];t.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)i=!0;else{let u=t.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,n)}})}if(!i)return!1;if(r){let s=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];s.setBlockType(a,l,n,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function E3(n,e=null){return function(t,r){let{$from:i,$to:s}=t.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(n)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=t.doc.resolve(o.start-2);l=new au(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new au(i,t.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=im(l,n,e,o);return c?(r&&r(T3(t.tr,o,c,a,n).scrollIntoView()),!0):!1}}function T3(n,e,t,r,i){let s=q.empty;for(let u=t.length-1;u>=0;u--)s=q.from(t[u].type.create(t[u].attrs,s));n.step(new It(e.start-(r?2:0),e.end,e.start,e.end,new ae(s,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==i&&(o=u+1);let a=t.length-o,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,h=!0;u<f;u++,h=!1)!h&&go(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function O3(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return s?t?r.node(s.depth-1).type==n?M3(e,t,n,s):I3(e,t,s):!0:!1}}function M3(n,e,t,r){let i=n.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new It(s-1,o,s,o,new ae(q.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new au(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Ko(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return $i(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function I3(n,e,t){let r=n.tr,i=t.parent;for(let p=t.end,d=t.endIndex-1,g=t.startIndex;d>g;d--)p-=i.child(d).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(t.start),o=s.nodeAfter;if(r.mapping.map(t.end)!=t.start+s.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?q.empty:q.from(i))))return!1;let f=s.pos,h=f+o.nodeSize;return r.step(new It(f-(a?1:0),h+(l?1:0),f+1,h-1,new ae((a?q.empty:q.from(i.copy(q.empty))).append(l?q.empty:q.from(i.copy(q.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function P3(n){return function(e,t){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==n);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=q.from(c?n.create():null),f=new ae(q.from(n.create(null,q.from(a.type.create(null,u)))),c?3:1,0),h=s.start,p=s.end;t(e.tr.step(new It(h-(c?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}function cf(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:s}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,s=t.storedMarks,t}}}class uf{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const f=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),f={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...g)=>{const m=this.buildProps(c,t),y=p(...g)(m);return a.push(y),f}])),run:u};return f}createCan(e){const{rawCommands:t,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:cf({state:s,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class N3{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function de(n,e,t){return n.config[e]===void 0&&n.parent?de(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?de(n.parent,e,t):null}):n.config[e]}function ff(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function yS(n){const e=[],{nodeExtensions:t,markExtensions:r}=ff(n),i=[...t,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=de(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:f,name:h,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=de(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const h={...s,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Rt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function sn(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,h]=u.split(":").map(p=>p.trim());c.set(f,h)}),a.forEach(u=>{const[f,h]=u.split(":").map(p=>p.trim());c.set(f,h)}),r[i]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[i]=s}),r},{})}function Kd(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>sn(t,r),{})}function bS(n){return typeof n=="function"}function Le(n,e=void 0,...t){return bS(n)?e?n.bind(e)(...t):n(...t):n}function R3(n={}){return Object.keys(n).length===0&&n.constructor===Object}function L3(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function E0(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):L3(t.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function T0(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&R3(t)?!1:t!=null))}function D3(n,e){var t;const r=yS(n),{nodeExtensions:i,markExtensions:s}=ff(n),o=(t=i.find(c=>de(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((y,w)=>{const b=de(w,"extendNodeSchema",f);return{...y,...b?b(c):{}}},{}),p=T0({...h,content:Le(de(c,"content",f)),marks:Le(de(c,"marks",f)),group:Le(de(c,"group",f)),inline:Le(de(c,"inline",f)),atom:Le(de(c,"atom",f)),selectable:Le(de(c,"selectable",f)),draggable:Le(de(c,"draggable",f)),code:Le(de(c,"code",f)),whitespace:Le(de(c,"whitespace",f)),linebreakReplacement:Le(de(c,"linebreakReplacement",f)),defining:Le(de(c,"defining",f)),isolating:Le(de(c,"isolating",f)),attrs:Object.fromEntries(u.map(y=>{var w;return[y.name,{default:(w=y==null?void 0:y.attribute)===null||w===void 0?void 0:w.default}]}))}),d=Le(de(c,"parseHTML",f));d&&(p.parseDOM=d.map(y=>E0(y,u)));const g=de(c,"renderHTML",f);g&&(p.toDOM=y=>g({node:y,HTMLAttributes:Kd(y,u)}));const m=de(c,"renderText",f);return m&&(p.toText=m),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(m=>m.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((m,y)=>{const w=de(y,"extendMarkSchema",f);return{...m,...w?w(c):{}}},{}),p=T0({...h,inclusive:Le(de(c,"inclusive",f)),excludes:Le(de(c,"excludes",f)),group:Le(de(c,"group",f)),spanning:Le(de(c,"spanning",f)),code:Le(de(c,"code",f)),attrs:Object.fromEntries(u.map(m=>{var y;return[m.name,{default:(y=m==null?void 0:m.attribute)===null||y===void 0?void 0:y.default}]}))}),d=Le(de(c,"parseHTML",f));d&&(p.parseDOM=d.map(m=>E0(m,u)));const g=de(c,"renderHTML",f);return g&&(p.toDOM=m=>g({mark:m,HTMLAttributes:Kd(m,u)})),[c.name,p]}));return new dC({topNode:o,nodes:a,marks:l})}function ph(n,e){return e.nodes[n]||e.marks[n]||null}function O0(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function gm(n,e){const t=js.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const F3=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),t};function vm(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class hf{constructor(e){this.find=e.find,this.handler=e.handler}}const B3=(n,e)=>{if(vm(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function hc(n){var e;const{editor:t,from:r,to:i,text:s,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const f=F3(c)+s;return o.forEach(h=>{if(u)return;const p=B3(f,h.find);if(!p)return;const d=l.state.tr,g=cf({state:l.state,transaction:d}),m={from:r-(p[0].length-s.length),to:i},{commands:y,chain:w,can:b}=new uf({editor:t,state:g});h.handler({state:g,range:m,match:p,commands:y,chain:w,can:b})===null||!d.steps.length||(d.setMeta(a,{transform:d,from:r,to:i,text:s}),l.dispatch(d),u=!0)}),u}function $3(n){const{editor:e,rules:t}=n,r=new on({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=gm(q.from(u),o.schema);const{from:f}=l,h=f+u.length;hc({editor:e,from:f,to:h,text:u,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return hc({editor:e,from:s,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&hc({editor:e,from:s.pos,to:s.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?hc({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function j3(n){return Object.prototype.toString.call(n).slice(8,-1)}function dc(n){return j3(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function df(n,e){const t={...n};return dc(n)&&dc(e)&&Object.keys(e).forEach(r=>{dc(e[r])&&dc(n[r])?t[r]=df(n[r],e[r]):t[r]=e[r]}),t}class Mi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(de(this,"addOptions",{name:this.name}))),this.storage=Le(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mi(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>df(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Mi(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Le(de(t,"addOptions",{name:t.name})),t.storage=Le(de(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function H3(n){return typeof n=="number"}class V3{constructor(e){this.find=e.find,this.handler=e.handler}}const z3=(n,e,t)=>{if(vm(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=n,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function G3(n){const{editor:e,state:t,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new uf({editor:e,state:t}),f=[];return t.doc.nodesBetween(r,i,(p,d)=>{if(!p.isTextblock||p.type.spec.code)return;const g=Math.max(r,d),m=Math.min(i,d+p.content.size),y=p.textBetween(g-d,m-d,void 0,"");z3(y,s.find,o).forEach(b=>{if(b.index===void 0)return;const v=g+b.index+1,S=v+b[0].length,_={from:t.tr.mapping.map(v),to:t.tr.mapping.map(S)},k=s.handler({state:t,range:_,match:b,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});f.push(k)})}),f.every(p=>p!==null)}const W3=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function U3(n){const{editor:e,rules:t}=n;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:h,rule:p,pasteEvt:d})=>{const g=u.tr,m=cf({state:u,transaction:g});if(!(!G3({editor:e,state:m,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:d,dropEvent:a})||!g.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,g}};return t.map(u=>new on({view(f){const h=p=>{var d;r=!((d=f.dom.parentElement)===null||d===void 0)&&d.contains(p.target)?f.dom.parentElement:null};return window.addEventListener("dragstart",h),{destroy(){window.removeEventListener("dragstart",h)}}},props:{handleDOMEvents:{drop:(f,h)=>(s=r===f.dom.parentElement,a=h,!1),paste:(f,h)=>{var p;const d=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return o=h,i=!!(d!=null&&d.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const d=f[0],g=d.getMeta("uiEvent")==="paste"&&!i,m=d.getMeta("uiEvent")==="drop"&&!s,y=d.getMeta("applyPasteRules"),w=!!y;if(!g&&!m&&!w)return;if(w){let{text:S}=y;typeof S=="string"?S=S:S=gm(q.from(S),p.schema);const{from:_}=y,k=_+S.length,M=W3(S);return l({rule:u,state:p,from:_,to:{b:k},pasteEvt:M})}const b=h.doc.content.findDiffStart(p.doc.content),v=h.doc.content.findDiffEnd(p.doc.content);if(!(!H3(b)||!v||b===v.b))return l({rule:u,state:p,from:b,to:v,pasteEvt:o})}}))}function K3(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class so{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=so.resolve(e),this.schema=D3(this.extensions,t),this.setupExtensions()}static resolve(e){const t=so.sort(so.flatten(e)),r=K3(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=de(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=de(r,"priority")||100,o=de(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ph(t.name,this.schema)},i=de(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=so.sort([...this.extensions].reverse()),r=[],i=[],s=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:ph(o.name,this.schema)},l=[],c=de(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&de(o,"exitable",a)&&(u.ArrowRight=()=>Mi.handleExit({editor:e,mark:o})),c){const g=Object.fromEntries(Object.entries(c()).map(([m,y])=>[m,()=>y({editor:e})]));u={...u,...g}}const f=a3(u);l.push(f);const h=de(o,"addInputRules",a);O0(o,e.options.enableInputRules)&&h&&r.push(...h());const p=de(o,"addPasteRules",a);O0(o,e.options.enablePasteRules)&&p&&i.push(...p());const d=de(o,"addProseMirrorPlugins",a);if(d){const g=d();l.push(...g)}return l}).flat();return[$3({editor:e,rules:r}),...U3({editor:e,rules:i}),...s]}get attributes(){return yS(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=ff(this.extensions);return Object.fromEntries(t.filter(r=>!!de(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Rt(r.name,this.schema)},o=de(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,f,h)=>{const p=Kd(l,i);return o()({node:l,view:c,getPos:u,decorations:f,innerDecorations:h,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ph(e.name,this.schema)};e.type==="mark"&&(!((t=Le(de(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=de(e,"onBeforeCreate",r),s=de(e,"onCreate",r),o=de(e,"onUpdate",r),a=de(e,"onSelectionUpdate",r),l=de(e,"onTransaction",r),c=de(e,"onFocus",r),u=de(e,"onBlur",r),f=de(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class Ut{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(de(this,"addOptions",{name:this.name}))),this.storage=Le(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ut(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>df(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ut({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Le(de(t,"addOptions",{name:t.name})),t.storage=Le(de(t,"addStorage",{name:t.name,options:t.options})),t}}function _S(n,e,t){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(r,i,(l,c,u,f)=>{var h;l.isBlock&&c>r&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:f,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function wS(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const Y3=Ut.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new on({key:new ir("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=wS(t);return _S(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),q3=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),X3=(n=!1)=>({commands:e})=>e.setContent("",n),J3=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:s,$to:o})=>{n.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=f.blockRange(h);if(!p)return;const d=Ko(p);if(a.type.isTextblock){const{defaultType:g}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,g)}(d||d===0)&&e.lift(p,d)})}),!0},Q3=n=>e=>n(e),Z3=()=>({state:n,dispatch:e})=>_3(n,e),eF=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,s=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Te(r.doc.resolve(o-1))),!0},tF=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);n.delete(a,l).scrollIntoView()}return!0}return!1},nF=n=>({tr:e,state:t,dispatch:r})=>{const i=Rt(n,t.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},rF=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},iF=()=>({state:n,dispatch:e})=>l3(n,e),sF=()=>({commands:n})=>n.keyboardShortcut("Enter"),oF=()=>({state:n,dispatch:e})=>b3(n,e);function vu(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:vm(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function CS(n,e,t={}){return n.find(r=>r.type===e&&vu(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function M0(n,e,t={}){return!!CS(n,e,t)}function ym(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!CS([...i.node.marks],e,t)))return;let o=i.index,a=n.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&M0([...n.parent.child(o-1).marks],e,t);)o-=1,a-=n.parent.child(o).nodeSize;for(;l<n.parent.childCount&&M0([...n.parent.child(l).marks],e,t);)c+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Hi(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const aF=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const s=Hi(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(i){const f=ym(l,s,e);if(f&&f.from<=c&&f.to>=u){const h=Te.create(o,f.from,f.to);t.setSelection(h)}}return!0},lF=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function bm(n){return n instanceof Te}function Nr(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function SS(n,e=null){if(!e)return null;const t=Ie.atStart(n),r=Ie.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,s=r.to;return e==="all"?Te.create(n,Nr(0,i,s),Nr(n.content.size,i,s)):Te.create(n,Nr(e,i,s),Nr(e,i,s))}function _m(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const cF=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{_m()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(s&&n===null&&!bm(t.state.selection))return o(),!0;const a=SS(i.doc,n)||t.state.selection,l=t.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},uF=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),fF=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),xS=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&xS(r)}return n};function pc(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return xS(t)}function yu(n,e,t){if(n instanceof yi||n instanceof q)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return q.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(s){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",s),yu("",e,t)}if(i){if(t.errorOnInvalidContent){let o=!1,a="";const l=new dC({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?bi.fromSchema(l).parseSlice(pc(n),t.parseOptions):bi.fromSchema(l).parse(pc(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=bi.fromSchema(e);return t.slice?s.parseSlice(pc(n),t.parseOptions).content:s.parse(pc(n),t.parseOptions)}return yu("",e,t)}function hF(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof Ot||i instanceof It))return;const s=n.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(Ie.near(n.doc.resolve(o),t))}const dF=n=>!("type"in n),pF=(n,e,t)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){t={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=yu(e,s.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(d){return s.emit("contentError",{editor:s,error:d,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},u=!0,f=!0;if((dF(a)?a:[a]).forEach(d=>{d.check(),u=u?d.isText&&d.marks.length===0:!1,f=f?d.isBlock:!1}),l===c&&f){const{parent:d}=r.doc.resolve(l);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(d=>d.text||"").join("");else if(e instanceof q){let d="";e.forEach(g=>{g.text&&(d+=g.text)}),p=d}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);t.updateSelection&&hF(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},mF=()=>({state:n,dispatch:e})=>m3(n,e),gF=()=>({state:n,dispatch:e})=>g3(n,e),vF=()=>({state:n,dispatch:e})=>c3(n,e),yF=()=>({state:n,dispatch:e})=>d3(n,e),bF=()=>({state:n,dispatch:e,tr:t})=>{try{const r=nf(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},_F=()=>({state:n,dispatch:e,tr:t})=>{try{const r=nf(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},wF=()=>({state:n,dispatch:e})=>u3(n,e),CF=()=>({state:n,dispatch:e})=>f3(n,e);function AS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function SF(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))_m()||AS()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),s&&(t=`Shift-${t}`),t}const xF=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const s=SF(n).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function ll(n,e,t={}){const{from:r,to:i,empty:s}=n.selection,o=e?Rt(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(f,h)=>{if(f.isText)return;const p=Math.max(r,h),d=Math.min(i,h+f.nodeSize);a.push({node:f,from:p,to:d})});const l=i-r,c=a.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>vu(f.node.attrs,t,{strict:!1}));return s?!!c.length:c.reduce((f,h)=>f+h.to-h.from,0)>=l}const AF=(n,e={})=>({state:t,dispatch:r})=>{const i=Rt(n,t.schema);return ll(t,i,e)?v3(t,r):!1},kF=()=>({state:n,dispatch:e})=>w3(n,e),EF=n=>({state:e,dispatch:t})=>{const r=Rt(n,e.schema);return O3(r)(e,t)},TF=()=>({state:n,dispatch:e})=>y3(n,e);function pf(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function I0(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const OF=(n,e)=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=pf(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Rt(n,r.schema)),a==="mark"&&(o=Hi(n,r.schema)),i&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&t.setNodeMarkup(u,void 0,I0(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(f=>{o===f.type&&t.addMark(u,u+c.nodeSize,o.create(I0(f.attrs,e)))})})}),!0):!1},MF=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),IF=()=>({tr:n,commands:e})=>e.setTextSelection({from:0,to:n.doc.content.size}),PF=()=>({state:n,dispatch:e})=>h3(n,e),NF=()=>({state:n,dispatch:e})=>p3(n,e),RF=()=>({state:n,dispatch:e})=>C3(n,e),LF=()=>({state:n,dispatch:e})=>A3(n,e),DF=()=>({state:n,dispatch:e})=>x3(n,e);function Yd(n,e,t={},r={}){return yu(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const FF=(n,e=!1,t={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(t.preserveWhitespace!=="full"){const f=Yd(n,i.schema,t,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function kS(n,e){const t=Hi(e,n.schema),{from:r,to:i,empty:s}=n.selection,o=[];s?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function BF(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function $F(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function wm(n){return e=>$F(e.$from,n)}function jF(n,e){const t={from:0,to:n.content.size};return _S(n,t,e)}function HF(n,e){const t=Rt(e,n.schema),{from:r,to:i}=n.selection,s=[];n.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function VF(n,e){const t=pf(typeof e=="string"?e:e.name,n.schema);return t==="node"?HF(n,e):t==="mark"?kS(n,e):{}}function ES(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const s=t.resolve(n),o=ym(s,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Hc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function qd(n,e,t={}){const{empty:r,ranges:i}=n.selection,s=e?Hi(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>vu(f.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:f,$to:h})=>{const p=f.pos,d=h.pos;n.doc.nodesBetween(p,d,(g,m)=>{if(!g.isText&&!g.marks.length)return;const y=Math.max(p,m),w=Math.min(d,m+g.nodeSize),b=w-y;o+=b,a.push(...g.marks.map(v=>({mark:v,from:y,to:w})))})}),o===0)return!1;const l=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>vu(f.mark.attrs,t,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),c=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,h)=>f+h.to-h.from,0);return(l>0?l+c:l)>=o}function zF(n,e,t={}){if(!e)return ll(n,null,t)||qd(n,null,t);const r=pf(e,n.schema);return r==="node"?ll(n,e,t):r==="mark"?qd(n,e,t):!1}function P0(n,e){const{nodeExtensions:t}=ff(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Le(de(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Cm(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(s=>{i!==!1&&(Cm(s,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function TS(n){return n instanceof Se}function GF(n,e,t){const i=n.state.doc.content.size,s=Nr(e,0,i),o=Nr(t,0,i),a=n.coordsAtPos(s),l=n.coordsAtPos(o,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),h=Math.max(a.right,l.right),p=h-f,d=u-c,y={top:c,bottom:u,left:f,right:h,width:p,height:d,x:f,y:c};return{...y,toJSON:()=>y}}function WF(n,e,t){var r;const{selection:i}=e;let s=null;if(bm(i)&&(s=i.$cursor),s){const a=(r=n.storedMarks)!==null&&r!==void 0?r:s.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,f,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(t),d=!!t.isInSet(u.marks)||!u.marks.some(g=>g.type.excludes(t));c=p&&d}return!c}),c})}const UF=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:s}=t,{empty:o,ranges:a}=s,l=Hi(n,r.schema);if(i)if(o){const c=kS(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(h,p)=>{const d=Math.max(p,u),g=Math.min(p+h.nodeSize,f);h.marks.find(y=>y.type===l)?h.marks.forEach(y=>{l===y.type&&t.addMark(d,g,l.create({...y.attrs,...e}))}):t.addMark(d,g,l.create(e))})});return WF(r,t,l)},KF=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),YF=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const s=Rt(n,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>k0(s,{...o,...e})(t)?!0:a.clearNodes()).command(({state:a})=>k0(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},qF=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Nr(n,0,r.content.size),s=Se.create(r,i);e.setSelection(s)}return!0},XF=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:s}=typeof n=="number"?{from:n,to:n}:n,o=Te.atStart(r).from,a=Te.atEnd(r).to,l=Nr(i,o,a),c=Nr(s,o,a),u=Te.create(r,l,c);e.setSelection(u)}return!0},JF=n=>({state:e,dispatch:t})=>{const r=Rt(n,e.schema);return P3(r)(e,t)};function N0(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const QF=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Hc(c,a.node().type.name,a.node().attrs);if(s instanceof Se&&s.node.isBlock)return!a.parentOffset||!go(o,a.pos)?!1:(r&&(n&&N0(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:BF(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=f&&h?[{type:h,attrs:u}]:void 0,d=go(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!d&&go(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(d=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(d&&(s instanceof Te&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!f&&!a.parentOffset&&a.parent.type!==h)){const g=e.mapping.map(a.before()),m=e.doc.resolve(g);a.node(-1).canReplaceWith(m.index(),m.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}n&&N0(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return d},ZF=(n,e={})=>({tr:t,state:r,dispatch:i,editor:s})=>{var o;const a=Rt(n,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=q.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let M=l.depth-w;M>=l.depth-3;M-=1)y=q.from(l.node(M).copy(y));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,v={...Hc(h,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(v))||void 0;y=y.append(q.from(a.createAndFill(null,S)||void 0));const _=l.before(l.depth-(w-1));t.replace(_,l.after(-b),new ae(y,4-w,0));let k=-1;t.doc.nodesBetween(_,t.doc.content.size,(M,E)=>{if(k>-1)return!1;M.isTextblock&&M.content.size===0&&(k=E+1)}),k>-1&&t.setSelection(Te.near(t.doc.resolve(k))),t.scrollIntoView()}return!0}const p=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,d={...Hc(h,f.type.name,f.attrs),...e},g={...Hc(h,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const m=p?[{type:a,attrs:d},{type:p,attrs:g}]:[{type:a,attrs:d}];if(!go(t.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:w}=r,{splittableMarks:b}=s.extensionManager,v=w||y.$to.parentOffset&&y.$from.marks();if(t.split(l.pos,2,m).scrollIntoView(),!v||!i)return!0;const S=v.filter(_=>b.includes(_.type.name));t.ensureMarks(S)}return!0},mh=(n,e)=>{const t=wm(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&$i(n.doc,t.pos)&&n.join(t.pos),!0},gh=(n,e)=>{const t=wm(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&$i(n.doc,r)&&n.join(r),!0},e5=(n,e,t,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:h}=i.extensionManager,p=Rt(n,o.schema),d=Rt(e,o.schema),{selection:g,storedMarks:m}=o,{$from:y,$to:w}=g,b=y.blockRange(w),v=m||g.$to.parentOffset&&g.$from.marks();if(!b)return!1;const S=wm(_=>P0(_.type.name,f))(g);if(b.depth>=1&&S&&b.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(d);if(P0(S.node.type.name,f)&&p.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,p),!0)).command(()=>mh(s,p)).command(()=>gh(s,p)).run()}return!t||!v||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>mh(s,p)).command(()=>gh(s,p)).run():l().command(()=>{const _=u().wrapInList(p,r),k=v.filter(M=>h.includes(M.type.name));return s.ensureMarks(k),_?!0:c.clearNodes()}).wrapInList(p,r).command(()=>mh(s,p)).command(()=>gh(s,p)).run()},t5=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=t,o=Hi(n,r.schema);return qd(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},n5=(n,e,t={})=>({state:r,commands:i})=>{const s=Rt(n,r.schema),o=Rt(e,r.schema),a=ll(r,s,t);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...t})},r5=(n,e={})=>({state:t,commands:r})=>{const i=Rt(n,t.schema);return ll(t,i,e)?r.lift(i):r.wrapIn(i,e)},i5=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let s;if(i.spec.isInputRules&&(s=i.getState(n))){if(e){const o=n.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,n.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},s5=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(s=>{n.removeMark(s.$from.pos,s.$to.pos)}),!0},o5=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Hi(n,r.schema),{$from:c,empty:u,ranges:f}=a;if(!i)return!0;if(u&&o){let{from:h,to:p}=a;const d=(s=c.marks().find(m=>m.type===l))===null||s===void 0?void 0:s.attrs,g=ym(c,l,d);g&&(h=g.from,p=g.to),t.removeMark(h,p,l)}else f.forEach(h=>{t.removeMark(h.$from.pos,h.$to.pos,l)});return t.removeStoredMark(l),!0},a5=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let s=null,o=null;const a=pf(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(s=Rt(n,r.schema)),a==="mark"&&(o=Hi(n,r.schema)),i&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let f,h,p,d;t.selection.empty?r.doc.nodesBetween(c,u,(g,m)=>{s&&s===g.type&&(p=Math.max(m,c),d=Math.min(m+g.nodeSize,u),f=m,h=g)}):r.doc.nodesBetween(c,u,(g,m)=>{m<c&&s&&s===g.type&&(p=Math.max(m,c),d=Math.min(m+g.nodeSize,u),f=m,h=g),m>=c&&m<=u&&(s&&s===g.type&&t.setNodeMarkup(m,void 0,{...g.attrs,...e}),o&&g.marks.length&&g.marks.forEach(y=>{if(o===y.type){const w=Math.max(m,c),b=Math.min(m+g.nodeSize,u);t.addMark(w,b,o.create({...y.attrs,...e}))}}))}),h&&(f!==void 0&&t.setNodeMarkup(f,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(g=>{o===g.type&&t.addMark(p,d,o.create({...g.attrs,...e}))}))}),!0):!1},l5=(n,e={})=>({state:t,dispatch:r})=>{const i=Rt(n,t.schema);return k3(i,e)(t,r)},c5=(n,e={})=>({state:t,dispatch:r})=>{const i=Rt(n,t.schema);return E3(i,e)(t,r)};var u5=Object.freeze({__proto__:null,blur:q3,clearContent:X3,clearNodes:J3,command:Q3,createParagraphNear:Z3,cut:eF,deleteCurrentNode:tF,deleteNode:nF,deleteRange:rF,deleteSelection:iF,enter:sF,exitCode:oF,extendMarkRange:aF,first:lF,focus:cF,forEach:uF,insertContent:fF,insertContentAt:pF,joinBackward:vF,joinDown:gF,joinForward:yF,joinItemBackward:bF,joinItemForward:_F,joinTextblockBackward:wF,joinTextblockForward:CF,joinUp:mF,keyboardShortcut:xF,lift:AF,liftEmptyBlock:kF,liftListItem:EF,newlineInCode:TF,resetAttributes:OF,scrollIntoView:MF,selectAll:IF,selectNodeBackward:PF,selectNodeForward:NF,selectParentNode:RF,selectTextblockEnd:LF,selectTextblockStart:DF,setContent:FF,setMark:UF,setMeta:KF,setNode:YF,setNodeSelection:qF,setTextSelection:XF,sinkListItem:JF,splitBlock:QF,splitListItem:ZF,toggleList:e5,toggleMark:t5,toggleNode:n5,toggleWrap:r5,undoInputRule:i5,unsetAllMarks:s5,unsetMark:o5,updateAttributes:a5,wrapIn:l5,wrapInList:c5});const f5=Ut.create({name:"commands",addCommands(){return{...u5}}}),h5=Ut.create({name:"drop",addProseMirrorPlugins(){return[new on({key:new ir("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),d5=Ut.create({name:"editable",addProseMirrorPlugins(){return[new on({key:new ir("editable"),props:{editable:()=>this.editor.options.editable}})]}}),p5=Ut.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new on({key:new ir("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),m5=Ut.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:h,parent:p}=f,d=f.parent.isTextblock&&h>0?a.doc.resolve(h-1):f,g=d.parent.type.spec.isolating,m=f.pos-f.parentOffset,y=g&&d.parent.childCount===1?m===f.pos:Ie.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!y||y&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _m()||AS()?s:i},addProseMirrorPlugins(){return[new on({key:new ir("clearDocument"),appendTransaction:(n,e,t)=>{const r=n.some(g=>g.docChanged)&&!e.doc.eq(t.doc),i=n.some(g=>g.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=Ie.atStart(e.doc).from,c=Ie.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!Cm(t.doc))return;const h=t.tr,p=cf({state:t,transaction:h}),{commands:d}=new uf({editor:this.editor,state:p});if(d.clearNodes(),!!h.steps.length)return h}})]}}),g5=Ut.create({name:"paste",addProseMirrorPlugins(){return[new on({key:new ir("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),v5=Ut.create({name:"tabindex",addProseMirrorPlugins(){return[new on({key:new ir("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class ss{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new ss(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ss(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ss(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,s=t.isAtom&&!t.isText,o=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new ss(a,this.editor,i,i?t:null);i&&(l.actualDepth=this.depth+1),e.push(new ss(a,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const s=i.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==t[l])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(t);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>t[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const y5=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function b5(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}let _5=class extends N3{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=b5(y5,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=bS(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=t.filter(a=>!a.key.startsWith(o))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[d5,Y3.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),f5,p5,m5,v5,h5,g5].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new so(i,this)}createCommandManager(){this.commandManager=new uf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=Yd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=Yd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=SS(t,this.options.autofocus);this.view=new QD(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:io.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return VF(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return zF(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return gm(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return jF(this.state.doc,{blockSeparator:t,textSerializers:{...wS(this.schema),...r}})}get isEmpty(){return Cm(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new ss(t,this)}get $doc(){return this.$pos(0)}};function Io(n){return new hf({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Le(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(ES(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===n.type&&g!==p.mark.type)).filter(p=>p.to>c).length)return null;u<t.to&&s.delete(u,t.to),c>t.from&&s.delete(t.from+l,c);const h=t.from+l+o.length;s.addMark(t.from+l,h,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function w5(n){return new hf({find:n.find,handler:({state:e,range:t,match:r})=>{const i=Le(n.getAttributes,void 0,r)||{},{tr:s}=e,o=t.from;let a=t.to;const l=n.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=n.type.isInline?o:o-1;s.insert(c,n.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function Xd(n){return new hf({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),s=Le(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,s)}})}function cl(n){return new hf({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const s=Le(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&im(l,n.type,s);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:p}=n.editor.extensionManager,d=h||f.$to.parentOffset&&f.$from.marks();if(d){const g=d.filter(m=>p.includes(m.type.name));o.ensureMarks(g)}}if(n.keepAttributes){const f=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&$i(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)}})}let sr=class Jd{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(de(this,"addOptions",{name:this.name}))),this.storage=Le(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Jd(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>df(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Jd(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Le(de(t,"addOptions",{name:t.name})),t.storage=Le(de(t,"addStorage",{name:t.name,options:t.options})),t}};function Po(n){return new V3({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const s=Le(n.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),f=t.from+l.indexOf(a),h=f+a.length;if(ES(t.from,t.to,e.doc).filter(d=>d.mark.type.excluded.find(m=>m===n.type&&m!==d.mark.type)).filter(d=>d.to>f).length)return null;h<t.to&&o.delete(h,t.to),f>t.from&&o.delete(t.from+u,f),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}var hn="top",Vn="bottom",zn="right",dn="left",Sm="auto",El=[hn,Vn,zn,dn],No="start",ul="end",C5="clippingParents",OS="viewport",ia="popper",S5="reference",R0=El.reduce(function(n,e){return n.concat([e+"-"+No,e+"-"+ul])},[]),MS=[].concat(El,[Sm]).reduce(function(n,e){return n.concat([e,e+"-"+No,e+"-"+ul])},[]),x5="beforeRead",A5="read",k5="afterRead",E5="beforeMain",T5="main",O5="afterMain",M5="beforeWrite",I5="write",P5="afterWrite",N5=[x5,A5,k5,E5,T5,O5,M5,I5,P5];function Cr(n){return n?(n.nodeName||"").toLowerCase():null}function An(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ns(n){var e=An(n).Element;return n instanceof e||n instanceof Element}function jn(n){var e=An(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function xm(n){if(typeof ShadowRoot>"u")return!1;var e=An(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function R5(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];!jn(s)||!Cr(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function L5(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!jn(i)||!Cr(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const IS={name:"applyStyles",enabled:!0,phase:"write",fn:R5,effect:L5,requires:["computeStyles"]};function vr(n){return n.split("-")[0]}var Cs=Math.max,bu=Math.min,Ro=Math.round;function Qd(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function PS(){return!/^((?!chrome|android).)*safari/i.test(Qd())}function Lo(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),i=1,s=1;e&&jn(n)&&(i=n.offsetWidth>0&&Ro(r.width)/n.offsetWidth||1,s=n.offsetHeight>0&&Ro(r.height)/n.offsetHeight||1);var o=Ns(n)?An(n):window,a=o.visualViewport,l=!PS()&&t,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,f=r.width/i,h=r.height/s;return{width:f,height:h,top:u,right:c+f,bottom:u+h,left:c,x:c,y:u}}function Am(n){var e=Lo(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function NS(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&xm(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function $r(n){return An(n).getComputedStyle(n)}function D5(n){return["table","td","th"].indexOf(Cr(n))>=0}function Vi(n){return((Ns(n)?n.ownerDocument:n.document)||window.document).documentElement}function mf(n){return Cr(n)==="html"?n:n.assignedSlot||n.parentNode||(xm(n)?n.host:null)||Vi(n)}function L0(n){return!jn(n)||$r(n).position==="fixed"?null:n.offsetParent}function F5(n){var e=/firefox/i.test(Qd()),t=/Trident/i.test(Qd());if(t&&jn(n)){var r=$r(n);if(r.position==="fixed")return null}var i=mf(n);for(xm(i)&&(i=i.host);jn(i)&&["html","body"].indexOf(Cr(i))<0;){var s=$r(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Tl(n){for(var e=An(n),t=L0(n);t&&D5(t)&&$r(t).position==="static";)t=L0(t);return t&&(Cr(t)==="html"||Cr(t)==="body"&&$r(t).position==="static")?e:t||F5(n)||e}function km(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Ba(n,e,t){return Cs(n,bu(e,t))}function B5(n,e,t){var r=Ba(n,e,t);return r>t?t:r}function RS(){return{top:0,right:0,bottom:0,left:0}}function LS(n){return Object.assign({},RS(),n)}function DS(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var $5=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,LS(typeof e!="number"?e:DS(e,El))};function j5(n){var e,t=n.state,r=n.name,i=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=vr(t.placement),l=km(a),c=[dn,zn].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var f=$5(i.padding,t),h=Am(s),p=l==="y"?hn:dn,d=l==="y"?Vn:zn,g=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],m=o[l]-t.rects.reference[l],y=Tl(s),w=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,b=g/2-m/2,v=f[p],S=w-h[u]-f[d],_=w/2-h[u]/2+b,k=Ba(v,_,S),M=l;t.modifiersData[r]=(e={},e[M]=k,e.centerOffset=k-_,e)}}function H5(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||NS(e.elements.popper,i)&&(e.elements.arrow=i))}const V5={name:"arrow",enabled:!0,phase:"main",fn:j5,effect:H5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Do(n){return n.split("-")[1]}var z5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function G5(n,e){var t=n.x,r=n.y,i=e.devicePixelRatio||1;return{x:Ro(t*i)/i||0,y:Ro(r*i)/i||0}}function D0(n){var e,t=n.popper,r=n.popperRect,i=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,f=n.isFixed,h=o.x,p=h===void 0?0:h,d=o.y,g=d===void 0?0:d,m=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=m.x,g=m.y;var y=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),b=dn,v=hn,S=window;if(c){var _=Tl(t),k="clientHeight",M="clientWidth";if(_===An(t)&&(_=Vi(t),$r(_).position!=="static"&&a==="absolute"&&(k="scrollHeight",M="scrollWidth")),_=_,i===hn||(i===dn||i===zn)&&s===ul){v=Vn;var E=f&&_===S&&S.visualViewport?S.visualViewport.height:_[k];g-=E-r.height,g*=l?1:-1}if(i===dn||(i===hn||i===Vn)&&s===ul){b=zn;var F=f&&_===S&&S.visualViewport?S.visualViewport.width:_[M];p-=F-r.width,p*=l?1:-1}}var j=Object.assign({position:a},c&&z5),L=u===!0?G5({x:p,y:g},An(t)):{x:p,y:g};if(p=L.x,g=L.y,l){var V;return Object.assign({},j,(V={},V[v]=w?"0":"",V[b]=y?"0":"",V.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",V))}return Object.assign({},j,(e={},e[v]=w?g+"px":"",e[b]=y?p+"px":"",e.transform="",e))}function W5(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:vr(e.placement),variation:Do(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,D0(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,D0(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const U5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:W5,data:{}};var mc={passive:!0};function K5(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=An(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,mc)}),a&&l.addEventListener("resize",t.update,mc),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,mc)}),a&&l.removeEventListener("resize",t.update,mc)}}const Y5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:K5,data:{}};var q5={left:"right",right:"left",bottom:"top",top:"bottom"};function Vc(n){return n.replace(/left|right|bottom|top/g,function(e){return q5[e]})}var X5={start:"end",end:"start"};function F0(n){return n.replace(/start|end/g,function(e){return X5[e]})}function Em(n){var e=An(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function Tm(n){return Lo(Vi(n)).left+Em(n).scrollLeft}function J5(n,e){var t=An(n),r=Vi(n),i=t.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=PS();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+Tm(n),y:l}}function Q5(n){var e,t=Vi(n),r=Em(n),i=(e=n.ownerDocument)==null?void 0:e.body,s=Cs(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Cs(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Tm(n),l=-r.scrollTop;return $r(i||t).direction==="rtl"&&(a+=Cs(t.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Om(n){var e=$r(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function FS(n){return["html","body","#document"].indexOf(Cr(n))>=0?n.ownerDocument.body:jn(n)&&Om(n)?n:FS(mf(n))}function $a(n,e){var t;e===void 0&&(e=[]);var r=FS(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=An(r),o=i?[s].concat(s.visualViewport||[],Om(r)?r:[]):r,a=e.concat(o);return i?a:a.concat($a(mf(o)))}function Zd(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Z5(n,e){var t=Lo(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function B0(n,e,t){return e===OS?Zd(J5(n,t)):Ns(e)?Z5(e,t):Zd(Q5(Vi(n)))}function e4(n){var e=$a(mf(n)),t=["absolute","fixed"].indexOf($r(n).position)>=0,r=t&&jn(n)?Tl(n):n;return Ns(r)?e.filter(function(i){return Ns(i)&&NS(i,r)&&Cr(i)!=="body"}):[]}function t4(n,e,t,r){var i=e==="clippingParents"?e4(n):[].concat(e),s=[].concat(i,[t]),o=s[0],a=s.reduce(function(l,c){var u=B0(n,c,r);return l.top=Cs(u.top,l.top),l.right=bu(u.right,l.right),l.bottom=bu(u.bottom,l.bottom),l.left=Cs(u.left,l.left),l},B0(n,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function BS(n){var e=n.reference,t=n.element,r=n.placement,i=r?vr(r):null,s=r?Do(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(i){case hn:l={x:o,y:e.y-t.height};break;case Vn:l={x:o,y:e.y+e.height};break;case zn:l={x:e.x+e.width,y:a};break;case dn:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?km(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case No:l[c]=l[c]-(e[u]/2-t[u]/2);break;case ul:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function fl(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,s=t.strategy,o=s===void 0?n.strategy:s,a=t.boundary,l=a===void 0?C5:a,c=t.rootBoundary,u=c===void 0?OS:c,f=t.elementContext,h=f===void 0?ia:f,p=t.altBoundary,d=p===void 0?!1:p,g=t.padding,m=g===void 0?0:g,y=LS(typeof m!="number"?m:DS(m,El)),w=h===ia?S5:ia,b=n.rects.popper,v=n.elements[d?w:h],S=t4(Ns(v)?v:v.contextElement||Vi(n.elements.popper),l,u,o),_=Lo(n.elements.reference),k=BS({reference:_,element:b,strategy:"absolute",placement:i}),M=Zd(Object.assign({},b,k)),E=h===ia?M:_,F={top:S.top-E.top+y.top,bottom:E.bottom-S.bottom+y.bottom,left:S.left-E.left+y.left,right:E.right-S.right+y.right},j=n.modifiersData.offset;if(h===ia&&j){var L=j[i];Object.keys(F).forEach(function(V){var ue=[zn,Vn].indexOf(V)>=0?1:-1,ke=[hn,Vn].indexOf(V)>=0?"y":"x";F[V]+=L[ke]*ue})}return F}function n4(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?MS:l,u=Do(r),f=u?a?R0:R0.filter(function(d){return Do(d)===u}):El,h=f.filter(function(d){return c.indexOf(d)>=0});h.length===0&&(h=f);var p=h.reduce(function(d,g){return d[g]=fl(n,{placement:g,boundary:i,rootBoundary:s,padding:o})[vr(g)],d},{});return Object.keys(p).sort(function(d,g){return p[d]-p[g]})}function r4(n){if(vr(n)===Sm)return[];var e=Vc(n);return[F0(n),e,F0(e)]}function i4(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,f=t.rootBoundary,h=t.altBoundary,p=t.flipVariations,d=p===void 0?!0:p,g=t.allowedAutoPlacements,m=e.options.placement,y=vr(m),w=y===m,b=l||(w||!d?[Vc(m)]:r4(m)),v=[m].concat(b).reduce(function(Ye,Oe){return Ye.concat(vr(Oe)===Sm?n4(e,{placement:Oe,boundary:u,rootBoundary:f,padding:c,flipVariations:d,allowedAutoPlacements:g}):Oe)},[]),S=e.rects.reference,_=e.rects.popper,k=new Map,M=!0,E=v[0],F=0;F<v.length;F++){var j=v[F],L=vr(j),V=Do(j)===No,ue=[hn,Vn].indexOf(L)>=0,ke=ue?"width":"height",re=fl(e,{placement:j,boundary:u,rootBoundary:f,altBoundary:h,padding:c}),le=ue?V?zn:dn:V?Vn:hn;S[ke]>_[ke]&&(le=Vc(le));var ce=Vc(le),Re=[];if(s&&Re.push(re[L]<=0),a&&Re.push(re[le]<=0,re[ce]<=0),Re.every(function(Ye){return Ye})){E=j,M=!1;break}k.set(j,Re)}if(M)for(var me=d?3:1,Ce=function(Oe){var dt=v.find(function(jt){var St=k.get(jt);if(St)return St.slice(0,Oe).every(function(Yt){return Yt})});if(dt)return E=dt,"break"},Ae=me;Ae>0;Ae--){var Je=Ce(Ae);if(Je==="break")break}e.placement!==E&&(e.modifiersData[r]._skip=!0,e.placement=E,e.reset=!0)}}const s4={name:"flip",enabled:!0,phase:"main",fn:i4,requiresIfExists:["offset"],data:{_skip:!1}};function $0(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function j0(n){return[hn,zn,Vn,dn].some(function(e){return n[e]>=0})}function o4(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=fl(e,{elementContext:"reference"}),a=fl(e,{altBoundary:!0}),l=$0(o,r),c=$0(a,i,s),u=j0(l),f=j0(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const a4={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:o4};function l4(n,e,t){var r=vr(n),i=[dn,hn].indexOf(r)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[dn,zn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function c4(n){var e=n.state,t=n.options,r=n.name,i=t.offset,s=i===void 0?[0,0]:i,o=MS.reduce(function(u,f){return u[f]=l4(f,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const u4={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:c4};function f4(n){var e=n.state,t=n.name;e.modifiersData[t]=BS({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const h4={name:"popperOffsets",enabled:!0,phase:"read",fn:f4,data:{}};function d4(n){return n==="x"?"y":"x"}function p4(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,s=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,f=t.padding,h=t.tether,p=h===void 0?!0:h,d=t.tetherOffset,g=d===void 0?0:d,m=fl(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),y=vr(e.placement),w=Do(e.placement),b=!w,v=km(y),S=d4(v),_=e.modifiersData.popperOffsets,k=e.rects.reference,M=e.rects.popper,E=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,F=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(_){if(s){var V,ue=v==="y"?hn:dn,ke=v==="y"?Vn:zn,re=v==="y"?"height":"width",le=_[v],ce=le+m[ue],Re=le-m[ke],me=p?-M[re]/2:0,Ce=w===No?k[re]:M[re],Ae=w===No?-M[re]:-k[re],Je=e.elements.arrow,Ye=p&&Je?Am(Je):{width:0,height:0},Oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:RS(),dt=Oe[ue],jt=Oe[ke],St=Ba(0,k[re],Ye[re]),Yt=b?k[re]/2-me-St-dt-F.mainAxis:Ce-St-dt-F.mainAxis,gt=b?-k[re]/2+me+St+jt+F.mainAxis:Ae+St+jt+F.mainAxis,qt=e.elements.arrow&&Tl(e.elements.arrow),mn=qt?v==="y"?qt.clientTop||0:qt.clientLeft||0:0,O=(V=j==null?void 0:j[v])!=null?V:0,A=le+Yt-O-mn,D=le+gt-O,W=Ba(p?bu(ce,A):ce,le,p?Cs(Re,D):Re);_[v]=W,L[v]=W-le}if(a){var G,Y=v==="x"?hn:dn,ne=v==="x"?Vn:zn,C=_[S],x=S==="y"?"height":"width",I=C+m[Y],$=C-m[ne],Z=[hn,dn].indexOf(y)!==-1,U=(G=j==null?void 0:j[S])!=null?G:0,N=Z?I:C-k[x]-M[x]-U+F.altAxis,B=Z?C+k[x]+M[x]-U-F.altAxis:$,ve=p&&Z?B5(N,C,B):Ba(p?N:I,C,p?B:$);_[S]=ve,L[S]=ve-C}e.modifiersData[r]=L}}const m4={name:"preventOverflow",enabled:!0,phase:"main",fn:p4,requiresIfExists:["offset"]};function g4(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function v4(n){return n===An(n)||!jn(n)?Em(n):g4(n)}function y4(n){var e=n.getBoundingClientRect(),t=Ro(e.width)/n.offsetWidth||1,r=Ro(e.height)/n.offsetHeight||1;return t!==1||r!==1}function b4(n,e,t){t===void 0&&(t=!1);var r=jn(e),i=jn(e)&&y4(e),s=Vi(e),o=Lo(n,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((Cr(e)!=="body"||Om(s))&&(a=v4(e)),jn(e)?(l=Lo(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Tm(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function _4(n){var e=new Map,t=new Set,r=[];n.forEach(function(s){e.set(s.name,s)});function i(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return n.forEach(function(s){t.has(s.name)||i(s)}),r}function w4(n){var e=_4(n);return N5.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function C4(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function S4(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var H0={placement:"bottom",modifiers:[],strategy:"absolute"};function V0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function x4(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,s=i===void 0?H0:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},H0,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],h=!1,p={state:u,setOptions:function(y){var w=typeof y=="function"?y(u.options):y;g(),u.options=Object.assign({},s,u.options,w),u.scrollParents={reference:Ns(a)?$a(a):a.contextElement?$a(a.contextElement):[],popper:$a(l)};var b=w4(S4([].concat(r,u.options.modifiers)));return u.orderedModifiers=b.filter(function(v){return v.enabled}),d(),p.update()},forceUpdate:function(){if(!h){var y=u.elements,w=y.reference,b=y.popper;if(V0(w,b)){u.rects={reference:b4(w,Tl(b),u.options.strategy==="fixed"),popper:Am(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(F){return u.modifiersData[F.name]=Object.assign({},F.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var S=u.orderedModifiers[v],_=S.fn,k=S.options,M=k===void 0?{}:k,E=S.name;typeof _=="function"&&(u=_({state:u,options:M,name:E,instance:p})||u)}}}},update:C4(function(){return new Promise(function(m){p.forceUpdate(),m(u)})}),destroy:function(){g(),h=!0}};if(!V0(a,l))return p;p.setOptions(c).then(function(m){!h&&c.onFirstUpdate&&c.onFirstUpdate(m)});function d(){u.orderedModifiers.forEach(function(m){var y=m.name,w=m.options,b=w===void 0?{}:w,v=m.effect;if(typeof v=="function"){var S=v({state:u,name:y,instance:p,options:b}),_=function(){};f.push(S||_)}})}function g(){f.forEach(function(m){return m()}),f=[]}return p}}var A4=[Y5,h4,U5,IS,u4,s4,m4,V5,a4],k4=x4({defaultModifiers:A4}),E4="tippy-box",$S="tippy-content",T4="tippy-backdrop",jS="tippy-arrow",HS="tippy-svg-arrow",Zi={passive:!0,capture:!0},VS=function(){return document.body};function vh(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function Mm(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function zS(n,e){return typeof n=="function"?n.apply(void 0,e):n}function z0(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function O4(n){return n.split(/\s+/).filter(Boolean)}function eo(n){return[].concat(n)}function G0(n,e){n.indexOf(e)===-1&&n.push(e)}function M4(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function I4(n){return n.split("-")[0]}function _u(n){return[].slice.call(n)}function W0(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function ja(){return document.createElement("div")}function gf(n){return["Element","Fragment"].some(function(e){return Mm(n,e)})}function P4(n){return Mm(n,"NodeList")}function N4(n){return Mm(n,"MouseEvent")}function R4(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function L4(n){return gf(n)?[n]:P4(n)?_u(n):Array.isArray(n)?n:_u(document.querySelectorAll(n))}function yh(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function U0(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function D4(n){var e,t=eo(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function F4(n,e){var t=e.clientX,r=e.clientY;return n.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,c=I4(o.placement),u=o.modifiersData.offset;if(!u)return!0;var f=c==="bottom"?u.top.y:0,h=c==="top"?u.bottom.y:0,p=c==="right"?u.left.x:0,d=c==="left"?u.right.x:0,g=s.top-r+f>l,m=r-s.bottom-h>l,y=s.left-t+p>l,w=t-s.right-d>l;return g||m||y||w})}function bh(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){n[r](i,t)})}function K0(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var cr={isTouch:!1},Y0=0;function B4(){cr.isTouch||(cr.isTouch=!0,window.performance&&document.addEventListener("mousemove",GS))}function GS(){var n=performance.now();n-Y0<20&&(cr.isTouch=!1,document.removeEventListener("mousemove",GS)),Y0=n}function $4(){var n=document.activeElement;if(R4(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function j4(){document.addEventListener("touchstart",B4,Zi),window.addEventListener("blur",$4)}var H4=typeof window<"u"&&typeof document<"u",V4=H4?!!window.msCrypto:!1,z4={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},G4={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Zn=Object.assign({appendTo:VS,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},z4,G4),W4=Object.keys(Zn),U4=function(e){var t=Object.keys(e);t.forEach(function(r){Zn[r]=e[r]})};function WS(n){var e=n.plugins||[],t=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var a;r[s]=n[s]!==void 0?n[s]:(a=Zn[s])!=null?a:o}return r},{});return Object.assign({},n,t)}function K4(n,e){var t=e?Object.keys(WS(Object.assign({},Zn,{plugins:e}))):W4,r=t.reduce(function(i,s){var o=(n.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function q0(n,e){var t=Object.assign({},e,{content:zS(e.content,[n])},e.ignoreAttributes?{}:K4(n,e.plugins));return t.aria=Object.assign({},Zn.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var Y4=function(){return"innerHTML"};function ep(n,e){n[Y4()]=e}function X0(n){var e=ja();return n===!0?e.className=jS:(e.className=HS,gf(n)?e.appendChild(n):ep(e,n)),e}function J0(n,e){gf(e.content)?(ep(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?ep(n,e.content):n.textContent=e.content)}function tp(n){var e=n.firstElementChild,t=_u(e.children);return{box:e,content:t.find(function(r){return r.classList.contains($S)}),arrow:t.find(function(r){return r.classList.contains(jS)||r.classList.contains(HS)}),backdrop:t.find(function(r){return r.classList.contains(T4)})}}function US(n){var e=ja(),t=ja();t.className=E4,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=ja();r.className=$S,r.setAttribute("data-state","hidden"),J0(r,n.props),e.appendChild(t),t.appendChild(r),i(n.props,n.props);function i(s,o){var a=tp(e),l=a.box,c=a.content,u=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&J0(c,n.props),o.arrow?u?s.arrow!==o.arrow&&(l.removeChild(u),l.appendChild(X0(o.arrow))):l.appendChild(X0(o.arrow)):u&&l.removeChild(u)}return{popper:e,onUpdate:i}}US.$$tippy=!0;var q4=1,gc=[],_h=[];function X4(n,e){var t=q0(n,Object.assign({},Zn,WS(W0(e)))),r,i,s,o=!1,a=!1,l=!1,c=!1,u,f,h,p=[],d=z0(A,t.interactiveDebounce),g,m=q4++,y=null,w=M4(t.plugins),b={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:m,reference:n,popper:ja(),popperInstance:y,props:t,state:b,plugins:w,clearDelayTimeouts:N,setProps:B,setContent:ve,show:_e,hide:Xe,hideWithInteractivity:Tt,enable:Z,disable:U,unmount:Xt,destroy:Gs};if(!t.render)return v;var S=t.render(v),_=S.popper,k=S.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+v.id,v.popper=_,n._tippy=v,_._tippy=v;var M=w.map(function(H){return H.fn(v)}),E=n.hasAttribute("aria-expanded");return qt(),me(),le(),ce("onCreate",[v]),t.showOnCreate&&I(),_.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),_.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&ue().addEventListener("mousemove",d)}),v;function F(){var H=v.props.touch;return Array.isArray(H)?H:[H,0]}function j(){return F()[0]==="hold"}function L(){var H;return!!((H=v.props.render)!=null&&H.$$tippy)}function V(){return g||n}function ue(){var H=V().parentNode;return H?D4(H):document}function ke(){return tp(_)}function re(H){return v.state.isMounted&&!v.state.isVisible||cr.isTouch||u&&u.type==="focus"?0:vh(v.props.delay,H?0:1,Zn.delay)}function le(H){H===void 0&&(H=!1),_.style.pointerEvents=v.props.interactive&&!H?"":"none",_.style.zIndex=""+v.props.zIndex}function ce(H,he,pe){if(pe===void 0&&(pe=!0),M.forEach(function($e){$e[H]&&$e[H].apply($e,he)}),pe){var Ne;(Ne=v.props)[H].apply(Ne,he)}}function Re(){var H=v.props.aria;if(H.content){var he="aria-"+H.content,pe=_.id,Ne=eo(v.props.triggerTarget||n);Ne.forEach(function($e){var Jt=$e.getAttribute(he);if(v.state.isVisible)$e.setAttribute(he,Jt?Jt+" "+pe:pe);else{var Tn=Jt&&Jt.replace(pe,"").trim();Tn?$e.setAttribute(he,Tn):$e.removeAttribute(he)}})}}function me(){if(!(E||!v.props.aria.expanded)){var H=eo(v.props.triggerTarget||n);H.forEach(function(he){v.props.interactive?he.setAttribute("aria-expanded",v.state.isVisible&&he===V()?"true":"false"):he.removeAttribute("aria-expanded")})}}function Ce(){ue().removeEventListener("mousemove",d),gc=gc.filter(function(H){return H!==d})}function Ae(H){if(!(cr.isTouch&&(l||H.type==="mousedown"))){var he=H.composedPath&&H.composedPath()[0]||H.target;if(!(v.props.interactive&&K0(_,he))){if(eo(v.props.triggerTarget||n).some(function(pe){return K0(pe,he)})){if(cr.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else ce("onClickOutside",[v,H]);v.props.hideOnClick===!0&&(v.clearDelayTimeouts(),v.hide(),a=!0,setTimeout(function(){a=!1}),v.state.isMounted||dt())}}}function Je(){l=!0}function Ye(){l=!1}function Oe(){var H=ue();H.addEventListener("mousedown",Ae,!0),H.addEventListener("touchend",Ae,Zi),H.addEventListener("touchstart",Ye,Zi),H.addEventListener("touchmove",Je,Zi)}function dt(){var H=ue();H.removeEventListener("mousedown",Ae,!0),H.removeEventListener("touchend",Ae,Zi),H.removeEventListener("touchstart",Ye,Zi),H.removeEventListener("touchmove",Je,Zi)}function jt(H,he){Yt(H,function(){!v.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&he()})}function St(H,he){Yt(H,he)}function Yt(H,he){var pe=ke().box;function Ne($e){$e.target===pe&&(bh(pe,"remove",Ne),he())}if(H===0)return he();bh(pe,"remove",f),bh(pe,"add",Ne),f=Ne}function gt(H,he,pe){pe===void 0&&(pe=!1);var Ne=eo(v.props.triggerTarget||n);Ne.forEach(function($e){$e.addEventListener(H,he,pe),p.push({node:$e,eventType:H,handler:he,options:pe})})}function qt(){j()&&(gt("touchstart",O,{passive:!0}),gt("touchend",D,{passive:!0})),O4(v.props.trigger).forEach(function(H){if(H!=="manual")switch(gt(H,O),H){case"mouseenter":gt("mouseleave",D);break;case"focus":gt(V4?"focusout":"blur",W);break;case"focusin":gt("focusout",W);break}})}function mn(){p.forEach(function(H){var he=H.node,pe=H.eventType,Ne=H.handler,$e=H.options;he.removeEventListener(pe,Ne,$e)}),p=[]}function O(H){var he,pe=!1;if(!(!v.state.isEnabled||G(H)||a)){var Ne=((he=u)==null?void 0:he.type)==="focus";u=H,g=H.currentTarget,me(),!v.state.isVisible&&N4(H)&&gc.forEach(function($e){return $e(H)}),H.type==="click"&&(v.props.trigger.indexOf("mouseenter")<0||o)&&v.props.hideOnClick!==!1&&v.state.isVisible?pe=!0:I(H),H.type==="click"&&(o=!pe),pe&&!Ne&&$(H)}}function A(H){var he=H.target,pe=V().contains(he)||_.contains(he);if(!(H.type==="mousemove"&&pe)){var Ne=x().concat(_).map(function($e){var Jt,Tn=$e._tippy,Ws=(Jt=Tn.popperInstance)==null?void 0:Jt.state;return Ws?{popperRect:$e.getBoundingClientRect(),popperState:Ws,props:t}:null}).filter(Boolean);F4(Ne,H)&&(Ce(),$(H))}}function D(H){var he=G(H)||v.props.trigger.indexOf("click")>=0&&o;if(!he){if(v.props.interactive){v.hideWithInteractivity(H);return}$(H)}}function W(H){v.props.trigger.indexOf("focusin")<0&&H.target!==V()||v.props.interactive&&H.relatedTarget&&_.contains(H.relatedTarget)||$(H)}function G(H){return cr.isTouch?j()!==H.type.indexOf("touch")>=0:!1}function Y(){ne();var H=v.props,he=H.popperOptions,pe=H.placement,Ne=H.offset,$e=H.getReferenceClientRect,Jt=H.moveTransition,Tn=L()?tp(_).arrow:null,Ws=$e?{getBoundingClientRect:$e,contextElement:$e.contextElement||V()}:n,Hm={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Il){var Us=Il.state;if(L()){var bx=ke(),Af=bx.box;["placement","reference-hidden","escaped"].forEach(function(Pl){Pl==="placement"?Af.setAttribute("data-placement",Us.placement):Us.attributes.popper["data-popper-"+Pl]?Af.setAttribute("data-"+Pl,""):Af.removeAttribute("data-"+Pl)}),Us.attributes.popper={}}}},Wi=[{name:"offset",options:{offset:Ne}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Jt}},Hm];L()&&Tn&&Wi.push({name:"arrow",options:{element:Tn,padding:3}}),Wi.push.apply(Wi,(he==null?void 0:he.modifiers)||[]),v.popperInstance=k4(Ws,_,Object.assign({},he,{placement:pe,onFirstUpdate:h,modifiers:Wi}))}function ne(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function C(){var H=v.props.appendTo,he,pe=V();v.props.interactive&&H===VS||H==="parent"?he=pe.parentNode:he=zS(H,[pe]),he.contains(_)||he.appendChild(_),v.state.isMounted=!0,Y()}function x(){return _u(_.querySelectorAll("[data-tippy-root]"))}function I(H){v.clearDelayTimeouts(),H&&ce("onTrigger",[v,H]),Oe();var he=re(!0),pe=F(),Ne=pe[0],$e=pe[1];cr.isTouch&&Ne==="hold"&&$e&&(he=$e),he?r=setTimeout(function(){v.show()},he):v.show()}function $(H){if(v.clearDelayTimeouts(),ce("onUntrigger",[v,H]),!v.state.isVisible){dt();return}if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(H.type)>=0&&o)){var he=re(!1);he?i=setTimeout(function(){v.state.isVisible&&v.hide()},he):s=requestAnimationFrame(function(){v.hide()})}}function Z(){v.state.isEnabled=!0}function U(){v.hide(),v.state.isEnabled=!1}function N(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function B(H){if(!v.state.isDestroyed){ce("onBeforeUpdate",[v,H]),mn();var he=v.props,pe=q0(n,Object.assign({},he,W0(H),{ignoreAttributes:!0}));v.props=pe,qt(),he.interactiveDebounce!==pe.interactiveDebounce&&(Ce(),d=z0(A,pe.interactiveDebounce)),he.triggerTarget&&!pe.triggerTarget?eo(he.triggerTarget).forEach(function(Ne){Ne.removeAttribute("aria-expanded")}):pe.triggerTarget&&n.removeAttribute("aria-expanded"),me(),le(),k&&k(he,pe),v.popperInstance&&(Y(),x().forEach(function(Ne){requestAnimationFrame(Ne._tippy.popperInstance.forceUpdate)})),ce("onAfterUpdate",[v,H])}}function ve(H){v.setProps({content:H})}function _e(){var H=v.state.isVisible,he=v.state.isDestroyed,pe=!v.state.isEnabled,Ne=cr.isTouch&&!v.props.touch,$e=vh(v.props.duration,0,Zn.duration);if(!(H||he||pe||Ne)&&!V().hasAttribute("disabled")&&(ce("onShow",[v],!1),v.props.onShow(v)!==!1)){if(v.state.isVisible=!0,L()&&(_.style.visibility="visible"),le(),Oe(),v.state.isMounted||(_.style.transition="none"),L()){var Jt=ke(),Tn=Jt.box,Ws=Jt.content;yh([Tn,Ws],0)}h=function(){var Wi;if(!(!v.state.isVisible||c)){if(c=!0,_.offsetHeight,_.style.transition=v.props.moveTransition,L()&&v.props.animation){var xf=ke(),Il=xf.box,Us=xf.content;yh([Il,Us],$e),U0([Il,Us],"visible")}Re(),me(),G0(_h,v),(Wi=v.popperInstance)==null||Wi.forceUpdate(),ce("onMount",[v]),v.props.animation&&L()&&St($e,function(){v.state.isShown=!0,ce("onShown",[v])})}},C()}}function Xe(){var H=!v.state.isVisible,he=v.state.isDestroyed,pe=!v.state.isEnabled,Ne=vh(v.props.duration,1,Zn.duration);if(!(H||he||pe)&&(ce("onHide",[v],!1),v.props.onHide(v)!==!1)){if(v.state.isVisible=!1,v.state.isShown=!1,c=!1,o=!1,L()&&(_.style.visibility="hidden"),Ce(),dt(),le(!0),L()){var $e=ke(),Jt=$e.box,Tn=$e.content;v.props.animation&&(yh([Jt,Tn],Ne),U0([Jt,Tn],"hidden"))}Re(),me(),v.props.animation?L()&&jt(Ne,v.unmount):v.unmount()}}function Tt(H){ue().addEventListener("mousemove",d),G0(gc,d),d(H)}function Xt(){v.state.isVisible&&v.hide(),v.state.isMounted&&(ne(),x().forEach(function(H){H._tippy.unmount()}),_.parentNode&&_.parentNode.removeChild(_),_h=_h.filter(function(H){return H!==v}),v.state.isMounted=!1,ce("onHidden",[v]))}function Gs(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),mn(),delete n._tippy,v.state.isDestroyed=!0,ce("onDestroy",[v]))}}function Ol(n,e){e===void 0&&(e={});var t=Zn.plugins.concat(e.plugins||[]);j4();var r=Object.assign({},e,{plugins:t}),i=L4(n),s=i.reduce(function(o,a){var l=a&&X4(a,r);return l&&o.push(l),o},[]);return gf(n)?s[0]:s}Ol.defaultProps=Zn;Ol.setDefaultProps=U4;Ol.currentInput=cr;Object.assign({},IS,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});Ol.setDefaultProps({render:US});class J4{constructor({editor:e,element:t,view:r,tippyOptions:i={},updateDelay:s=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:a,state:l,from:c,to:u})=>{const{doc:f,selection:h}=l,{empty:p}=h,d=!f.textBetween(c,u).length&&bm(l.selection),g=this.element.contains(document.activeElement);return!(!(a.hasFocus()||g)||p||d||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:a})=>{var l;if(this.preventHide){this.preventHide=!1;return}a!=null&&a.relatedTarget&&(!((l=this.element.parentNode)===null||l===void 0)&&l.contains(a.relatedTarget))||(a==null?void 0:a.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=a=>{this.blurHandler({event:a})},this.handleDebouncedUpdate=(a,l)=>{const c=!(l!=null&&l.selection.eq(a.state.selection)),u=!(l!=null&&l.doc.eq(a.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(a,c,u,l)},this.updateDelay))},this.updateHandler=(a,l,c,u)=>{var f,h,p;const{state:d,composing:g}=a,{selection:m}=d;if(g||!l&&!c)return;this.createTooltip();const{ranges:w}=m,b=Math.min(...w.map(_=>_.$from.pos)),v=Math.max(...w.map(_=>_.$to.pos));if(!((f=this.shouldShow)===null||f===void 0?void 0:f.call(this,{editor:this.editor,element:this.element,view:a,state:d,oldState:u,from:b,to:v}))){this.hide();return}(h=this.tippy)===null||h===void 0||h.setProps({getReferenceClientRect:((p=this.tippyOptions)===null||p===void 0?void 0:p.getReferenceClientRect)||(()=>{if(TS(d.selection)){let _=a.nodeDOM(b);if(_){const k=_.dataset.nodeViewWrapper?_:_.querySelector("[data-node-view-wrapper]");if(k&&(_=k.firstChild),_)return _.getBoundingClientRect()}}return GF(a,b,v)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=s,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=Ol(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,t);return}const s=!(t!=null&&t.selection.eq(e.state.selection)),o=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,s,o,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const KS=n=>new on({key:typeof n.pluginKey=="string"?new ir(n.pluginKey):n.pluginKey,view:e=>new J4({view:e,...n})});Ut.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[KS({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});const Q4=Ge({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(n,{slots:e}){const t=bn(null);return Bo(()=>{const{updateDelay:r,editor:i,pluginKey:s,shouldShow:o,tippyOptions:a}=n;i.registerPlugin(KS({updateDelay:r,editor:i,element:t.value,pluginKey:s,shouldShow:o,tippyOptions:a}))}),pl(()=>{const{pluginKey:r,editor:i}=n;i.unregisterPlugin(r)}),()=>{var r;return $o("div",{ref:t},(r=e.default)===null||r===void 0?void 0:r.call(e))}}});function Q0(n){return oA((e,t)=>({get(){return e(),n},set(r){n=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}class Z4 extends _5{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=Q0(this.view.state),this.reactiveExtensionStorage=Q0(this.extensionStorage),this.on("beforeTransaction",({nextState:t})=>{this.reactiveState.value=t,this.reactiveExtensionStorage.value=this.extensionStorage}),t1(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){const r=super.registerPlugin(e,t);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const t=super.unregisterPlugin(e);return this.reactiveState&&t&&(this.reactiveState.value=t),t}}const eB=Ge({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(n){const e=bn(),t=br();return YA(()=>{const r=n.editor;r&&r.options.element&&e.value&&Eu(()=>{if(!e.value||!r.options.element.firstChild)return;const i=P(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=t.ctx._,t&&(r.appContext={...t.appContext,provides:t.provides}),r.setOptions({element:i}),r.createNodeViews()})}),pl(()=>{const r=n.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return $o("div",{ref:n=>{this.rootEl=n}})}}),tB=(n={})=>{const e=vp();return Bo(()=>{e.value=new Z4(n)}),pl(()=>{var t,r,i;const s=(t=e.value)===null||t===void 0?void 0:t.options.element,o=s==null?void 0:s.cloneNode(!0);(r=s==null?void 0:s.parentNode)===null||r===void 0||r.replaceChild(o,s),(i=e.value)===null||i===void 0||i.destroy()}),e},nB=/^\s*>\s$/,rB=sr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[cl({find:nB,type:this.type})]}}),iB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,sB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,oB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,aB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,lB=Mi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Io({find:iB,type:this.type}),Io({find:oB,type:this.type})]},addPasteRules(){return[Po({find:sB,type:this.type}),Po({find:aB,type:this.type})]}}),cB="listItem",Z0="textStyle",eb=/^\s*([-+*])\s$/,uB=sr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cB,this.editor.getAttributes(Z0)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=cl({find:eb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=cl({find:eb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Z0),editor:this.editor})),[n]}}),fB=new RegExp("(?<!`)`([^`]+)`(?!`)"),hB=new RegExp("(?<!`)`([^`]+)`(?!`)","g"),dB=Mi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Io({find:fB,type:this.type})]},addPasteRules(){return[Po({find:hB,type:this.type})]}}),pB=/^```([a-z]+)?[\s\n]$/,mB=/^~~~([a-z]+)?[\s\n]$/,gB=sr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,s=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",sn(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:s}=t;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(Ie.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[Xd({find:pB,type:this.type,getAttributes:n=>({language:n[1]})}),Xd({find:mB,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new on({key:new ir("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!t||!s)return!1;const{tr:o,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Te.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),vB=sr.create({name:"doc",topNode:!0,content:"block+"});function yB(n={}){return new on({view(e){return new bB(e,n)}})}class bB{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=a?u.bottom:u.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!s){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=xC(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const _B=Ut.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[yB(this.options)]}});class pt extends Ie{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return pt.valid(r)?new pt(r):Ie.near(r)}content(){return ae.empty}eq(e){return e instanceof pt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new pt(e.resolve(t.pos))}getBookmark(){return new Im(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!wB(e)||!CB(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&pt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let l=e.doc.resolve(i);if(pt.valid(l))return l}for(;;){let o=t>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Se.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*t),r=!1;continue e}break}s=o,i+=t;let a=e.doc.resolve(i);if(pt.valid(a))return a}return null}}}pt.prototype.visible=!1;pt.findFrom=pt.findGapCursorFrom;Ie.jsonID("gapcursor",pt);class Im{constructor(e){this.pos=e}map(e){return new Im(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return pt.valid(t)?new pt(t):Ie.near(t)}}function wB(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function CB(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function SB(){return new on({props:{decorations:EB,createSelectionBetween(n,e,t){return e.pos==t.pos&&pt.valid(t)?new pt(t):null},handleClick:AB,handleKeyDown:xB,handleDOMEvents:{beforeinput:kB}}})}const xB=fS({ArrowLeft:vc("horiz",-1),ArrowRight:vc("horiz",1),ArrowUp:vc("vert",-1),ArrowDown:vc("vert",1)});function vc(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Te){if(!s.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=pt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new pt(c))),!0):!1}}function AB(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!pt.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&Se.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new pt(r))),!0)}function kB(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof pt))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=q.empty;for(let o=r.length-1;o>=0;o--)i=q.from(r[o].createAndFill(null,i));let s=n.state.tr.replace(t.pos,t.pos,new ae(i,0,0));return s.setSelection(Te.near(s.doc.resolve(t.pos+1))),n.dispatch(s),!1}function EB(n){if(!(n.selection instanceof pt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",xt.create(n.doc,[Dn.widget(n.selection.head,e,{key:"gapcursor"})])}const TB=Ut.create({name:"gapCursor",addProseMirrorPlugins(){return[SB()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Le(de(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),OB=sr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",sn(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:s}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const f=l.filter(h=>a.includes(h.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),MB=sr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,sn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Xd({find:new RegExp(`^(#{1,${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var wu=200,Pt=function(){};Pt.prototype.append=function(e){return e.length?(e=Pt.from(e),!this.length&&e||e.length<wu&&this.leafAppend(e)||this.length<wu&&e.leafPrepend(this)||this.appendInner(e)):this};Pt.prototype.prepend=function(e){return e.length?Pt.from(e).append(this):this};Pt.prototype.appendInner=function(e){return new IB(this,e)};Pt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Pt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Pt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Pt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Pt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},t,r),i};Pt.from=function(e){return e instanceof Pt?e:e&&e.length?new YS(e):Pt.empty};var YS=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=wu)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=wu)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Pt);Pt.empty=new YS([]);var IB=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Pt);const PB=500;class Xn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;t&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((f,h)=>{if(!f.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,u.push(f);return}if(i){u.push(new ar(f.map));let p=f.step.map(i.slice(s)),d;p&&o.maybeStep(p).doc&&(d=o.mapping.maps[o.mapping.maps.length-1],c.push(new ar(d,void 0,void 0,c.length+u.length))),s--,d&&i.appendMap(d,s)}else o.maybeStep(f.step);if(f.selection)return a=i?f.selection.map(i.slice(s)):f.selection,l=new Xn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),h=new ar(e.mapping.maps[u],f,t),p;(p=l&&l.merge(h))&&(h=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),t&&(o++,t=void 0),i||(l=h)}let c=o-r.depth;return c>RB&&(a=NB(a,c),o-=c),new Xn(a.append(s),o)}remapping(e,t){let r=new mo;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new Xn(this.items.append(e.map(t=>new ar(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=t;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let d=s.maps[p];if(h.step){let g=e.steps[p].invert(e.docs[p]),m=h.selection&&h.selection.map(s.slice(l+1,p));m&&a++,r.push(new ar(d,g,m))}else r.push(new ar(d))},i);let c=[];for(let h=t;h<o;h++)c.push(new ar(s.maps[h]));let u=this.items.slice(0,i).append(c).append(r),f=new Xn(u,a);return f.emptyItemCount()>PB&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=o.selection&&o.selection.map(t.slice(r));u&&s++;let f=new ar(c.invert(),l,u),h,p=i.length-1;(h=i.length&&i[p].merge(f))?i[p]=h:i.push(f)}}else o.map&&r--},this.items.length,0),new Xn(Pt.from(i.reverse()),s)}}Xn.empty=new Xn(Pt.empty,0);function NB(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class ar{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new ar(t.getMap().invert(),t,this.selection)}}}class si{constructor(e,t,r,i,s){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const RB=20;function LB(n,e,t,r){let i=t.getMeta(Ss),s;if(i)return i.historyState;t.getMeta(BB)&&(n=new si(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Ss))return o.getMeta(Ss).redo?new si(n.done.addTransform(t,void 0,r,zc(e)),n.undone,tb(t.mapping.maps),n.prevTime,n.prevComposition):new si(n.done,n.undone.addTransform(t,void 0,r,zc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!DB(t,n.prevRanges)),c=o?wh(n.prevRanges,t.mapping):tb(t.mapping.maps);return new si(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,zc(e)),Xn.empty,c,t.time,a??n.prevComposition)}else return(s=t.getMeta("rebased"))?new si(n.done.rebased(t,s),n.undone.rebased(t,s),wh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new si(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),wh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function DB(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(t=!0)}),t}function tb(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,s,o)=>e.push(s,o));return e}function wh(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),s=e.map(n[r+1],-1);i<=s&&t.push(i,s)}return t}function FB(n,e,t){let r=zc(e),i=Ss.get(e).spec.config,s=(t?n.undone:n.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(t?n.done:n.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new si(t?a:s.remaining,t?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Ss,{redo:t,historyState:l})}let Ch=!1,nb=null;function zc(n){let e=n.plugins;if(nb!=e){Ch=!1,nb=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ch=!0;break}}return Ch}const Ss=new ir("history"),BB=new ir("closeHistory");function $B(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new on({key:Ss,state:{init(){return new si(Xn.empty,Xn.empty,null,0,-1)},apply(e,t,r){return LB(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?XS:r=="historyRedo"?JS:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function qS(n,e){return(t,r)=>{let i=Ss.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let s=FB(i,t,n);s&&r(e?s.scrollIntoView():s)}return!0}}const XS=qS(!1,!0),JS=qS(!0,!0),jB=Ut.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>XS(n,e),redo:()=>({state:n,dispatch:e})=>JS(n,e)}},addProseMirrorPlugins(){return[$B(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),HB=sr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",sn(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,s=n();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):TS(t)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Te.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Se.create(o.doc,c.pos)):o.setSelection(Te.create(o.doc,c.pos));else{const f=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();f&&(o.insert(u,f),o.setSelection(Te.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[w5({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),VB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,zB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,GB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,WB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,UB=Mi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Io({find:VB,type:this.type}),Io({find:GB,type:this.type})]},addPasteRules(){return[Po({find:zB,type:this.type}),Po({find:WB,type:this.type})]}}),KB=sr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",sn(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),YB="listItem",rb="textStyle",ib=/^(\d+)\.\s$/,qB=sr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",sn(this.options.HTMLAttributes,t),0]:["ol",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(YB,this.editor.getAttributes(rb)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=cl({find:ib,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=cl({find:ib,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(rb)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),XB=sr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),JB=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,QB=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,ZB=Mi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",sn(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Io({find:JB,type:this.type})]},addPasteRules(){return[Po({find:QB,type:this.type})]}}),e$=sr.create({name:"text",group:"inline"}),t$=Ut.create({name:"starterKit",addExtensions(){var n,e,t,r,i,s,o,a,l,c,u,f,h,p,d,g,m,y;const w=[];return this.options.bold!==!1&&w.push(lB.configure((n=this.options)===null||n===void 0?void 0:n.bold)),this.options.blockquote!==!1&&w.push(rB.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&w.push(uB.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&w.push(dB.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&w.push(gB.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&w.push(vB.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&w.push(_B.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&w.push(TB.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&w.push(OB.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&w.push(MB.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&w.push(jB.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&w.push(HB.configure((f=this.options)===null||f===void 0?void 0:f.horizontalRule)),this.options.italic!==!1&&w.push(UB.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&w.push(KB.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&w.push(qB.configure((d=this.options)===null||d===void 0?void 0:d.orderedList)),this.options.paragraph!==!1&&w.push(XB.configure((g=this.options)===null||g===void 0?void 0:g.paragraph)),this.options.strike!==!1&&w.push(ZB.configure((m=this.options)===null||m===void 0?void 0:m.strike)),this.options.text!==!1&&w.push(e$.configure((y=this.options)===null||y===void 0?void 0:y.text)),w}});var n$={},r$=Object.defineProperty,i$=(n,e,t)=>e in n?r$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pe=(n,e,t)=>i$(n,typeof e!="symbol"?e+"":e,t);class s${constructor(e){e.value(this)}give(e){return document.title=e,this}introduction(){return"patron"}}class Pm{constructor(e){this.guestReceiver=e}value(e){return this.guestReceiver(e),e}}function zi(n,e,t){typeof e=="function"?e(n,t):e.give(n,t)}class us{constructor(e){this.receiver=e}give(e,t){return this.receiver(e,t),this}}class Yo{constructor(e,t){this.sourceGuest=e,this.targetGuest=t}introduction(){return typeof this.sourceGuest=="function"||!this.sourceGuest.introduction?"guest":this.sourceGuest.introduction()}give(e,t){return zi(e,this.targetGuest,t),this}disposed(e){const t=this.sourceGuest;return t.disposed?t.disposed(e):!1}}var o$=Object.defineProperty,a$=(n,e,t)=>e in n?o$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sb=(n,e,t)=>a$(n,typeof e!="symbol"?e+"":e,t);const QS=new Map,ob=n=>{QS.forEach(e=>{e.delete(n)})};class vf{constructor(e){this.initiator=e,sb(this,"patrons"),sb(this,"give"),this.patrons=new Set,QS.set(this,this.patrons);let t=null;const r=(i,s)=>{this.patrons.forEach(o=>{this.sendValueToGuest(i,o,s)})};this.give=(i,s)=>{const o=()=>{o===t&&r(i,s)};return t=o,queueMicrotask(o),this}}size(){return this.patrons.size}add(e){if(!e)throw new Error("PatronPool add method received nothing!");return typeof e!="function"&&e.introduction&&e.introduction()==="patron"&&this.patrons.add(e),this}remove(e){return this.patrons.delete(e),this}distribute(e,t){return this.add(t),this.sendValueToGuest(e,t,{}),this}sendValueToGuest(e,t,r){this.guestDisposed(e,t)||zi(e,t,{...r,data:{...(r==null?void 0:r.data)??{},initiator:this.initiator,pool:this}})}guestDisposed(e,t){var r;return(r=t.disposed)!=null&&r.call(t,e)?(this.remove(t),!0):!1}}var l$=Object.defineProperty,c$=(n,e,t)=>e in n?l$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,u$=(n,e,t)=>c$(n,e+"",t);class Ml{constructor(e){this.sourceDocument=e,u$(this,"thePool",new vf(this))}pool(){return this.thePool}give(e){return this.sourceDocument=e,this.thePool.give(this.sourceDocument),this}value(e){return typeof e=="function"?this.thePool.distribute(this.sourceDocument,new us(e)):this.thePool.distribute(this.sourceDocument,e),this}}class Cu{constructor(e){this.baseGuest=e}give(e,t){let r=this.baseGuest;return typeof r=="function"&&(r=new us(r)),r.give(e,t),this}introduction(){return typeof this.baseGuest=="function"||!this.baseGuest.introduction?"guest":this.baseGuest.introduction()}disposed(e){const t=this.baseGuest;return t.disposed?t.disposed(e):!1}}var f$=Object.defineProperty,h$=(n,e,t)=>e in n?f$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ab=(n,e,t)=>h$(n,typeof e!="symbol"?e+"":e,t);class d${constructor(e){ab(this,"guests",new Set),ab(this,"patronPool"),this.patronPool=new vf(e)}give(e,t){return this.deliverToGuests(e,t),this.patronPool.give(e,t),this}add(e){return(typeof e=="function"||!e.introduction||e.introduction()==="guest")&&this.guests.add(e),this.patronPool.add(e),this}remove(e){return this.guests.delete(e),this.patronPool.remove(e),this}distribute(e,t){return this.add(t),this.give(e),this}size(){return this.patronPool.size()+this.guests.size}deliverToGuests(e,t){this.guests.forEach(r=>{zi(e,r,t)}),this.guests.clear()}}var p$=Object.defineProperty,m$=(n,e,t)=>e in n?p$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yc=(n,e,t)=>m$(n,typeof e!="symbol"?e+"":e,t);class g${constructor(){yc(this,"theChain"),yc(this,"keysKnown",new Set),yc(this,"keysFilled",new Set),yc(this,"filledChainPool",new d$(this)),this.theChain=new Ml({})}resultArray(e){const t=new Cu(e);return this.filledChainPool.add(new Yo(t,r=>{t.give(Object.values(r))})),this.isChainFilled()&&this.theChain.value(new us(r=>{this.filledChainPool.give(Object.values(r))})),this}result(e){const t=new Cu(e);return this.isChainFilled()?(this.filledChainPool.add(t),this.theChain.value(new us(r=>{this.filledChainPool.give(r)}))):this.filledChainPool.add(t),this}receiveKey(e){return this.keysKnown.add(e),new us(t=>{queueMicrotask(()=>{this.theChain.value(new us(r=>{this.keysFilled.add(e);const i={...r,[e]:t};this.theChain.give(i),this.isChainFilled()&&this.filledChainPool.give(i)}))})})}isChainFilled(){return this.keysFilled.size>0&&this.keysFilled.size===this.keysKnown.size}}class v${constructor(e){this.theValue=e}give(e){return this.theValue=e,this}value(){return this.theValue}}class y${constructor(e){this.willBePatron=e}introduction(){return"patron"}give(e,t){return zi(e,this.willBePatron,t),this}disposed(e){var t;const r=this.willBePatron;return((t=r==null?void 0:r.disposed)==null?void 0:t.call(r,e))||!1}}var b$=Object.defineProperty,_$=(n,e,t)=>e in n?b$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,w$=(n,e,t)=>_$(n,e+"",t);class C${constructor(e){this.baseGuest=e,w$(this,"received",!1)}introduction(){return"patron"}give(e,t){this.received||zi(e,this.baseGuest,t);const r=t==null?void 0:t.data;return r!=null&&r.pool&&r.pool.remove(this),this}disposed(e){const t=this.baseGuest;return t.disposed?t.disposed(e):!1}}var S$=Object.defineProperty,x$=(n,e,t)=>e in n?S$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,A$=(n,e,t)=>x$(n,e+"",t);class yf{constructor(){A$(this,"baseSource",new Ml(null))}value(e){return this.baseSource.value(new Yo(e,t=>{t!==null&&zi(t,e)})),this}give(e){return this.baseSource.give(e),this}pool(){return this.baseSource.pool()}}class lt{constructor(e,t={}){this.constructorFn=e,this.factories=t}create(...e){return new this.constructorFn(...e,this.factories)}}class np extends Error{constructor(e,t){super(e,t)}}class k${constructor(e){this.fileHandler=e}content(e){return this.fileHandler.getFile().then(async t=>await new Response(t).text()).then(t=>{e.give(t)}).catch(t=>{throw new np("Problem when reading file in SystemFileFromHandler",{cause:t})}),this}}class E${constructor(e){this.fileHandler=e}save(e){return this.fileHandler.createWritable().then(t=>(t.write(e).catch(r=>{throw new np("Cant save file in browser",{cause:r})}),t)).then(t=>{t.close().catch(r=>{throw new np("Cant close written file in browser",{cause:r})})}),this}}class T${constructor(e){this.content=e}result(){return JSON.parse(this.content)}}class O${constructor(e){this.content=e}result(){return JSON.stringify(this.content)}}class M${constructor(e,t=100,r=100){this.svgContent=e,this.width=t,this.height=r}markup(){return this.svgContent.replaceAll("${width}",String(this.width)).replaceAll("${height}",String(this.height))}}class I${constructor(e,t){this.type=e,this.factories=t}markup(){return this.factories.svgImage.create(this.type.svg,this.type.width,this.type.height).markup()}}class P${constructor(e,t,r){this.chunksCount=e,this.baseNumber=t,this.factories=r}chunks(e){return this.baseNumber.value(this.factories.guestInTheMiddle.create(e,t=>{const r=Math.round(t/this.chunksCount),i=[];for(let s=1;s<=this.chunksCount;s+=1)i.push(s*r);e.give(i)})),e}}class N${constructor(e,t){this.mapUrl=e,this.factories=t}name(e){this.mapUrl.value(this.factories.guestInTheMiddle.create(e,t=>{let r=t.replace("/","").replaceAll("/","_");r.match("_")&&(r=`_${r}`),e.give(r)}))}}class R${constructor(e,t){this.text=e,this.factories=t}noHtml(e){return this.text.value(this.factories.guestInTheMiddle.create(e,t=>{const r=document.createElement("DIV");r.innerHTML=t;const i=r.textContent||r.innerText||"";e.give(i)})),e}}class L${constructor(e,t,r,i){Pe(this,"loadingCache"),this.callbackName=e,this.url=t,this.emptyValue=r,this.factories=i,this.loadingCache=i.sourceEmpty.create()}content(e){this.loadingCache.give(!0);const t=setTimeout(()=>{this.loadingCache.give(!1),e.give(this.emptyValue)},1e4);return xT(this.url,()=>{var r;clearInterval(t);const i=((r=window[this.callbackName])==null?void 0:r.call(window))||this.emptyValue;e.give(i),this.loadingCache.give(!1)}),e}loading(e){return this.loadingCache.value(e),e}}class D${constructor(e){this.text=e}asString(e){return e.give(this.text),e}}class F${constructor(e,t){this.baseText=e,this.factories=t}asString(e){return this.baseText.asString(this.factories.guestInTheMiddle.create(e,t=>{e.give((t??"").replace(/<\/?[^>]+>/gi," "))})),e}}var bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rp={exports:{}},Sh,lb;function B$(){if(lb)return Sh;lb=1;var n=1e3,e=n*60,t=e*60,r=t*24,i=r*7,s=r*365.25;Sh=function(u,f){f=f||{};var h=typeof u;if(h==="string"&&u.length>0)return o(u);if(h==="number"&&isFinite(u))return f.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var h=parseFloat(f[1]),p=(f[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return h*s;case"weeks":case"week":case"w":return h*i;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*t;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function a(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=t?Math.round(u/t)+"h":f>=e?Math.round(u/e)+"m":f>=n?Math.round(u/n)+"s":u+"ms"}function l(u){var f=Math.abs(u);return f>=r?c(u,f,r,"day"):f>=t?c(u,f,t,"hour"):f>=e?c(u,f,e,"minute"):f>=n?c(u,f,n,"second"):u+" ms"}function c(u,f,h,p){var d=f>=h*1.5;return Math.round(u/h)+" "+p+(d?"s":"")}return Sh}function $$(n){t.debug=t,t.default=t,t.coerce=l,t.disable=s,t.enable=i,t.enabled=o,t.humanize=B$(),t.destroy=c,Object.keys(n).forEach(u=>{t[u]=n[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let f=0;for(let h=0;h<u.length;h++)f=(f<<5)-f+u.charCodeAt(h),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=e;function t(u){let f,h=null,p,d;function g(...m){if(!g.enabled)return;const y=g,w=Number(new Date),b=w-(f||w);y.diff=b,y.prev=f,y.curr=w,f=w,m[0]=t.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let v=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(S,_)=>{if(S==="%%")return"%";v++;const k=t.formatters[_];if(typeof k=="function"){const M=m[v];S=k.call(y,M),m.splice(v,1),v--}return S}),t.formatArgs.call(y,m),(y.log||t.log).apply(y,m)}return g.namespace=u,g.useColors=t.useColors(),g.color=t.selectColor(u),g.extend=r,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==t.namespaces&&(p=t.namespaces,d=t.enabled(u)),d),set:m=>{h=m}}),typeof t.init=="function"&&t.init(g),g}function r(u,f){const h=t(this.namespace+(typeof f>"u"?":":f)+u);return h.log=this.log,h}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let f;const h=(typeof u=="string"?u:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(u=h[f].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...t.names.map(a),...t.skips.map(a).map(f=>"-"+f)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,h;for(f=0,h=t.skips.length;f<h;f++)if(t.skips[f].test(u))return!1;for(f=0,h=t.names.length;f<h;f++)if(t.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var j$=$$;(function(n,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=t,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let u=0,f=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(u++,h==="%c"&&(f=u))}),l.splice(f,0,c)}e.log=console.debug||console.log||(()=>{});function i(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=n$.DEBUG),l}function o(){try{return localStorage}catch{}}n.exports=j$(e);const{formatters:a}=n.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(rp,rp.exports);var De=rp.exports;const ZS=Nm(De),H$=De.debug("TextNlAsBr");class V${constructor(e,t){this.baseText=e,this.factories=t}asString(e){return this.baseText.asString(this.factories.guestInTheMiddle.create(e,t=>typeof t>"u"||t===null?"":(H$(t),e.give((t??"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")),!0))),e}}const z$=new lt(Ml),G$=new lt(Ml),W$=new lt(yf),U$=new lt(us),K$=new lt(Yo),Y$=new lt(Pm),q$=new lt(vf),X$=new lt(y$),J$=new lt(C$),Q$=new lt(Yo),Z$=new lt(g$),e8=new lt(v$),Gi={cache:z$,chain:Z$,guest:U$,guestCast:K$,guestAware:Y$,guestInTheMiddle:Q$,guestSync:e8,patron:X$,patronOnce:J$,pool:q$,source:G$,sourceEmpty:W$},t8=new lt(k$),n8=new lt(E$),r8=new lt(O$),i8=new lt(T$),ex=new lt(M$),s8=new lt(I$,{...Gi,svgImage:ex}),o8=new lt(P$,Gi),a8=new lt(N$,Gi),l8=new lt(R$,Gi),c8=new lt(L$,Gi),u8=new lt(D$),f8=new lt(F$,Gi),h8=new lt(V$,Gi),d8={...Gi,fileHandlerContent:t8,browserFileSaved:n8,transformToString:r8,transformToObject:i8,svgImage:ex,svgMapTypeImage:s8,numberChunks:o8,mapNameFromUrl:a8,textNoHtml:l8,jsonp:c8,textOf:u8,textNlAsBr:h8,textWithoutHTML:f8},En=()=>d8;class Rm{constructor(e,t,r){this.notification=e,this.check=t,this.factories=r}breakOnFail(e,t){return this.check.check(e,this.factories.guest.create(r=>{r===!0?t.give(!0):this.notification.give({type:"error",text:r})})),this}continueOnFail(e,t){return this.check.check(e,this.factories.guest.create(r=>{t.give(r),r!==!0&&this.notification.give({type:"error",text:r})})),this}}const xh=De.debug("MapCurrent");class tx{constructor(e,t,r){Pe(this,"objectsCache"),Pe(this,"settingsCache"),Pe(this,"typesCache"),this.mapFile=e,this.mapId=t,this.factories=r,this.objectsCache=r.sourceEmpty.create(),this.settingsCache=r.sourceEmpty.create(),this.typesCache=r.sourceEmpty.create(),e.currentMap(r.patron.create(r.guest.create(i=>{xh("current map changed",i),this.settingsCache.give(i.settings),this.objectsCache.give(Object.values(i.objects)),this.typesCache.give(Object.entries(i.types).map(([s,o])=>({...o,id:s})))})))}settings(e){return this.settingsCache.value(e),e}objects(e){return xh("notify about new objects"),this.objectsCache.value(e),e}types(e){return this.typesCache.value(e),e}give(e){return xh("save map document",e),this.mapId.id(this.factories.guest.create(t=>{this.mapFile.mapFile(this.factories.guest.create(r=>{this.mapFile.give({...r,[t]:e})}))})),this}}class p8{constructor(e){Pe(this,"idCache"),this.idCache=e.cache.create("current")}id(e){return this.idCache.value(e),e}give(e){return this.idCache.give(e),this}}class m8{constructor(e){this.mapFile=e}value(e){return this.mapFile.currentMap(new Yo(e,t=>{e.give(t.settings.title)})),this}}const _c=De.debug("MapHistory"),cb=n=>{const e=JSON.parse(JSON.stringify(n));return Object.values(e.objects).forEach(t=>{t.width=0,t.height=0}),JSON.stringify(e)};class g8{constructor(e,t,r,i){Pe(this,"mapsHistory"),Pe(this,"historyIndex"),this.mapFile=e,this.map=t,this.mapId=r,this.factories=i,this.mapsHistory=i.cache.create([]),this.historyIndex=i.cache.create(0),this.mapFile.currentMap(i.patron.create(this)),this.mapId.id(i.patron.create(i.guest.create(()=>{this.mapsHistory.give([]),this.historyIndex.give(0)})))}give(e){return requestIdleCallback(()=>{this.historyIndex.value(this.factories.guest.create(t=>{this.mapsHistory.value(this.factories.guest.create(r=>{_c("add map to history",r,e);const i=r.some(s=>cb(s)===cb(e));if(_c("isMapFromHistory",i),!i){const s=r[t]?[r[t]]:[];this.historyIndex.give(0),this.mapsHistory.give([e,...s,...r.slice(0,9)])}}))}))}),this}isPrevPossible(e){const t=this.factories.chain.create(this);return this.historyIndex.value(this.factories.guestCast.create(e,t.receiveKey("historyIndex"))),this.mapsHistory.value(this.factories.guestCast.create(e,t.receiveKey("mapsHistory"))),t.result(this.factories.guestInTheMiddle.create(e,({historyIndex:r,mapsHistory:i})=>{const s=r<i.length-1;_c("recalculate is prev possible",s),e.give(s)})),e}prev(){this.historyIndex.value(this.factories.guest.create(e=>{const t=e+1;this.historyIndex.give(t),this.mapsHistory.value(this.factories.guest.create(r=>{const i=r[t];this.map.give(i)}))}))}isNextPossible(e){const t=this.factories.chain.create(this);return this.historyIndex.value(this.factories.guestCast.create(e,t.receiveKey("historyIndex"))),this.mapsHistory.value(this.factories.guestCast.create(e,t.receiveKey("mapsHistory"))),t.result(this.factories.guestInTheMiddle.create(e,({historyIndex:r,mapsHistory:i})=>{const s=r>0&&r<=i.length-1;_c("recalculate is next possible",s),e.give(s)})),e}next(){this.historyIndex.value(this.factories.guest.create(e=>{const t=e-1;this.historyIndex.give(t),this.mapsHistory.value(this.factories.guest.create(r=>{const i=r[t];this.map.give(i)}))}))}}class v8{constructor(e,t,r){this.mapFile=e,this.mapId=t,this.factories=r}give(e){const{guest:t}=this.factories;return this.mapFile.mapFile(t.create(r=>{delete r[e],this.mapFile.give(r),this.mapId.give("current")})),this}}const wc=De.debug("MapFileOfContent");class y8{constructor(e,t,r){Pe(this,"currentMapPatrons"),Pe(this,"mapFileCache"),this.mapFileContent=e,this.mapId=t,this.factories=r,this.currentMapPatrons=r.pool.create(this),this.mapFileCache=r.cache.create(!1),e.value(r.patron.create(i=>{if(!i)return;const s=this.factories.transformToObject.create(i).result();wc("get map file",s),this.mapFileCache.give(s)}))}currentMap(e){const t=this.factories.chain.create();return this.mapId.id(this.factories.guestCast.create(e,t.receiveKey("mapId"))),this.mapFile(this.factories.guestCast.create(e,t.receiveKey("mapFile"))),t.result(this.factories.guestInTheMiddle.create(e,({mapId:r,mapFile:i})=>{if(wc("get current map",r,i,typeof i),!i[r])this.createEmptyMapByName(r,e);else{const s=i[r];this.currentMapPatrons.distribute(s!=null&&s.structure?s.structure:s,e)}})),e}give(e){return wc("save map file document",e),this.mapFileContent.give(this.factories.transformToString.create(e).result()),this}mapFile(e){return this.mapFileCache.value(e),e}createEmptyMapByName(e,t){wc("creating empty map by name",e);const r=this.factories.transformToObject.create(this.generateEmptyMapFile()).result();this.mapFile(this.factories.guest.create(i=>{this.give({...i,[e]:r.current}),t.give(r.current)}))}generateEmptyMapFile(){return'{"current":{"progress":0,"settings":{"colored":false,"title":"current"},"objects":{},"types":{},"url":"/current","parent":""}}'}}const b8=De.debug("MapFileForRendering");class _8{constructor(e,t,r){Pe(this,"mapCache"),this.mapId=t,this.factories=r,this.mapCache=r.cache.create({objects:{},types:{},settings:{}}),e.currentMap(r.patron.create(this.mapCache))}currentMap(e){return this.mapCache.value(e),e}mapFile(e){return this.mapCache.value(this.factories.guestInTheMiddle.create(e,t=>{this.mapId.id(this.factories.guest.create(r=>{e.give({[r]:t})}))})),e}give(e){return this.mapId.id(this.factories.guest.create(t=>{b8("received map file, objects = ",e[t].objects),this.mapCache.give(e[t])})),this}}class nx{constructor(e,t,r){this.map=e,this.mapFile=t,this.factories=r}give(e){return this.mapFile.currentMap(this.factories.guest.create(t=>{this.map.give({...t,objects:{...t.objects,[e.id]:{...e,createTimestamp:e.createTimestamp??Date.now(),changeTimestamp:Date.now()}}})})),this}}const ub=ZS("app:MapObjectCurrent");class w8{constructor(e,t){Pe(this,"idCache"),Pe(this,"silenceActivator"),this.drawer=e,this.factories=t,this.idCache=t.sourceEmpty.create(),this.silenceActivator=t.source.create(!1),this.idCache.value(t.patron.create(t.guest.create(r=>{r&&e.give("object")})))}silenceOn(e){return this.silenceActivator.give(e),this}silenceOff(){return this.silenceActivator.give(!1),this}objectId(e){return this.idCache.value(e),e}give(e){return ub("new value current object",e),this.silenceActivator.value(this.factories.guest.create(t=>{ub("silence activator",t),t?t.give(e):this.idCache.give(e)})),this}}class C8{constructor(e,t){this.mapFile=e,this.factories=t}check(e,t){return this.mapFile.currentMap(this.factories.guest.create(r=>{let i=!1;Object.values(r.objects).forEach(s=>{i=i||s.arrows.some(o=>o.id===e.id)}),t.give(!i||"    !")})),this}}const Ah=De.debug("MapObjectNew");class S8{constructor(e,t,r,i,s){this.map=e,this.mapObject=t,this.canvas=r,this.stagePosition=i,this.factories=s}byTypeName(e,t){return Ah("start to add new type",e,t),this.stagePosition.position(this.factories.guest.create(r=>{this.map.types(this.factories.guest.create(i=>{this.canvas.canvas(this.factories.guest.create(s=>{const o=s.getBoundingClientRect(),a=i.find(u=>u.id===e);Ah("is type found",a);const l=t.x-o.left,c=t.y-o.top;a&&(Ah("add new type"),this.mapObject.give({additionalName:"",arrows:[],description:"",inMenu:!1,lastClick:Date.now(),linked:!1,menuOrder:0,name:"",outlink:"",targetBlank:!1,type:e,width:a.width,height:a.height,zindex:0,id:new Date().getTime().toString(),createTimestamp:Date.now(),changeTimestamp:Date.now(),position:[l>0?l+r.x:0,c>0?c+r.y:0]}))}))}))})),this}}class x8{constructor(e,t){this.mapId=e,this.factories=t}names(e){return this.mapId.id(this.factories.guestInTheMiddle.create(e,t=>{const r=t.split("_").filter(o=>!!o);let i="";const s=r.map(o=>{const a=`${i}${o}`;return i||(i="_"),i+=`${o}_`,a});i="",e.give(s)})),e}}class A8{constructor(e){this.mapObject=e}give(e){const{arrows:t}=e.object;return t.splice(e.index,1),this.mapObject.give({...e.object,arrows:t}),this}}class k8{constructor(e,t,r,i){this.map=e,this.mapFile=t,this.checks=r,this.factories=i}give(e){const t=this.factories.chain.create(this);return this.checks.forEach((r,i)=>{r.breakOnFail(e,t.receiveKey(String(i)))}),t.result(this.factories.guest.create(()=>{this.mapFile.currentMap(this.factories.guest.create(r=>{delete r.objects[e.id],this.map.give(r)}))})),this}}const E8=De.debug("MapObjectsLink");class T8{constructor(e,t,r,i,s){Pe(this,"objectIdsCache"),this.mapObjectCurrent=e,this.map=t,this.mapObject=r,this.newArrow=i,this.factories=s,this.objectIdsCache=s.cache.create([])}objectIds(e){return this.objectIdsCache.value(e),e}startLink(){this.mapObjectCurrent.give(""),this.objectIdsCache.value(this.factories.guest.create(e=>{if(e.length){this.mapObjectCurrent.silenceOff(),this.objectIdsCache.give([]);return}const t=["first"];this.objectIdsCache.give(t),this.mapObjectCurrent.silenceOn(this.factories.guest.create(r=>{t.push(r),this.objectIdsCache.give([...t]),E8("object ids",t),t.length===2&&this.map.objects(this.factories.guest.create(i=>{const[,s]=t,o=i.find(a=>a.id===s);o&&this.newArrow.forObject(o)})),t.length===3&&(this.newArrow.dispose(),this.mapObjectCurrent.silenceOff(),this.map.objects(this.factories.guest.create(i=>{const[,s,o]=t,a=i.find(l=>l.id===s);a&&o&&(this.objectIdsCache.give([]),this.mapObject.give({...a,arrows:[...a.arrows,{id:o,label:""}]}))})))}))}))}}function O8(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Lm=O8,M8=typeof bc=="object"&&bc&&bc.Object===Object&&bc,I8=M8,P8=I8,N8=typeof self=="object"&&self&&self.Object===Object&&self,R8=P8||N8||Function("return this")(),rx=R8,L8=rx,D8=function(){return L8.Date.now()},F8=D8,B8=/\s/;function $8(n){for(var e=n.length;e--&&B8.test(n.charAt(e)););return e}var j8=$8,H8=j8,V8=/^\s+/;function z8(n){return n&&n.slice(0,H8(n)+1).replace(V8,"")}var G8=z8,W8=rx,U8=W8.Symbol,ix=U8,fb=ix,sx=Object.prototype,K8=sx.hasOwnProperty,Y8=sx.toString,sa=fb?fb.toStringTag:void 0;function q8(n){var e=K8.call(n,sa),t=n[sa];try{n[sa]=void 0;var r=!0}catch{}var i=Y8.call(n);return r&&(e?n[sa]=t:delete n[sa]),i}var X8=q8,J8=Object.prototype,Q8=J8.toString;function Z8(n){return Q8.call(n)}var e6=Z8,hb=ix,t6=X8,n6=e6,r6="[object Null]",i6="[object Undefined]",db=hb?hb.toStringTag:void 0;function s6(n){return n==null?n===void 0?i6:r6:db&&db in Object(n)?t6(n):n6(n)}var o6=s6;function a6(n){return n!=null&&typeof n=="object"}var l6=a6,c6=o6,u6=l6,f6="[object Symbol]";function h6(n){return typeof n=="symbol"||u6(n)&&c6(n)==f6}var d6=h6,p6=G8,pb=Lm,m6=d6,mb=NaN,g6=/^[-+]0x[0-9a-f]+$/i,v6=/^0b[01]+$/i,y6=/^0o[0-7]+$/i,b6=parseInt;function _6(n){if(typeof n=="number")return n;if(m6(n))return mb;if(pb(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=pb(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=p6(n);var t=v6.test(n);return t||y6.test(n)?b6(n.slice(2),t?2:8):g6.test(n)?mb:+n}var w6=_6,C6=Lm,kh=F8,gb=w6,S6="Expected a function",x6=Math.max,A6=Math.min;function k6(n,e,t){var r,i,s,o,a,l,c=0,u=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(S6);e=gb(e)||0,C6(t)&&(u=!!t.leading,f="maxWait"in t,s=f?x6(gb(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function p(_){var k=r,M=i;return r=i=void 0,c=_,o=n.apply(M,k),o}function d(_){return c=_,a=setTimeout(y,e),u?p(_):o}function g(_){var k=_-l,M=_-c,E=e-k;return f?A6(E,s-M):E}function m(_){var k=_-l,M=_-c;return l===void 0||k>=e||k<0||f&&M>=s}function y(){var _=kh();if(m(_))return w(_);a=setTimeout(y,g(_))}function w(_){return a=void 0,h&&r?p(_):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function v(){return a===void 0?o:w(kh())}function S(){var _=kh(),k=m(_);if(r=arguments,i=this,l=_,k){if(a===void 0)return d(l);if(f)return clearTimeout(a),a=setTimeout(y,e),p(l)}return a===void 0&&(a=setTimeout(y,e)),o}return S.cancel=b,S.flush=v,S}var ox=k6;const qo=Nm(ox),E6=n=>{if(n[n.length-1]==="/"){const e=n.split("");return e.splice(e.length-1,1),e.join("")}return n},T6=qo(n=>{window==null||window.open(n)},200),Eh=De.debug("MapObjectUrl");class O6{constructor(e,t){this.mapId=e,this.factories=t}open(e,t){if(e!=null&&e.linked){const r=e.outlink;e.targetBlank?T6(r):(Eh("open new map",r),this.factories.mapNameFromUrl.create(this.factories.source.create(r)).name(this.factories.guest.create(i=>{Eh("open map name",r,i),t.give(i)})))}return this}url(e,t){return e.value(this.factories.guestInTheMiddle.create(t,r=>{this.mapId.id(this.factories.guest.create(i=>{const s=i[0]==="_"?i.replaceAll("_","/"):"/current",o=r.name?r.name:r.additionalName?r.additionalName:"";this.factories.textNoHtml.create(this.factories.source.create(o)).noHtml(this.factories.guest.create(a=>{let l=r.outlink?r.outlink:`${s}/${M6(a)}`;Eh("link is",l),l=E6(l),t.give(l)}))}))})),t}}function M6(n){return n.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}const I6=De.debug("ObjectPositionBounds");class P6{constructor(e,t){this.stageSize=e,this.factories=t}position(e,t,r){return this.stageSize.value(this.factories.guestInTheMiddle.create(r,i=>{let{x:s,y:o}=t;s<30&&(s=30),o<30&&(o=30);const a=i.width-e.width;s>a&&(s=a);const l=i.height-e.height;o>l&&(o=l),I6("position",s,o),r.give({x:s,y:o})})),r}}const Cc=15;class N6{constructor(e,t){this.baseRestriction=e,this.factories=t}position(e,t,r){return this.baseRestriction.position(e,t,this.factories.guestInTheMiddle.create(r,i=>{r.give({x:Math.round(i.x/Cc)*Cc,y:Math.round(i.y/Cc)*Cc})})),r}}const vb={x:"width",y:"height"},Th={x:0,y:1},R6={positive:1,negative:-1},yb=De.debug("ObjectsOutsideScreen");class L6{constructor(e,t,r,i){this.map=e,this.stageSize=t,this.layer=r,this.factories=i}count(e,t){const r=e.direction==="positive",i=this.factories.chain.create();return this.map.objects(this.factories.guestCast.create(t,i.receiveKey("objects"))),this.layer.layer(this.factories.guestCast.create(t,i.receiveKey("layer"))),this.layer.position(this.factories.guestCast.create(t,i.receiveKey("position"))),i.result(this.factories.guestInTheMiddle.create(t,({objects:s,layer:o,position:a})=>{var l;const c=R6[e.direction],u=s.sort((f,h)=>f.position[Th[e.axis]]*c-h.position[Th[e.axis]]*c).filter(f=>{const h=f.position[Th[e.axis]]+(r?0:f[vb[e.axis]]),p=a[e.axis]*-1+(r?o[vb[e.axis]]():0);return yb("mb nearest points",e.direction,"objectP=",h,"screenP=",p),r?h>p:h<p});yb("nearest",u),t.give({count:u.length,nearestObjectId:((l=u.at(r?-1:0))==null?void 0:l.id)??""})})),t}}class D6{constructor(e,t,r){this.mapFile=e,this.map=t,this.factories=r}give(e){return this.mapFile.currentMap(this.factories.guest.create(t=>{this.map.give({...t,settings:e})})),this}}class F6{constructor(e){Pe(this,"idCache"),this.idCache=e.sourceEmpty.create()}typeId(e){return this.idCache.value(e),e}give(e){return this.idCache.give(e),this}}class B6{constructor(e){this.mapType=e}byName(){const e=String(new Date().getTime());this.mapType.give({name:e,type:{id:e,name:" ",svg:'<div style="background: lightyellow;border: 1px solid #ccc;">type</div>',width:100,height:40}})}}class $6{constructor(e,t,r,i){this.map=e,this.mapFile=t,this.checks=r,this.factories=i}give(e){const t=this.factories.chain.create(this);return this.checks.forEach((r,i)=>{r.breakOnFail({name:e.id,type:e},t.receiveKey(String(i)))}),t.result(this.factories.guest.create(()=>{this.mapFile.currentMap(this.factories.guest.create(r=>{delete r.types[e.id],this.map.give(r)}))})),this}}class j6{constructor(e,t,r,i){this.map=e,this.mapFile=t,this.checks=r,this.factories=i}give(e){const t=this.factories.chain.create(this);return this.checks.forEach((r,i)=>{r.breakOnFail(e,t.receiveKey(String(i)))}),t.result(this.factories.guest.create(()=>{this.mapFile.currentMap(this.factories.guest.create(r=>{delete r.types[e.name],this.map.give({...r,types:{...r.types,[e.type.name]:e.type}})}))})),this}}const H6=De.debug("MapTypeUsed");class V6{constructor(e,t){this.mapFile=e,this.factories=t}check(e,t){return this.mapFile.currentMap(this.factories.guest.create(r=>{const i=Object.values(r.objects).some(s=>s.type===e.name);H6("is type used",i),t.give(!i||"  ")})),this}}class z6{constructor(e,t){this.mapTypeUsedCheck=e,this.factories=t}check(e,t){return this.mapTypeUsedCheck.check(e,this.factories.guest.create(r=>{r!==!0&&e.name!==e.type.name?t.give("   ,  !"):t.give(!0)})),this}}const bb=De.debug("ParentTypes");class G6{constructor(e,t,r){this.parentNames=e,this.mapFile=t,this.factories=r}types(e){bb("parent types requested");const t=this.factories.chain.create();return this.parentNames.names(this.factories.guestCast.create(e,t.receiveKey("parentNames"))),this.mapFile.mapFile(this.factories.guestCast.create(e,t.receiveKey("mapFile"))),t.result(this.factories.guestInTheMiddle.create(e,({parentNames:r,mapFile:i})=>{const s=r.slice(0,-1);bb("parent names",s);const o={};s.map(a=>i[a]).forEach(a=>{Object.values(a.types).forEach(l=>{o[l.name]=l})}),e.give(Object.values(o))})),e}}const _b=De.debug("ObjectsMatchedToQuery");class W6{constructor(e,t){this.map=e,this.factories=t}objects(e,t){return e.value(this.factories.guestInTheMiddle.create(t,qo(r=>{r=r.toLowerCase(),this.map.objects(this.factories.guest.create(i=>{if(!r){_b("reset results"),t.give([]);return}const s=i.filter(o=>{var a;return o.name.toLowerCase().includes(r)||((a=o.additionalName)==null?void 0:a.toLowerCase().includes(r))||Object.values(o.additionalFields??{}).join(" ").toLowerCase().includes(r)});_b("objects in searching",s,r),t.give(s)}))},500))),t}}const U6={height:3e3,width:3e3};class K6{value(e){return e.give(U6),e}}const wb=De.debug("StageMoveRestriction");class Y6{constructor(e,t,r){this.canvasDep=e,this.stageSize=t,this.factories=r}position(e,t){return this.canvasDep.canvas(this.factories.guest.create(r=>{this.stageSize.value(this.factories.guest.create(i=>{wb("income position",e);const s=i.width-r.clientWidth,o=i.height-r.clientHeight,a=e.x*-1,l=e.y*-1;if(o<0||s<0)return{x:0,y:0};wb("boundings",o,s,l,a),t.give({x:e.x>0?0:a>s?s*-1:e.x,y:e.y>0?0:l>o?o*-1:e.y})}))})),t}}const oa=De.debug("app:MapObjectsVisible");class q6{constructor(e,t,r,i){Pe(this,"visibleObjectsCache",new yf),oa("constructor initialized");const s=i.chain.create();t.size(i.patron.create(s.receiveKey("size"))),e.position(i.patron.create(s.receiveKey("position"))),r.currentMap(i.patron.create(s.receiveKey("map"))),s.result(i.patron.create(i.guest.create(({position:o,size:a,map:l})=>{const c=Object.values(l.objects);oa("objects come to result",c);const u=c.filter(f=>{const h=l.types[f.type]??{},p={width:f.width||h.width,height:f.height||h.height};return this.isInBounding(o,a,f.position,p)});oa("visible objects calculated",u),this.visibleObjectsCache.give(u)})))}objects(e){return this.visibleObjectsCache.value(e),this}isInBounding(e,t,r,i){const s=e.x,o=e.x-t.width,a=e.y,l=e.y-t.height,[c,u]=r;return oa("bounding vars",s,o,a,l),oa("object position",r),s>-c-i.width&&-c>o&&a>-u-i.height&&-u>l}}const X6=(n,e)=>{const t=n.matchAll(e);return Array.from(t).map(r=>r[1])},J6=(n,e)=>n.reduce((t,r)=>(t[r]=e[r]||r,t),{});class Q6{constructor(e,t,r,i){this.mapFile=t,this.mapObject=r,this.factories=i,e.objectId(this)}give(e){return this.mapFile.currentMap(this.factories.guest.create(t=>{const r=t.objects[e];if(!r)return;const i=t.types[r.type],s=/\$\{([a-zA-Z1-9]+)\}/g,o=X6(i.svg,s).filter(a=>a!=="width"&&a!=="height");r.additionalFields=J6(o,r.additionalFields??{}),this.mapObject.give(r)})),this}introduction(){return"patron"}}class Z6{constructor(){Pe(this,"filledPoints",new Map)}clear(){this.filledPoints.clear()}breakPoints(e,t,r){const i=this.arrowPointPosition(e.shapeGeometry,e.shapePosition,e.lookToGeometry,e.lookToPosition),s=this.arrowPointPosition(t.shapeGeometry,t.shapePosition,t.lookToGeometry,t.lookToPosition);return r.give([+i.point.x+i.shift.x,+i.point.y+i.shift.y,+i.breakPoint.x+i.shift.x,+i.breakPoint.y+i.shift.y,+s.breakPoint.x+s.shift.x,+s.breakPoint.y+s.shift.y,+s.point.x+s.shift.x,+s.point.y+s.shift.y]),this}arrowPointPosition(e,t,r,i){const s={x:+i.x+Math.round(r.width/2),y:+i.y+Math.round(r.height/2)},o={x:+t.x+Math.round(e.width/2),y:+t.y+Math.round(e.height/2)},a=o.x-s.x,l=o.y-s.y,c=Math.abs(l)>Math.abs(a);let u=+t.x,f=+t.y;const h=c&&l>=0,p=!c&&a>=0,d=c&&l<0,g=!c&&a<0,m={x:0,y:0};let y=0,w=0;h?(u+=Math.round(e.width/2),m.x=u,m.y=(t.y+i.y+r.height)/2,y=i.x>t.x?1:-1):g?(f+=Math.round(e.height/2),u+=+e.width,m.x=(t.x+e.width+i.x)/2,m.y=f,w=i.y>t.y?1:-1):d?(u+=Math.round(e.width/2),f+=+e.height,m.x=u,m.y=(t.y+e.height+i.y)/2,y=i.x>t.x?1:-1):p&&(f+=Math.round(e.height/2),m.x=(t.x+i.x+r.width)/2,m.y=f,w=i.y>t.y?1:-1);const b=[u,f].join("-"),v=this.filledPoints.get(b)||0;return this.filledPoints.set(b,v+1),{point:{x:u,y:f},breakPoint:m,shift:{x:y*v*10,y:w*v*10}}}}var ej=ox,tj=Lm,nj="Expected a function";function rj(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(nj);return tj(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),ej(n,e,{leading:r,maxWait:e,trailing:i})}var ij=rj;const sj=Nm(ij),{Arrow:oj}=ui,Sc=De.debug("MapObjectsArrows");class aj{constructor(e,t,r,i,s){Pe(this,"previouslyRenderedArrows",new Map),this.konvaLayer=e,this.mapFile=t,this.mapDep=r,this.arrowPath=i,this.factories=s,Sc("draw arrows on canvas");const o=this.factories.chain.create();this.konvaLayer.layer(this.factories.patron.create(o.receiveKey("layer"))),this.mapFile.currentMap(this.factories.patron.create(o.receiveKey("map"))),this.mapDep.objects(this.factories.patron.create(o.receiveKey("objects"))),o.result(this.factories.patron.create(this.factories.guest.create(sj(({layer:a,map:l,objects:c})=>{const u=(f,h)=>{const p=l.types[h.type];this.arrowPath.breakPoints({shapeGeometry:{width:f.width,height:f.height},shapePosition:{x:f.position[0],y:f.position[1]},lookToGeometry:{width:h.width,height:h.height},lookToPosition:{x:h.position[0],y:h.position[1]}},{shapeGeometry:{width:h.width||p.width,height:h.height||p.height},shapePosition:{x:h.position[0],y:h.position[1]},lookToGeometry:{width:f.width,height:f.height},lookToPosition:{x:f.position[0],y:f.position[1]}},this.factories.guest.create(d=>{const g=d.join("-"),m=[f.id,h.id].join("-");if(Sc("points",d),Sc(f,h),this.previouslyRenderedArrows.has(m)){const w=this.previouslyRenderedArrows.get(m);w.arrow.show(),w.arrow.points(d);return}const y=new oj({x:0,y:0,points:d,pointerLength:20,pointerWidth:10,fill:"#ccc",stroke:"#bbb",strokeWidth:2,zIndex:2});this.previouslyRenderedArrows.set(m,{arrow:y,arrowKey:g}),a.add(y)}))};this.arrowPath.clear(),this.previouslyRenderedArrows.forEach(f=>f.arrow.hide()),c.forEach(f=>{f.arrows&&(Sc("visible objects",c.length),f.arrows.forEach(h=>{const p=c.find(d=>d.id===h.id)||l.objects[h.id];p&&u(f,p)}))})},50))))}introduction(){return"patron"}}const{Arrow:lj}=ui,Oh=De.debug("NewArrow"),Cb={width:10,height:10};class cj{constructor(e,t,r,i){Pe(this,"cursorGuest"),Pe(this,"arrowCache"),this.konvaLayer=e,this.cursorPosition=t,this.arrowPath=r,this.factories=i,this.cursorGuest=this.factories.sourceEmpty.create(),this.arrowCache=this.factories.sourceEmpty.create()}forObject(e){Oh("start watch cursor"),this.cursorGuest.value(this.factories.guest.create(i=>{ob(i)}));let t=null;const r=this.factories.patron.create(this.factories.guest.create(i=>{Oh("cursor moves"),this.konvaLayer.layer(this.factories.guest.create(s=>{Oh("cursor moves in layer"),this.arrowPath.breakPoints({shapeGeometry:{width:e.width,height:e.height},shapePosition:{x:e.position[0],y:e.position[1]},lookToGeometry:Cb,lookToPosition:i},{lookToGeometry:{width:e.width,height:e.height},lookToPosition:{x:e.position[0],y:e.position[1]},shapeGeometry:Cb,shapePosition:i},this.factories.guest.create(o=>{if(t){t.points(o);return}t=new lj({x:0,y:0,points:o,pointerLength:20,pointerWidth:10,fill:"#ccc",stroke:"#bbb",strokeWidth:2,zIndex:2}),s.add(t),this.arrowCache.give(t)}))})),this.arrowPath.clear()}));this.cursorPosition.value(r),this.cursorGuest.give(r)}dispose(){this.cursorGuest.value(this.factories.guest.create(e=>{ob(e)})),this.arrowCache.value(this.factories.guest.create(e=>{e.remove()}))}}const aa=De.debug("MapObjectBackground"),uj="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD//gATQ3JlYXRlZCB3aXRoIEdJTVD/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH6AAMAAQADQAqAAthY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAeAB4DAREAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAwUEAAj/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAH1SCMTDaCMTiuCMTDgxDGf/8QAHhAAAgIBBQEAAAAAAAAAAAAAAAMBAgQFExUyMxL/2gAIAQEAAQUCG9TUPHdga2PndgzrxZQ3qah48gsvnUtHILMrKq5f/8QAFBEBAAAAAAAAAAAAAAAAAAAAQP/aAAgBAwEBPwEH/8QAFBEBAAAAAAAAAAAAAAAAAAAAQP/aAAgBAgEBPwEH/8QAHhAAAgIBBQEAAAAAAAAAAAAAAAECMXIQQUKSsVH/2gAIAQEABj8CFkvdFkVLqzla4v6VLqxXe60WS90WRUipWipCSTvc/8QAIxAAAgADCAMAAAAAAAAAAAAAAAEQUfAhMUGhscHR8RFhcf/aAAgBAQABPyErMkMi0ZW2wylmzHorbYSSX3Vg5wrMkMi0Z0a5FVK8Llg05nRrkRmteVg//9oADAMBAAIAAwAAABCCQQSCSST/xAAUEQEAAAAAAAAAAAAAAAAAAABA/9oACAEDAQE/EAf/xAAUEQEAAAAAAAAAAAAAAAAAAABA/9oACAECAQE/EAf/xAAeEAEAAQQCAwAAAAAAAAAAAAABIRARIDEAQVFxkf/aAAgBAQABPxDEMgTA4U0lpO6EwKiFh/YAyDIEAZSTdCnwUQAma0AtZOl88//Z";class fj{constructor(e,t,r,i){Pe(this,"mapNameCache"),this.konvaLayer=e,this.mapFile=t,this.zIndex=r,this.factories=i,this.mapNameCache=i.cache.create(""),this.mapFile.currentMap(i.patron.create(this))}give(e){return this.konvaLayer.layer(this.factories.patronOnce.create(t=>{aa("map received in background",e),this.mapNameCache.value(this.factories.guest.create(r=>{if(r===e.url)return;aa("background cache is not equals",r),this.mapNameCache.give(e.url);const i=new Image,s=document.querySelector(".grid-example");aa("grid example",s),i.src=uj,i.onload=()=>{aa("canvas pattern loaded"),aa("konva layer loaded");const o=new ui.Rect({width:3e3,height:3e3,x:0,y:0,fillPatternImage:i,zIndex:1});this.zIndex.give(()=>{o.zIndex(0)}),t.add(o)}}))})),this}}const hj=De.debug("Breadcrumbs");class dj{constructor(e,t,r){this.parentNames=e,this.mapFile=t,this.factories=r}list(e){const t=this.factories.chain.create();return this.parentNames.names(this.factories.guestCast.create(e,t.receiveKey("names"))),this.mapFile.mapFile(this.factories.guestCast.create(e,t.receiveKey("mapFile"))),t.result(this.factories.guestInTheMiddle.create(e,({names:r,mapFile:i})=>{hj("map id",r,i),e.give(r.map(s=>{var o,a;return{title:((a=(o=i[s])==null?void 0:o.settings)==null?void 0:a.title)||"unknown",name:s}}))})),e}}const Sb=De.debug("CursorWithObjects");class pj{constructor(e,t,r){this.objectsVisible=e,this.cursor=t,this.factories=r}value(e){const t=this.factories.chain.create();return this.cursor.value(this.factories.guestCast.create(e,t.receiveKey("cursor"))),this.objectsVisible.objects(this.factories.guestCast.create(e,t.receiveKey("objects"))),t.result(this.factories.guestInTheMiddle.create(e,({cursor:r,objects:i})=>{const s=i.find(o=>{const a=o.position[0],l=o.position[0]+o.width||100,c=o.position[1],u=o.position[1]+o.height||100;return r.x>=a&&r.x<=l&&r.y>=c&&r.y<=u});s?(Sb("crossed with",s),e.give({x:s.position[0]+s.width/2,y:s.position[1]+s.height/2})):(Sb("cursor pos",r),e.give(r))})),this}}const xb=De.debug("Drawer");class mj{constructor(e,t){Pe(this,"drawerNameCache"),this.keyboard=e,this.factories=t,this.drawerNameCache=t.cache.create(""),this.keyboard.pressed(this.factories.patron.create(this.factories.guest.create(r=>{xb("new key in drawer",r),r==="Escape"&&this.give("")})))}isOpenedByName(e,t){return this.drawerNameCache.value(this.factories.guestInTheMiddle.create(t,r=>{xb("new drawer name",r),t.give(r===e)})),t}openedByName(e){return this.factories.guestAware.create(t=>{this.isOpenedByName(e,t)})}give(e){return this.drawerNameCache.give(e),this}}class gj{value(e){typeof performance>"u"&&e.give(0);const t=10;let r=performance.now(),i=0;const s=()=>requestAnimationFrame(()=>{if(i+=1,i>=t){const o=performance.now(),a=o-r;e.give(Math.round(1e3/(a/i))),r=o,i=0}s()});return s(),e}}class vj{constructor(e,t){this.mapFile=e,this.factories=t}menuObjects(e){return this.mapFile.currentMap(this.factories.guestInTheMiddle.create(e,t=>{const r=Object.values(t.objects).filter(i=>i.inMenu);e.give(r)})),e}}const Ab=De.debug("app:MiniMap"),kb=130;class yj{constructor(e,t,r,i){Pe(this,"theSize"),Pe(this,"thePoints"),Pe(this,"viewportSizeCache"),this.map=e,this.layer=t,this.stageSize=r,this.factories=i,this.theSize=i.sourceEmpty.create(),this.thePoints=i.sourceEmpty.create(),this.viewportSizeCache=i.sourceEmpty.create();const s=i.chain.create();e.objects(i.patron.create(s.receiveKey("objects"))),t.layer(i.patron.create(s.receiveKey("layer"))),r.value(i.patron.create(s.receiveKey("size"))),s.result(i.patron.create(i.guest.create(({layer:o,size:a,objects:l})=>{const c=kb/a.width,u={width:Math.round(o.width()*c),height:Math.round(o.height()*c)};this.viewportSizeCache.give(u);const f={width:Math.round(a.width*c),height:Math.round(a.height*c)};this.theSize.give(f);const h=l.map(p=>({id:p.id,x:Math.round(p.position[0]*c),y:Math.round(p.position[1]*c),width:Math.round(p.width*c),height:Math.round(p.height*c)}));Ab("minimap points",h),this.thePoints.give(h)})))}viewportPosition(e){const t=this.factories.chain.create();return this.stageSize.value(this.factories.guestCast.create(e,t.receiveKey("size"))),this.layer.position(this.factories.guestCast.create(e,t.receiveKey("position"))),t.result(this.factories.guestInTheMiddle.create(e,({size:r,position:i})=>{const s=kb/r.width,o={x:i.x*s*-1,y:i.y*s*-1};Ab("scaled position is",o),e.give(o)})),e}viewportSize(e){return this.viewportSizeCache.value(e),e}size(e){return this.theSize.value(e),e}points(e){return this.thePoints.value(e),e}}const Eb=De.debug("Modal");class bj{constructor(e,t){Pe(this,"modalNameCache"),this.keyboard=e,this.factories=t,Eb("modal created"),this.modalNameCache=t.cache.create(""),this.keyboard.pressed(this.factories.patron.create(this.factories.guest.create(r=>{Eb("new key in modal",r),r==="Escape"&&this.give("")})))}isOpenedByName(e,t){return this.modalNameCache.value(this.factories.guestInTheMiddle.create(t,r=>{t.give(r===e)})),t}openedByName(e){return this.factories.guestAware.create(t=>{this.isOpenedByName(e,t)})}give(e){return this.modalNameCache.give(e),this}}class _j{constructor(e){Pe(this,"messageCache"),Pe(this,"notificationLifetimeDelay",3500),Pe(this,"lastTimerHead",null),this.messageCache=e.sourceEmpty.create()}message(e){return this.messageCache.value(e),e}give(e){return this.messageCache.give(e),this.lastTimerHead&&clearTimeout(this.lastTimerHead),this.lastTimerHead=setTimeout(()=>{this.messageCache.give({type:"success",text:"hide"})},this.notificationLifetimeDelay),this}}const la=De.debug("ObjectGeometryFix");class wj{constructor(e,t,r,i){Pe(this,"innerReceive"),this.mapFile=t,this.map=r,this.factories=i,e.objects(i.patron.create(this)),this.innerReceive=qo(s=>{this.mapFile.currentMap(this.factories.guest.create(o=>{la("objects to fix",s);const a=document.querySelectorAll(".objects-container .rendered-object"),l=o.objects;let c=!1;a.forEach(u=>{const f=u.getAttribute("data-object-id");if(la("i see id",f),!f)return;const h=l[f];if(h&&(la("dom object geometry",u.clientWidth,u.clientHeight),la("saved object geometry",h.width,h.height),(h.width!==u.clientWidth||h.height!==u.clientHeight)&&(c=!0,la("update object geometry"),h.width=u.clientWidth,h.height=u.clientHeight),!h.width||!h.height)){const p=o.types[h.type];h.width=p.width,h.height=p.height}}),c&&this.map.give({...o,objects:l})}))},500)}give(e){return this.innerReceive(e),this}}const ca=De.debug("MapObjectsRectsPatron");class Cj{constructor(e,t,r,i,s,o,a,l,c){Pe(this,"previouslyRenderedRects",new Map),this.konvaLayer=e,this.mapFile=t,this.mapObject=r,this.mapObjectCurrent=s,this.mapObjectForRendering=o,this.objectPosition=a,this.settings=l,this.factories=c,i.objects(this)}give(e){return this.konvaLayer.layer(this.factories.patronOnce.create(this.factories.guest.create(t=>{const r=this.factories.chain.create();this.mapFile.currentMap(r.receiveKey("map")),this.settings.value(r.receiveKey("settings")),r.result(this.factories.guest.create(i=>{const{map:s,settings:o}=i;ca("rerender object rects"),this.previouslyRenderedRects.forEach(a=>{a.hide()}),e.forEach(a=>{const l=s.types[a.type],c=+a.width||+l.width||100,u=+a.height||+l.height||100;if(this.previouslyRenderedRects.has(a)){const h=this.previouslyRenderedRects.get(a);h.width(c),h.height(u),h.x(+a.position[0]),h.y(+a.position[1]),h.show();return}ca("rect object",a,l);const f=new ui.Rect({x:+a.position[0],y:+a.position[1],width:c,height:u,name:a.id,draggable:!o.readonly,objectId:a.id,zIndex:3});this.previouslyRenderedRects.set(a,f),t.add(f),f.on("mouseenter",()=>{t.getStage().container().style.cursor="pointer"}),f.on("mouseleave",()=>{t.getStage().container().style.cursor="default"}),f.on("dragend",()=>{ca("drag ended"),this.objectPosition.position(a,{x:f.x(),y:f.y()},this.factories.guest.create(h=>{this.mapObject.give({...a,position:[h.x,h.y]})}))}),f.on("dragmove",()=>{ca("dragmove works",f.x(),f.y()),t.getStage().container().style.cursor="move",this.objectPosition.position(a,{x:f.x(),y:f.y()},this.factories.guest.create(h=>{this.mapObjectForRendering.give({...a,position:[h.x,h.y]})}))}),f.on("click",()=>{ca("object clicked with id",a.id),this.mapObjectCurrent.give(a.id)})})}))}))),this}introduction(){return"patron"}}class Sj{constructor(e,t,r,i){this.canvas=t,this.konvaLayer=r,this.factories=i,e.currentMap(this)}give(){const e=new ResizeObserver(r=>{requestAnimationFrame(()=>{const[i]=r;this.canvas.canvas(this.factories.guest.create(s=>{const o=s.getBoundingClientRect();this.konvaLayer.layer(this.factories.guest.create(a=>{a.getStage().width(i.contentRect.width-o.left),a.getStage().height(i.contentRect.height-o.top),this.canvas.give(s),this.konvaLayer.give(a)}))}))})}),t=document.querySelector("body");return t&&e.observe(t),this}}const xj=De.debug("StagePosition");class Aj{constructor(e){this.stageMove=e}give(e){return xj("received position",e),this.stageMove.move(e),this}}class kj{constructor(e,t){this.stageMove=e,this.factories=t}move(e,t){return e.value(this.factories.guest.create(r=>{this.stageMove.move(r.objects[t])})),this}}const Tb=De.debug("Zindex");class Ej{constructor(e){Pe(this,"fnsCache"),this.factories=e,this.fnsCache=e.cache.create([]),this.fnsCache.value(e.patron.create(e.guest.create(qo(t=>{Tb("zindex fns run"),t.forEach(r=>r())},50))))}give(e){return Tb("zindex received value"),this.fnsCache.value(this.factories.guest.create(t=>{this.fnsCache.give(t.concat(e))})),this}}const Ob=De.debug("app:BrowserCanvas");class Tj{constructor(e){Pe(this,"canvasCache"),this.factories=e,this.canvasCache=e.sourceEmpty.create()}canvas(e){return this.canvasCache.value(e),this}size(e){return this.canvasCache.value(this.factories.guestInTheMiddle.create(e,t=>{const r=t.width||t.clientWidth,i=t.height||t.clientHeight;Ob("canvas size",r,i),e.give({height:i,width:r})})),this}give(e){return Ob("receive new canvas",e),this.canvasCache.give(e),this}}const Oj=De.debug("Cursor");class Mj{constructor(e,t){Pe(this,"cursorPool"),this.cursorPool=t.pool.create(this);const r={x:0,y:0};window==null||window.addEventListener("mousemove",i=>{const s={x:i.offsetX+-r.x,y:i.offsetY+-r.y};Oj("move cursor fired",s),this.cursorPool.give(s)}),e.position(t.patron.create(t.guest.create(i=>{r.x=i.x,r.y=i.y})))}value(e){return this.cursorPool.add(e),this}}class Ij{constructor(e){this.el=e,e.value(this)}give(e){return e.addEventListener("dragstart",t=>{const r=t.target;if(!r)return;const i=r.cloneNode(!0);i.style.transform="translate(0,0)",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.zIndex="999",t.dataTransfer&&t.dataTransfer.setDragImage(i,0,0),document.body.append(i);const s=o=>{i.style.transform=`translate(${o.clientX}px, ${o.clientY}px)`};r.addEventListener("drag",s,{passive:!0}),r.addEventListener("dragend",()=>{i.removeEventListener("drag",s),i.remove()})}),this}introduction(){return"patron"}}const xc=De.debug("ControlCombo");class Pj{constructor(e,t){this.keyboard=e,this.factories=t}happened(e,t){this.keyboard.event(this.factories.guestInTheMiddle.create(t,r=>{xc("combo happened look for key",e,"received",r.code),r.ctrlKey&&r.code===e&&r.type==="keydown"&&(r.preventDefault(),t.give(r))}))}happenedConditional(e,t,r){xc("combo control happened registration"),this.keyboard.event(this.factories.guestInTheMiddle.create(r,i=>{xc("keyboard event come"),t.value(this.factories.guest.create(s=>{xc("combo happened look for key",e,"received",i.code),s&&i.ctrlKey&&i.code===e&&i.type==="keydown"&&(i.preventDefault(),r.give(i))}))}))}}const ua=De.debug("Keyboard");class Nj{constructor(e){Pe(this,"pressedPool"),Pe(this,"combinationsPool"),ua("keyboard created"),this.pressedPool=e.pool.create(this),this.combinationsPool=e.pool.create(this),window==null||window.addEventListener("keyup",t=>{ua("keyboard pressed",t.key),this.pressedPool.give(t.key)}),ST({passive:!1,onEventFired:t=>{ua("magic combination happens 11",t.ctrlKey,t.key),this.combinationsPool.give(t)}})}pressed(e){return ua("keyboard receive pressed subscriber"),this.pressedPool.add(e),this}event(e){return ua("keyboard receive combination subscriber"),this.combinationsPool.add(e),this}}const Mb=De.debug("app:konva:KonvaLayer");class Rj{constructor(e,t,r,i){Pe(this,"guestChain"),Pe(this,"positionCache"),Pe(this,"layerCache"),this.canvasDep=e,this.stageMoveRestriction=r,this.factories=i,this.positionCache=i.cache.create({x:0,y:0}),this.guestChain=i.chain.create(),this.layerCache=i.sourceEmpty.create(),this.canvasDep.canvas(i.patron.create(this.guestChain.receiveKey("canvas"))),t.value(this.guestChain.receiveKey("stageSize")),this.guestChain.result(i.guest.create(({canvas:s})=>{Mb("create new konva stage");const o=new ui.Stage({width:s.clientWidth,height:s.clientHeight,container:s,fill:"#ffeeee",draggable:!0}),a=new ui.Layer;o.add(a),a.draw(),this.layerCache.give(a),o.on("dragend",c=>{if(!(c.target instanceof ui.Stage))return;const u={x:o.x(),y:o.y()};Mb("new position",u),this.positionCache.give(u)}),o.on("dragmove",c=>{if(!(c.target instanceof ui.Stage))return;const u={x:o.x(),y:o.y()};this.positionCache.give(u)});const l=this.factories.guestSync.create({x:0,y:0});o.dragBoundFunc(c=>(r.position(c,l),l.value()))}))}layer(e){return this.layerCache.value(e),e}position(e){return this.positionCache.value(e),e}give(e){this.layerCache.give(e);const t=e.getStage();return this.positionCache.give({x:t.x(),y:t.y()}),this}}class Lj{constructor(e,t){this.konvaLayer=e,this.factories=t}position(e){return this.konvaLayer.position(this.factories.guestInTheMiddle.create(e,t=>{e.give({x:t.x*-1,y:t.y*-1})})),e}}const Dj=De.debug("position");class Fj{constructor(e,t,r,i,s){this.layer=e,this.canvas=t,this.stageSize=r,this.stageMoveRestriction=i,this.factories=s}move(e){Dj("move stage to new point",e.position),this.stageSize.value(this.factories.guest.create(()=>{this.canvas.size(this.factories.guest.create(t=>{this.layer.layer(this.factories.guest.create(r=>{const[i,s]=e.position,o={x:-i-Math.round(e.width/2)+Math.round(t.width/2),y:-s-Math.round(e.height/2)+Math.round(t.height/2)};this.stageMoveRestriction.position(o,this.factories.guest.create(a=>{r.getStage().position(a),setTimeout(()=>{this.layer.give(r)})}))}))}))}))}}const be=En(),bf=new Nj(be),ax=new Ml({readonly:!1,presets:{}}),Bj=new bj(bf,be),lx=new mj(bf,be),_f=new _j(be),Wr=new p8(be),cx=be.sourceEmpty.create(),ft=new y8(cx,Wr,be),$j=new m8(ft),jj=new s$($j),Dm=new _8(ft,Wr,be),Fm=new tx(Dm,Wr,be),Hj=new nx(Fm,Dm,be),Gn=new tx(ft,Wr,be),Vj=new Pm(n=>{ft.currentMap(new Cu(n))}),wf=new w8(lx,be),zj=new F6(be),Gj=new D6(ft,Gn,be),Hs=new Tj(be),Vs=new K6,ux=new Y6(Hs,Vs,be),Wn=new Rj(Hs,Vs,ux,be),Wj=new Ej(be),Uj=new fj(Wn,ft,Wj,be),Xo=new nx(Gn,ft,be),Kj=new k8(Gn,ft,[new Rm(_f,new C8(ft,be),be)],be),Yj=new Lj(Wn,be),qj=new S8(Gn,Xo,Hs,Yj,be),fx=new V6(ft,be),hx=new j6(Gn,ft,[new Rm(_f,new z6(fx,be),be)],be),Xj=new $6(Gn,ft,[new Rm(_f,fx,be)],be),Jj=new B6(hx),Cf=new q6(Wn,Hs,Dm,be),Qj=new wj(Cf,ft,Gn,be),Zj=new Cj(Wn,ft,Xo,Cf,wf,Hj,new N6(new P6(Vs,be),be),ax,be),eH=new Mj(Wn,be),tH=new pj(Cf,eH,be),dx=new Z6,px=new cj(Wn,tH,dx,be),nH=new aj(Wn,ft,Fm,dx,be),rH=new yj(Fm,Wn,Vs,be),iH=new T8(wf,Gn,Xo,px,be),sH=new Sj(ft,Hs,Wn,be),oH=new Q6(wf,ft,Xo,be),aH=new v8(ft,Wr,be),lH=new A8(Xo),cH=new gj,Bm=new x8(Wr,be),uH=new dj(Bm,ft,be),fH=new O6(Wr,be),hH=new G6(Bm,ft,be),dH=new Pj(bf,be),pH=new vj(ft,be),mx=new Fj(Wn,Hs,Vs,ux,be),mH=new Aj(mx),gH=new kj(mx,be),vH=new W6(Gn,be),yH=new g8(ft,Gn,Wr,be),bH=new L6(Gn,Vs,Wn,be),gx=new yf;new Ij(gx);const _H={mapCurrentID:Wr,mapFile:ft,mapCurrent:Gn,mapCurrentSource:Vj,mapRemoved:aH,mapSettings:Gj,mapObject:Xo,mapObjectRemoved:Kj,mapType:hx,mapTypeRemoved:Xj,mapTypeNew:Jj,mapObjectsVisible:Cf,mapObjectCurrent:wf,mapObjectNew:qj,mapObjectsLink:iH,mapTypeCurrent:zj,mapRects:Zj,mapBackground:Uj,mapObjectArrows:nH,mapObjectsGeometryFix:Qj,canvas:Hs,miniMap:rH,notification:_f,modal:Bj,drawer:lx,konvaLayer:Wn,resizing:sH,objectAdditionalFieldsFix:oH,mapObjectRelationRemoved:lH,fps:cH,breadcrumbs:uH,mapObjectUrl:fH,keyboard:bf,parentNames:Bm,parentTypes:hH,controlCombo:dH,menu:pH,stagePosition:mH,stagePositionByObjectId:gH,objectsMatchedToQuery:vH,stageSize:Vs,mapHistory:yH,fileContent:cx,newArrow:px,objectsOutsideScreen:bH,settings:ax,documentTitle:jj,sidebarDraggable:gx},Ct=()=>_H;class Be{constructor(e=void 0){Pe(this,"innerRef"),this.innerRef=er(e)}get value(){return this.innerRef.value}ref(){return this.innerRef}give(e){return this.innerRef.value=e,this}introduction(){return"patron"}}const wH={key:0},CH={class:"flex-grow overflow-y-auto"},SH={key:1,class:"flex gap-1"},$m=Ge({__name:"BaseDrawer",props:{name:{type:String,required:!0},direction:{type:String,default:"ltr",validator:n=>["ltr","rtl","ttb","btt"].includes(n)}},emits:["close"],setup(n,{emit:e}){const t=n,r=e,i=wl(()=>["e2e-drawer-back absolute z-10 top-0 left-0 w-full h-full bg-black/50"]),s={ltr:"top-0 left-0 w-[50%] max-w-[900px] ",rtl:"top-0 right-0 w-[50%] max-w-[900px] ",ttb:"top-0 right-0 left-0",btt:"top-auto h-[900px] max-h-[50%] bottom-0 right-0 left-0"},{drawer:o}=Ct(),a=()=>{o.give(""),r("close")},l=o.isOpenedByName(t.name,new Be).ref();return(c,u)=>(K(),mt(Lu,{name:"fade"},{default:se(()=>[P(l)?(K(),te("div",{key:0,class:Sn(P(i)),onClick:a},[ie("div",{class:Sn(["absolute bg-white h-full p-3 flex flex-col overflow-hidden",s[n.direction]]),onClick:u[0]||(u[0]=jo(()=>{},["stop"]))},[c.$slots.header?(K(),te("div",wH,[Bn(c.$slots,"header",{class:"BaseDrawer-Header"})])):He("",!0),ie("div",CH,[Bn(c.$slots,"default")]),c.$slots.footer?(K(),te("div",SH,[Bn(c.$slots,"footer")])):He("",!0)],2)],2)):He("",!0)]),_:3}))}}),yn=Ge({__name:"BaseIcon",props:{icon:{type:String}},setup(n){const e={"fa-bars":oR,"fa-text-width":fR,"fa-search":yR,"fa-history":xR,"fa-plus-square":lR,"fa-cog":pR,"fa-file-text":sR,"fa-rotate-left":cR,"fa-rotate-right":mR,"fa-map":CR,"fa-close":wR,"fa-arrow-left":hR,"fa-arrow-right":uR,"fa-arrow-down":gR,"fa-arrow-up":bR};return(t,r)=>(K(),mt(P(rR),{icon:e[n.icon]},null,8,["icon"]))}}),xH=ie("h2",{class:"text-lg font-bold"},"    ",-1),AH=["onClick"],kH=Ge({__name:"AppFileMaps",setup(n){const{mapFile:e,mapCurrentID:t,drawer:r,mapRemoved:i}=Ct(),s=e.mapFile(new Be).ref(),o=t.id(new Be).ref(),a=l=>{confirm(" ?")&&i.give(l)};return(l,c)=>(K(),mt($m,{direction:"rtl",name:"fileMaps"},{header:se(()=>[xH]),default:se(()=>[ie("div",null,[(K(!0),te(ze,null,en(P(s),(u,f)=>(K(),te("div",{key:f,class:"flex items-center gap-2"},[ie("a",{href:"#",class:Sn({"font-bold":P(o)===f}),onClick:jo(h=>{P(t).give(f),P(r).give("")},["prevent"])},ge(u.settings.title),11,AH),z(yn,{onClick:h=>a(f),class:"text-danger-second cursor-pointer",title:" ",icon:"fa-close"},null,8,["onClick"])]))),128))])]),_:1}))}}),EH={class:"AppMenuObject"},TH={key:0,class:"AppMenuObject-Empty"},OH={key:1,class:"flex flex-col gap-1"},MH=["onClick"],IH=["innerHTML"],PH=Ge({__name:"AppMenuObject",setup(n){const{controlCombo:e,drawer:t,menu:r,stagePosition:i}=Ct(),{guest:s,patron:o}=En(),a=r.menuObjects(new Be).ref();return e.happened("KeyM",o.create(s.create(()=>{t.give("menu")}))),(l,c)=>(K(),mt($m,{direction:"rtl",name:"menu"},{default:se(()=>[ie("div",EH,[P(a).length?(K(),te("div",OH,[(K(!0),te(ze,null,en(P(a),u=>(K(),te("a",{key:u.id,class:"AppMenuObject-Item",href:"#",onClick:jo(f=>{P(i).give(u),P(t).give("")},["prevent"])},[ie("span",{innerHTML:u.additionalName?u.additionalName:u.name},null,8,IH)],8,MH))),128))])):(K(),te("div",TH,ge(l.$t("appMenuObject.noItems")),1))])]),_:1}))}}),tt=Ge({__name:"BaseButton",props:{size:{type:String,default:"md",validator:n=>["sm","md","lg"].includes(n)},type:{type:String,default:"standard"}},setup(n){const e=n,t=["rounded-main",`text-${e.size}`,`p-${e.size}`,`bg-${e.type} hover:bg-${e.type}-second`];return t.push(""),(r,i)=>(K(),te("button",{type:"button",class:Sn(t)},[Bn(r.$slots,"default")]))}}),NH={key:0,title:"",class:"absolute text-white left-0 top-0 -ml-5 flex justify-center items-center bg-primary/70 hover:bg-primary-second/70 cursor-pointer w-5"},RH={key:1,class:"BaseModal-Header"},LH={class:"overflow-y-auto flex-grow"},DH={key:2,class:"BaseModal-Footer"},zs=Ge({__name:"BaseModal",props:{name:{type:String,required:!0}},setup(n){const{modal:e}=Ct(),t=n,r=e.isOpenedByName(t.name,new Be).ref(),i=[],s=()=>{e.give("")};return(o,a)=>(K(),mt(Lu,{name:"fade"},{default:se(()=>[P(r)?(K(),te("div",{key:0,class:"absolute rounded-main overflow-y-auto flex justify-center items-center top-0 left-0 bg-black/10 z-20 h-full w-full",onClick:s},[ie("div",{class:"w-full relative flex flex-col max-w-[800px] max-h-[90%] bg-white p-3",onClick:a[0]||(a[0]=jo(()=>{},["stop"]))},[i.length>1?(K(),te("div",NH," < ")):He("",!0),ie("div",{title:"",class:"e2e-modal-close absolute text-white right-0 top-0 -mr-5 flex justify-center items-center bg-danger/70 hover:bg-danger-second/70 cursor-pointer w-5",onClick:s},"  "),o.$slots.header?(K(),te("div",RH,[Bn(o.$slots,"header")])):He("",!0),ie("div",LH,[Bn(o.$slots,"default")]),o.$slots.footer?(K(),te("div",DH,[Bn(o.$slots,"footer")])):He("",!0)])])):He("",!0)]),_:3}))}}),FH={class:"AppPresets"},BH=ie("div",{class:"text-md font-bold mb-2"},"",-1),$H={class:"flex flex-col gap-2"},jH={class:"text-md font-bold mb-1"},HH={class:"flex gap-2 flex-wrap items-end"},VH={class:"AppTypesParent-ItemTitle"},zH=["innerHTML"],GH=Ge({__name:"AppPresets",setup(n){const{svgMapTypeImage:e}=En(),{mapType:t,settings:r}=Ct(),i=new Be;r.value(i);const s=wl(()=>Object.fromEntries(Object.entries(i.value.presets).map(([o,a])=>[o,a.map(l=>({preset:l,image:e.create(l).markup()}))])));return(o,a)=>(K(),mt(zs,{name:"presets"},{default:se(()=>[ie("div",FH,[BH,ie("div",$H,[(K(!0),te(ze,null,en(P(s),(l,c)=>(K(),te("div",{key:c},[ie("h3",jH,ge(c),1),ie("div",HH,[(K(!0),te(ze,null,en(l,u=>(K(),te("div",{key:u.preset.name,class:"flex flex-col gap-2"},[ie("div",VH,ge(u.preset.name),1),ie("div",{class:"AppTypesParent-ItemImage",innerHTML:u.image,style:wn(`width:${u.preset.width}px;height:${u.preset.height}px`)},null,12,zH),z(tt,{class:"AppTypesParent-ItemButton e2e-add-preset-type",type:"success",size:"sm",onClick:f=>P(t).give({name:u.preset.name,type:u.preset})},{default:se(()=>[je(ge(o.$t("general.addToMap")),1)]),_:2},1032,["onClick"])]))),128))])]))),128))])])]),_:1}))}}),fr=Ge({__name:"BaseInput",props:{modelValue:{type:[String,Number],default:""},autofocus:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,i=er(null);_l(i,qo(()=>{t.autofocus&&i.value.focus()},500));const s=Hu(t,"modelValue",r);return(o,a)=>Tu((K(),te("input",{ref_key:"input",ref:i,"onUpdate:modelValue":a[0]||(a[0]=l=>bt(s)?s.value=l:null),class:"block rounded-main w-full p-2 border border-solid border-body-dark",type:"text"},null,512)),[[F1,P(s)]])}});class jm{constructor(e){Pe(this,"pool",new vf(this)),this.refSource=e,_l(e,t=>{t!==void 0&&this.pool.give(t)},{deep:!0})}value(e){return this.refSource.value&&e.give(this.refSource.value),this.pool.add(e),this}}const WH={class:"AppSearch"},UH={key:0,class:"AppSearch-Items"},KH=["onClick"],YH=["innerHTML"],qH=["innerHTML"],XH=["innerHTML"],JH={key:1},QH={key:2},ZH=Ge({__name:"AppSearch",setup(n){const{objectsMatchedToQuery:e,controlCombo:t,modal:r,stagePosition:i}=Ct(),{guest:s,patron:o}=En(),a=er(),l=De.debug("app:AppSearch");r.isOpenedByName("search",o.create(s.create(f=>{setTimeout(()=>{f&&a.value&&(l("search is opened",f),a.value.$el.focus())},500)})));const c=er(""),u=e.objects(new jm(c),new Be([])).ref();return t.happened("KeyF",o.create(s.create(()=>{r.give("search")}))),(f,h)=>(K(),mt(zs,{name:"search"},{default:se(()=>[ie("div",WH,[z(fr,{ref_key:"inputRef",ref:a,modelValue:P(c),"onUpdate:modelValue":h[0]||(h[0]=p=>bt(c)?c.value=p:null),class:"mb-2 e2e-query-input",placeholder:f.$t("general.specifyQuery")},null,8,["modelValue","placeholder"]),P(u).length?(K(),te("div",UH,[(K(!0),te(ze,null,en(P(u),p=>(K(),te("div",{key:p.name,class:"cursor-pointer",onClick:jo(d=>{P(i).give(p),P(r).give("")},["prevent"])},[ie("b",{class:"AppSearch-ItemName",innerHTML:p.name},null,8,YH),p.additionalName?(K(),te("b",{key:0,class:"AppSearch-ItemName",innerHTML:p.additionalName},null,8,qH)):He("",!0),p.additionalFields?(K(),te("div",{key:1,innerHTML:Object.values(p.additionalFields).join(" ")},null,8,XH)):He("",!0)],8,KH))),128))])):P(c)?(K(),te("div",JH,ge(f.$t("general.noResults")),1)):(K(),te("div",QH,ge(f.$t("general.resultsWillBeHere")),1))])]),_:1}))}}),eV={class:"AppTypes"},tV=ie("div",{class:"text-md font-bold mb-2"}," ",-1),nV={class:"flex gap-2 items-end"},rV={class:"AppTypesParent-ItemTitle"},iV=["innerHTML"],sV=Ge({__name:"AppTypesParent",setup(n){const{parentTypes:e,mapType:t}=Ct(),{svgMapTypeImage:r}=En(),i=e.types(new Be).ref(),s=wl(()=>{var o;return(o=i.value)==null?void 0:o.map(a=>({type:a,image:r.create(a).markup()})).sort((a,l)=>+(a.type.name>=l.type.name))});return(o,a)=>(K(),mt(zs,{name:"parentTypes"},{default:se(()=>[ie("div",eV,[tV,ie("div",nV,[(K(!0),te(ze,null,en(P(s),l=>(K(),te("div",{key:l.type.name,class:"flex flex-col gap-2"},[ie("div",rV,ge(l.type.name),1),ie("div",{class:"AppTypesParent-ItemImage",innerHTML:l.image,style:wn(`width:${l.type.width}px;height:${l.type.height}px`)},null,12,iV),z(tt,{class:"AppTypesParent-ItemButton e2e-add-preset-type",type:"success",size:"sm",onClick:c=>P(t).give({name:l.type.name,type:l.type})},{default:se(()=>[je(ge(o.$t("general.addToMap")),1)]),_:2},1032,["onClick"])]))),128))])])]),_:1}))}});class vx{constructor(e,t=void 0){Pe(this,"innerRef"),this.executor=e,this.innerRef=er(t)}ref(){return this.executor(this.innerRef),this.innerRef}}const oV={class:"flex gap-2"},Mh=Ge({__name:"BaseCheckbox",props:{modelValue:{type:Boolean},label:{type:String,required:!0}},emits:["update:modelValue"],setup(n,{emit:e}){const t=Hu(n,"modelValue",e);return(r,i)=>(K(),te("label",oV,[Tu(ie("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>bt(t)?t.value=s:null),type:"checkbox"},null,512),[[z2,P(t)]]),r.$slots.default?Bn(r.$slots,"default",{key:0}):(K(),te(ze,{key:1},[je(ge(n.label),1)],64))]))}}),Sf=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},aV={},lV={class:"text-sm font-bold"};function cV(n,e){return K(),te("div",lV,[Bn(n.$slots,"default")])}const vn=Sf(aV,[["render",cV]]),uV={},fV={class:"mb-2"};function hV(n,e){return K(),te("div",fV,[Bn(n.$slots,"default")])}const Mn=Sf(uV,[["render",hV]]),dV={class:"rounded-main p-2 border border-solid border-body-dark"},pV={class:"flex gap-2 p-2 bg-white border border-solid border-body-dark rounded-main"},Ac=Ge({__name:"BaseEditor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,i=tB({content:t.modelValue,extensions:[t$],onUpdate:()=>{i.value&&r("update:modelValue",i.value.getHTML())}});return FI(()=>{var s;(s=i.value)==null||s.destroy()}),_l(()=>t.modelValue,s=>{!i.value||i.value.getHTML()===s||i.value.commands.setContent(s,!1)}),(s,o)=>(K(),te("div",dV,[z(P(eB),{editor:P(i)},null,8,["editor"]),P(i)?(K(),mt(P(Q4),{key:0,editor:P(i),"tippy-options":{duration:100}},{default:se(()=>[ie("div",pV,[ie("button",{onClick:o[0]||(o[0]=a=>P(i).chain().focus().toggleBold().run()),class:Sn({"font-bold":P(i).isActive("bold")})}," bold ",2),ie("button",{onClick:o[1]||(o[1]=a=>P(i).chain().focus().toggleItalic().run()),class:Sn({"font-bold":P(i).isActive("italic")})}," italic ",2),ie("button",{onClick:o[2]||(o[2]=a=>P(i).chain().focus().toggleStrike().run()),class:Sn({"font-bold":P(i).isActive("strike")})}," strike ",2)])]),_:1},8,["editor"])):He("",!0)]))}}),mV=["value"],gV=Ge({__name:"BaseSelect",props:{modelValue:{type:[String,Number],default:""},items:{type:Array,required:!0},optionId:{type:String,required:!0},optionLabel:{type:String,required:!0}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=Hu(t,"modelValue",e);return(i,s)=>Tu((K(),te("select",{label:"select","onUpdate:modelValue":s[0]||(s[0]=o=>bt(r)?r.value=o:null),class:"block bg-white rounded-main w-full p-2 border border-solid border-body-dark"},[(K(!0),te(ze,null,en(t.items,o=>(K(),te("option",{key:o[t.optionId],value:o[t.optionId]},ge(o[t.optionLabel]),9,mV))),128))],512)),[[G2,P(r)]])}}),vV={class:"text-lg font-bold"},yV={key:0,class:"flex gap-2 items-center"},bV={key:1,class:"flex gap-2 mt-2"},_V={key:0},wV={key:1},CV={key:0,class:"flex flex-col gap-2"},SV={class:"FormObject-Inner"},xV={class:"FormObject-Row"},AV={class:"FormObject-Row"},kV={class:"FormObject-Row"},EV={class:"my-2"},TV={class:"FormObject-Title"},OV={class:"FormObject-Row"},MV={class:"FormObject-Title"},IV={class:"FormObject-Row"},PV={key:0,class:"FormObject-ArrowName"},NV={class:"py-3 flex gap-1"},RV=Ge({__name:"FormObject",setup(n){const e=ZS("FormObject"),{mapObjectCurrent:t,mapFile:r,mapObject:i,mapCurrent:s,drawer:o,mapObjectRemoved:a,mapObjectRelationRemoved:l,mapObjectUrl:c,controlCombo:u}=Ct(),{patron:f,chain:h,guest:p}=En(),d=new vx(()=>{const k=h.create();t.objectId(f.create(k.receiveKey("objectId"))),r.currentMap(f.create(k.receiveKey("map"))),k.result(f.create(p.create(({map:M,objectId:E})=>{e("object opened",E),d.value=M.objects[E]})))}).ref(),g=s.types(new Be).ref(),m=r.currentMap(new Be).ref(),y=new jm(d),w=c.url(y,new Be).ref(),b=()=>{t.give(""),o.give("")},v=()=>{a.give(d.value),b()},S=()=>{i.give({...d.value,outlink:d.value.outlink||w.value}),b()},_=k=>{l.give({index:k,object:d.value})};return u.happenedConditional("KeyS",o.openedByName("object"),f.create(p.create(S))),(k,M)=>(K(),mt($m,{name:"object",onClose:b},{header:se(()=>[ie("h2",vV,ge(k.$t("general.mapObject")),1),P(d)?(K(),te("small",yV,[ie("span",null," ID #"+ge(P(d).id),1)])):He("",!0),P(d)?(K(),te("div",bV,[P(d).createTimestamp?(K(),te("div",_V," : "+ge(new Date(P(d).createTimestamp).toLocaleString()),1)):He("",!0),P(d).changeTimestamp?(K(),te("div",wV," : "+ge(new Date(P(d).changeTimestamp).toLocaleString()),1)):He("",!0)])):He("",!0)]),footer:se(()=>[ie("div",NV,[z(tt,{type:"success",onClick:S},{default:se(()=>[je(ge(k.$t("general.save")),1)]),_:1}),z(tt,{type:"danger",onClick:v},{default:se(()=>[je(ge(k.$t("general.delete")),1)]),_:1}),z(tt,{onClick:b},{default:se(()=>[je(ge(k.$t("general.cancel")),1)]),_:1})])]),default:se(()=>[P(d)?(K(),te("div",CV,[ie("div",SV,[ie("div",xV,[z(Mh,{modelValue:P(d).linked,"onUpdate:modelValue":M[0]||(M[0]=E=>P(d).linked=E),label:k.$t("general.nameAsLink")},null,8,["modelValue","label"])]),P(d).linked?(K(),te(ze,{key:0},[z(vn,null,{default:se(()=>[je(ge(k.$t("general.outerLink")),1)]),_:1}),ie("div",AV,[z(fr,{"model-value":P(d).outlink||P(w),"onUpdate:modelValue":M[1]||(M[1]=E=>P(d).outlink=E)},null,8,["model-value"])]),ie("div",kV,[z(Mh,{modelValue:P(d).targetBlank,"onUpdate:modelValue":M[2]||(M[2]=E=>P(d).targetBlank=E),label:k.$t("general.inNewTab")},null,8,["modelValue","label"])])],64)):He("",!0),(K(!0),te(ze,null,en(P(d).additionalFields,(E,F)=>(K(),mt(Mn,{class:"mb-2",key:F},{default:se(()=>[z(vn,{class:"mb-1"},{default:se(()=>[je(ge(F),1)]),_:2},1024),z(Ac,{modelValue:P(d).additionalFields[F],"onUpdate:modelValue":j=>P(d).additionalFields[F]=j},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128)),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(ge(k.$t("general.topName")),1)]),_:1}),z(Ac,{modelValue:P(d).additionalName,"onUpdate:modelValue":M[3]||(M[3]=E=>P(d).additionalName=E)},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(ge(k.$t("general.bottomName")),1)]),_:1}),z(Ac,{modelValue:P(d).name,"onUpdate:modelValue":M[4]||(M[4]=E=>P(d).name=E)},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(ge(k.$t("general.description")),1)]),_:1}),z(Ac,{modelValue:P(d).description,"onUpdate:modelValue":M[5]||(M[5]=E=>P(d).description=E)},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(" Z-Index ")]),_:1}),z(fr,{modelValue:P(d).zindex,"onUpdate:modelValue":M[6]||(M[6]=E=>P(d).zindex=E),type:"number"},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(" Width ")]),_:1}),z(fr,{modelValue:P(d).width,"onUpdate:modelValue":M[7]||(M[7]=E=>P(d).width=E),step:"20",type:"number"},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(" Height ")]),_:1}),z(fr,{modelValue:P(d).height,"onUpdate:modelValue":M[8]||(M[8]=E=>P(d).height=E),step:"20",type:"number"},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(ge(k.$t("general.objectType")),1)]),_:1}),z(gV,{modelValue:P(d).type,"onUpdate:modelValue":M[9]||(M[9]=E=>P(d).type=E),items:P(g),"option-id":"id","option-label":"name"},null,8,["modelValue","items"])]),_:1}),ie("div",EV,[z(Mh,{modelValue:P(d).inMenu,"onUpdate:modelValue":M[10]||(M[10]=E=>P(d).inMenu=E),label:k.$t("general.useInMenu")},null,8,["modelValue","label"])]),P(d).inMenu?(K(),te(ze,{key:1},[ie("div",TV,ge(k.$t("general.menuOrder")),1),ie("div",OV,[z(fr,{modelValue:P(d).menuOrder,"onUpdate:modelValue":M[11]||(M[11]=E=>P(d).menuOrder=E),type:"number"},null,8,["modelValue"])])],64)):He("",!0),P(d).arrows&&P(d).arrows.length?(K(),te(ze,{key:2},[ie("div",MV,ge(k.$t("general.relations")),1),ie("div",IV,[(K(!0),te(ze,null,en(P(d).arrows,(E,F)=>{var j;return K(),te("div",{key:E.id,class:"FormObject-Arrow"},[(j=P(m))!=null&&j.objects[E.id]?(K(),te("span",PV," #"+ge(F+1)+" "+ge(P(m).objects[E.id].name),1)):He("",!0),z(tt,{class:"FormObject-ArrowButton",type:"danger",size:"sm",onClick:L=>_(F)},{default:se(()=>[je(ge(k.$t("general.delete")),1)]),_:2},1032,["onClick"])])}),128))])],64)):He("",!0)])])):He("",!0)]),_:1}))}}),LV={class:"BaseTextarea"},DV=["v-bind"],yx=Ge({inheritAttrs:!1,__name:"BaseTextarea",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:e}){const t=Hu(n,"modelValue",e);return(r,i)=>(K(),te("div",LV,[Tu(ie("textarea",{ref:"textarea","v-bind":r.$attrs,"onUpdate:modelValue":i[0]||(i[0]=s=>bt(t)?t.value=s:null),class:"rounded-main block w-full p-2 border min-h-[200px] border-solid border-body-dark"},null,8,DV),[[F1,P(t)]])]))}}),FV={class:"text-lg font-bold"},BV={key:0,class:"flex flex-col"},$V={class:"flex justify-end pt-4 gap-2"},jV=Ge({__name:"FormType",setup(n){const{mapTypeCurrent:e,mapFile:t,mapType:r,modal:i,controlCombo:s}=Ct(),{patron:o,chain:a,guest:l}=En();e.typeId(o.create(l.create(d=>{d&&i.give("type")})));const c=er(""),u=a.create(),f=new vx(()=>{e.typeId(o.create(u.receiveKey("typeId"))),t.currentMap(o.create(u.receiveKey("map"))),u.result(o.create(l.create(({map:d,typeId:g})=>{var m;f.value=d.types[g],c.value=(m=f.value)==null?void 0:m.name})))}).ref(),h=()=>{e.give(""),i.give(""),u.receiveKey("typeId").give("")},p=()=>{r.give({name:c.value,type:f.value}),h()};return s.happenedConditional("KeyS",i.openedByName("type"),o.create(l.create(p))),(d,g)=>(K(),mt(zs,{name:"type"},{header:se(()=>[ie("h2",FV,ge(d.$t("general.mapType")),1)]),footer:se(()=>[ie("div",$V,[z(tt,{type:"success",onClick:p},{default:se(()=>[je(ge(d.$t("general.save")),1)]),_:1}),z(tt,{onClick:h},{default:se(()=>[je(ge(d.$t("general.cancel")),1)]),_:1})])]),default:se(()=>[P(f)?(K(),te("div",BV,[z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je("   ")]),_:1}),z(fr,{modelValue:P(f).name,"onUpdate:modelValue":g[0]||(g[0]=m=>P(f).name=m)},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je(" SVG ")]),_:1}),z(yx,{modelValue:P(f).svg,"onUpdate:modelValue":g[1]||(g[1]=m=>P(f).svg=m)},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je("  ")]),_:1}),z(fr,{modelValue:P(f).width,"onUpdate:modelValue":g[2]||(g[2]=m=>P(f).width=m)},null,8,["modelValue"])]),_:1}),z(Mn,null,{default:se(()=>[z(vn,null,{default:se(()=>[je("  ")]),_:1}),z(fr,{modelValue:P(f).height,"onUpdate:modelValue":g[3]||(g[3]=m=>P(f).height=m)},null,8,["modelValue"])]),_:1})])):He("",!0)]),_:1}))}}),Ih=De.debug("MapObjectsWithTemplates");class HV{constructor(e,t,r){this.mapObjects=e,this.map=t,this.factories=r}objects(e){const t=this.factories.chain.create();return this.map.types(this.factories.guestCast.create(e,t.receiveKey("types"))),this.mapObjects.objects(this.factories.guestCast.create(e,t.receiveKey("objects"))),t.result(this.factories.guestInTheMiddle.create(e,({types:r,objects:i})=>{Ih("visible objects",i);const s=i.map(o=>{const a=r.find(c=>String(c.id)===String(o.type));if(Ih("check type existed",a),!a)return{obj:o,template:""};let{svg:l}=a;return Ih("type svg",l),o.additionalFields&&Object.entries(o.additionalFields).forEach(([c,u])=>{l=l.replaceAll(`\${${c}}`,u)}),["width","height"].forEach(c=>{l=l.replaceAll(`\${${c}}`,o[c])}),{obj:o,template:l}});e.give(s)})),e}}const VV=Ge({__name:"BaseNotify",setup(n){const{notification:e}=Ct(),t=e.message(new Be).ref();return(r,i)=>P(t)&&P(t).text!=="hide"?(K(),te("div",{key:0,class:Sn(["inline font-bold",`text-${P(t).type}-second`])},ge(P(t).text),3)):He("",!0)}}),zV={class:"relative"},GV={class:"absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden z-1"},WV={class:"text-sm z-10 p-2 absolute bottom-0 left-5"},UV=a2('<div class="absolute bottom-3 shadow-standard-second shadow-md drop-shadow right-3 z-10"><div class="grid-example grid grid-rows-2 grid-cols-2 bg-standard-second border border-standard-second gap-[1px] border-t-0 border-l-0"><div class="w-[14px] h-[14px] bg-white"></div><div class="w-[14px] h-[14px] bg-white"></div><div class="w-[14px] h-[14px] bg-white"></div><div class="w-[14px] h-[14px] bg-white"></div></div></div><div class="absolute z-30 top-0 left-0 h-[18px] w-[22px] bg-white"></div>',2),KV=["title"],YV={class:"font-bold"},qV=["title"],XV={class:"font-bold"},JV=["title"],QV={class:"font-bold"},ZV=["title"],ez={class:"font-bold"},tz=["data-object-id"],nz={class:"absolute bottom-[100%] left-[50%] translate-x-[-50%] text-center pb-2 pointer-events-auto text-sm w-[300px]"},rz=["innerHTML","onClick"],iz=["innerHTML"],sz=["data-object-id","innerHTML"],oz=Ge({__name:"TheEditor",setup(n){const{canvas:e,mapObjectsVisible:t,mapCurrent:r,konvaLayer:i,fps:s,mapCurrentID:o,mapObjectUrl:a,stageSize:l,objectsOutsideScreen:c,stagePositionByObjectId:u,mapCurrentSource:f}=Ct(),h=En(),p=s.value(new Be).ref(),d=new HV(t,r,h).objects(new Be([])).ref(),g=l.value(new Be).ref(),m=i.position(new Be).ref(),y=wl(()=>{var j;return(j=g.value)==null?void 0:j.width}),w=new jm(y),b=h.numberChunks.create(10,w).chunks(new Be).ref(),v=er();mw(()=>{e.give(v.value)});const S=j=>{a.open(j,h.guest.create(L=>{o.give(L)}))},_=c.count({axis:"x",direction:"negative"},new Be).ref(),k=c.count({axis:"x",direction:"positive"},new Be).ref(),M=c.count({axis:"y",direction:"negative"},new Be).ref(),E=c.count({axis:"y",direction:"positive"},new Be).ref(),F=u.move.bind(u,f);return(j,L)=>{var V,ue,ke,re,le,ce,Re,me,Ce,Ae,Je,Ye;return K(),te("div",zV,[ie("div",GV,[ie("div",WV,[je("  : "+ge(P(d).length)+", FPS: "+ge(P(p))+", ",1),z(VV)]),UV,((V=P(_))==null?void 0:V.count)>0?(K(),te("div",{key:0,class:"pointer-events-auto absolute z-30 top-0 left-4 h-[18px] bg-white flex items-center gap-1 text-body-dark text-sm cursor-pointer",title:`${(ue=P(_))==null?void 0:ue.count} .  `,onClick:L[0]||(L[0]=Oe=>P(F)(P(_).nearestObjectId))},[z(yn,{icon:"fa-arrow-left"}),ie("span",YV,ge((ke=P(_))==null?void 0:ke.count),1)],8,KV)):He("",!0),((re=P(k))==null?void 0:re.count)>0?(K(),te("div",{key:1,class:"pointer-events-auto absolute z-30 p-1 top-0 right-0 h-[18px] bg-white flex items-center gap-1 text-body-dark text-sm cursor-pointer",title:`${(le=P(k))==null?void 0:le.count} .  `,onClick:L[1]||(L[1]=Oe=>P(F)(P(k).nearestObjectId))},[ie("span",XV,ge((ce=P(k))==null?void 0:ce.count),1),z(yn,{icon:"fa-arrow-right"})],8,qV)):He("",!0),((Re=P(M))==null?void 0:Re.count)>0?(K(),te("div",{key:2,class:"pointer-events-auto absolute z-30 top-[18px] left-0 w-[18px] bg-white flex flex-col leading-4 items-center gap-1 text-body-dark text-sm cursor-pointer",title:`${(me=P(M))==null?void 0:me.count} .  `,onClick:L[2]||(L[2]=Oe=>P(F)(P(M).nearestObjectId))},[z(yn,{icon:"fa-arrow-up"}),ie("span",QV,ge((Ce=P(M))==null?void 0:Ce.count),1)],8,JV)):He("",!0),((Ae=P(E))==null?void 0:Ae.count)>0?(K(),te("div",{key:3,class:"pointer-events-auto absolute z-30 p-1 bottom-0 left-0 w-[18px] bg-white flex flex-col-reverse leading-4 items-center gap-1 text-body-dark text-sm cursor-pointer",title:`${(Je=P(E))==null?void 0:Je.count} .  `,onClick:L[3]||(L[3]=Oe=>P(F)(P(E).nearestObjectId))},[z(yn,{icon:"fa-arrow-down"}),ie("span",ez,ge((Ye=P(E))==null?void 0:Ye.count),1)],8,ZV)):He("",!0),ie("div",{class:Sn({"objects-container absolute top-0 left-0":!0}),style:wn({width:`${P(g).width}px`,height:`${P(g).height}px`,transform:`translate(${P(m).x}px, ${P(m).y}px)`})},[ie("div",{class:"absolute flex top-0 left-0 w-full z-20 h-[20px] bg-default border-b-2 border-border text-right text-sm px-2",style:wn({transform:`translate(0, ${-P(m).y}px)`})},[(K(!0),te(ze,null,en(P(b),Oe=>(K(),te("span",{class:"flex-1 text-body-dark",key:`horiz_${Oe}`},ge(Oe)+"px",1))),128))],4),ie("div",{class:"absolute flex [writing-mode:vertical-lr] top-0 left-0 h-full z-20 w-[20px] bg-default border-r-2 border-border text-left text-sm py-2",style:wn({transform:`translate(${-P(m).x}px, 0)`})},[(K(!0),te(ze,null,en(P(b),Oe=>(K(),te("span",{class:"flex-1 rotate-180 text-body-dark",key:`vert_${Oe}`},ge(Oe)+"px",1))),128))],4),(K(!0),te(ze,null,en(P(d),Oe=>(K(),te("div",{key:Oe.obj.id,class:"absolute z-10","data-object-id":Oe.obj.id,style:wn(`width:${Oe.obj.width}px;height: ${Oe.obj.height}px;top: ${Oe.obj.position[1]}px;left:${Oe.obj.position[0]}px;z-index:${Oe.obj.zindex}`)},[ie("div",nz,[ie("span",{innerHTML:Oe.obj.additionalName,class:Sn([Oe.obj.linked&&"cursor-pointer underline"]),onClick:dt=>S(Oe.obj)},null,10,rz)]),ie("div",{class:"absolute top-[100%] left-[50%] translate-x-[-50%] text-center pt-2 text-sm w-[300px]",innerHTML:Oe.obj.name},null,8,iz),ie("div",{"data-object-id":Oe.obj.id,class:"rendered-object",innerHTML:Oe.template},null,8,sz)],12,tz))),128))],4)]),ie("div",{class:"h-full",ref_key:"canvasWrapper",ref:v},null,512)])}}}),az={class:"flex flex-wrap gap-2"},lz={key:0},cz={key:1},uz=["onClick"],fz=Ge({__name:"BaseBreadcrumbs",setup(n){const{breadcrumbs:e,mapCurrentID:t}=Ct(),r=e.list(new Be).ref();return(i,s)=>(K(),te("div",az,[(K(!0),te(ze,null,en(P(r),(o,a)=>(K(),te("span",{class:"flex gap-2",key:o.name},[a!==0?(K(),te("span",lz,"/")):He("",!0),a===P(r).length-1?(K(),te("b",cz,": "+ge(o.title),1)):(K(),te("a",{key:2,href:"#",onClick:jo(l=>P(t).give(o.name),["prevent"])},ge(o.title),9,uz))]))),128))]))}}),hz={class:"flex items-center p-3 gap-3"},dz={class:"ml-auto gap-1 flex"},pz=Ge({__name:"TheHeader",setup(n){const{drawer:e,modal:t,mapHistory:r,controlCombo:i,settings:s}=Ct(),{patron:o,guest:a}=En(),l=r.isNextPossible(new Be).ref(),c=r.isPrevPossible(new Be).ref();i.happened("KeyZ",o.create(a.create(()=>{c.value&&r.prev()}))),i.happened("KeyP",o.create(a.create(()=>{l.value&&r.next()})));const u=new Be;return s.value(u),(f,h)=>(K(),te("div",hz,[z(fz,{class:"TheHeader-Breadcrumbs"}),ie("div",dz,[P(l)&&!P(u).value.readonly?(K(),mt(tt,{key:0,size:"sm",title:"  ",class:"w-7 block",onClick:h[0]||(h[0]=p=>P(r).next())},{default:se(()=>[z(yn,{icon:"fa-rotate-left"})]),_:1})):He("",!0),P(c)&&!P(u).value.readonly?(K(),mt(tt,{key:1,size:"sm",title:"  ",class:"w-7 block",onClick:h[1]||(h[1]=p=>P(r).prev())},{default:se(()=>[z(yn,{icon:"fa-rotate-right"})]),_:1})):He("",!0),z(tt,{type:"success",size:"sm",class:"w-7 block e2e-open-menu",title:f.$t("general.menu"),onClick:h[2]||(h[2]=p=>P(e).give("menu"))},{default:se(()=>[z(yn,{icon:"fa-bars"})]),_:1},8,["title"]),z(tt,{title:f.$t("general.byText"),type:"primary",size:"sm",class:"w-7 block",onClick:h[3]||(h[3]=p=>P(t).give("mapAsText"))},{default:se(()=>[z(yn,{icon:"fa-text-width"})]),_:1},8,["title"]),z(tt,{class:"w-7 block e2e-search",size:"sm",onClick:h[4]||(h[4]=p=>P(t).give("search"))},{default:se(()=>[z(yn,{icon:"fa-search"})]),_:1}),z(tt,{size:"sm",title:"  ",class:"w-7 block",onClick:h[5]||(h[5]=p=>P(e).give("fileMaps"))},{default:se(()=>[z(yn,{icon:"fa-map"})]),_:1})])]))}}),mz={},gz={class:"text-lg font-bold"};function vz(n,e){return K(),te("span",gz,[Bn(n.$slots,"default")])}const yz=Sf(mz,[["render",vz]]),bz={class:"flex gap-1"},_z={key:0,class:"TheMapAsText select-auto"},wz=["innerHTML"],Cz=Ge({__name:"TheMapAsText",setup(n){const{mapFile:e,mapCurrent:t}=Ct(),{guest:r,patron:i,textOf:s,textNlAsBr:o,textWithoutHTML:a}=En(),l=e.currentMap(new Be).ref(),c=er(""),u=er([]);t.objects(i.create(r.create(qo(m=>{u.value=m,o.create(s.create(m.map(y=>`<div class="TheMapAsText-Item">
                <h3>${y.name}</h3><p>${y.additionalName||""}</p><p>${y.description||""}</p><p>${y.additionalFields&&Object.values(y.additionalFields).join("</p><p>")}</p></div>`).join(""))).asString(r.create(y=>{c.value=y}))},500))));const{share:f,isSupported:h}=TT(),p=()=>{h.value||alert("Sharing is not supported"),a.create(s.create(c.value)).asString(r.create(m=>{f({text:m})}))},d=er(),g=()=>{var m,y;if(l.value){const w=new Range;w.setStart(d.value,0),w.setEnd(d.value,Object.values(u.value).length),(m=document.getSelection())==null||m.removeAllRanges(),(y=document.getSelection())==null||y.addRange(w)}};return(m,y)=>(K(),mt(zs,{name:"mapAsText"},{header:se(()=>[z(yz,{class:"block mb-3"},{default:se(()=>[je(ge(m.$t("general.mapAsText"))+" ",1),ie("div",bz,[z(tt,{size:"sm",type:"success",class:"font-normal",onClick:p},{default:se(()=>[je(ge(m.$t("general.share")),1)]),_:1}),z(tt,{size:"sm",type:"primary",class:"font-normal",onClick:g},{default:se(()=>[je(ge(m.$t("general.selectAll")),1)]),_:1})])]),_:1})]),default:se(()=>[P(l)?(K(),te("article",_z,[ie("div",{ref_key:"textRef",ref:d,innerHTML:P(c)},null,8,wz)])):He("",!0)]),_:1}))}}),Sz={key:1},xz=Ge({__name:"TheMiniMap",setup(n){const{miniMap:e}=Ct(),t=e.points(new Be).ref(),r=e.size(new Be).ref(),i=e.viewportSize(new Be).ref(),s=e.viewportPosition(new Be).ref();return(o,a)=>P(r)?(K(),te("div",{key:0,style:wn({width:`${P(r).width}px`,height:`${P(r).height}px`}),class:"absolute pointer-events-none block bg-white bottom-[10px] mt-3 right-3 z-1 border border-solid border-body-dark"},[P(s)?(K(),te("div",{key:0,style:wn({width:`${P(i).width}px`,height:`${P(i).height}px`,top:`${P(s).y}px`,left:`${P(s).x}px`}),class:"absolute bg-primary/50"},null,4)):He("",!0),P(t)?(K(),te("div",Sz,[(K(!0),te(ze,null,en(P(t),l=>(K(),te("div",{key:l.id,class:"absolute w-1 h-1 block bg-danger",style:wn({top:`${l.y}px`,left:`${l.x}px`,width:`${l.width}px`,height:`${l.height}px`})},null,4))),128))])):He("",!0)],4)):He("",!0)}}),Az={class:"text-lg font-bold"},kz={key:0,class:"TheSettings"},Ez={class:"mb-2"},Tz={class:"TheSettings-Row"},Oz={class:"flex gap-2 mb-2"},Mz={class:"mb-2"},Iz={class:"mb-2"},Pz={href:"https://github.com/kosukhin/mind-map-creator",target:"_blank"},Nz={class:"flex gap-2"},Rz=Ge({__name:"FormSettings",setup(n){const{modal:e,mapFile:t,mapRemoved:r,mapSettings:i,controlCombo:s,parentNames:o,mapCurrentID:a}=Ct(),{patron:l,guest:c}=En(),u=o.names(new Be).ref(),f=t.currentMap(new Be).ref(),h=a.id(new Be).ref(),p=()=>{e.give("")},d=()=>{i.give(f.value.settings),p()};return s.happenedConditional("KeyS",e.openedByName("settings"),l.create(c.create(d))),(g,m)=>(K(),mt(zs,{name:"settings"},{header:se(()=>[ie("h2",Az,ge(g.$t("general.mapSettings")),1)]),default:se(()=>{var y;return[(y=P(f))!=null&&y.settings?(K(),te("div",kz,[ie("div",Ez,[ie("div",Tz,[ie("div",Oz,[P(u).length>1?(K(),mt(tt,{key:0,type:"primary",class:"text-white",onClick:m[0]||(m[0]=w=>P(e).give("parentTypes"))},{default:se(()=>[je(ge(g.$t("general.parentTypes")),1)]),_:1})):He("",!0),z(tt,{type:"primary",class:"text-white",onClick:m[1]||(m[1]=w=>P(e).give("export"))},{default:se(()=>[je(ge(g.$t("general.exportOrImport")),1)]),_:1}),z(tt,{type:"primary",class:"text-white e2e-open-presets",onClick:m[2]||(m[2]=w=>P(e).give("presets"))},{default:se(()=>[je("  ")]),_:1})])]),ie("div",Mz,[ie("label",null,[ie("b",null,ge(g.$t("general.mapName")),1),z(fr,{modelValue:P(f).settings.title,"onUpdate:modelValue":m[3]||(m[3]=w=>P(f).settings.title=w)},null,8,["modelValue"])])]),ie("div",Iz,[ie("a",Pz,ge(g.$t("general.githubRepo")),1)])]),ie("div",Nz,[z(tt,{class:"TheSettings-Button",type:"success",onClick:m[4]||(m[4]=w=>d())},{default:se(()=>[je(ge(g.$t("general.save")),1)]),_:1}),z(tt,{class:"TheSettings-Button",onClick:p},{default:se(()=>[je(ge(g.$t("general.cancel")),1)]),_:1}),z(tt,{class:"TheSettings-Button",type:"danger",onClick:m[5]||(m[5]=w=>{P(r).give(P(h)),p()})},{default:se(()=>[je(ge(g.$t("general.removeMap")),1)]),_:1})])])):He("",!0)]}),_:1}))}}),Lz={},Dz={class:"BaseGroup"};function Fz(n,e){return K(),te("div",Dz,[Bn(n.$slots,"default")])}const Bz=Sf(Lz,[["render",Fz]]),$z="default",jz=Ge({__name:"TheLinker",setup(n){const{mapObjectsLink:e}=Ct(),t=e.objectIds(new Be([])).ref();return(r,i)=>(K(),mt(tt,{type:$z,onClick:i[0]||(i[0]=s=>P(e).startLink())},{default:se(()=>[je(ge(P(t).length===1?" ":P(t).length===2?" ":" "),1)]),_:1}))}}),Hz={class:"flex e2e-sidebar flex-col items-center gap-3 max-h-[100%] overflow-hidden"},Vz={class:"TheSideBar-ItemName"},zz=["innerHTML","draggable","title","onDragend"],Gz={key:0,class:"flex gap-1"},Wz={key:0,class:"mt-auto w-full p-3 pt-0"},Uz=Ge({__name:"TheSideBar",setup(n){const{mapObjectNew:e,mapCurrent:t,mapTypeCurrent:r,mapTypeRemoved:i,mapTypeNew:s,modal:o,settings:a,sidebarDraggable:l}=Ct(),c=t.types(new Be).ref(),u=er();mw(()=>{l.give(u.value)});const{svgMapTypeImage:f}=En(),h=wl(()=>{var d;return(d=c.value)==null?void 0:d.map(g=>({type:g,image:f.create(g).markup()})).sort((g,m)=>+(g.type.name>=m.type.name))}),p=new Be;return a.value(p),(d,g)=>(K(),te("div",Hz,[ie("div",{ref_key:"dragWrapperRef",ref:u,class:"flex flex-col gap-3 flex-grow w-full overflow-y-auto"},[(K(!0),te(ze,null,en(P(h),(m,y)=>(K(),te("div",{key:y,class:"flex flex-col items-center justify-center gap-2"},[ie("div",Vz,ge(m.type.name),1),ie("div",{innerHTML:m.image,class:"TheSideBar-ItemImage",draggable:P(p).value.readonly?"false":"true",style:wn(`width:${m.type.width}px;height:${m.type.height}px`),title:d.$t("general.notifications.dragToCanvasToAdd"),onDragend:w=>P(e).byTypeName(m.type.id,w)},null,44,zz),P(p).value.readonly?He("",!0):(K(),te("div",Gz,[z(tt,{class:"text-white",size:"sm",type:"primary",onClick:w=>P(r).give(m.type.id)},{default:se(()=>[je(ge(d.$t("general.change")),1)]),_:2},1032,["onClick"]),z(tt,{class:"text-white",size:"sm",type:"danger",onClick:w=>P(i).give(m.type)},{default:se(()=>[je(ge(d.$t("general.delete")),1)]),_:2},1032,["onClick"])]))]))),128))],512),P(p).value.readonly?He("",!0):(K(),te("div",Wz,[z(Bz,{class:"mb-1 grid gap-1 grid-cols-2"},{default:se(()=>[z(tt,{title:d.$t("general.addType"),type:"success",onClick:g[0]||(g[0]=m=>P(s).byName())},{default:se(()=>[z(yn,{icon:"fa-plus-square"})]),_:1},8,["title"]),z(tt,{class:"e2e-show-settings",title:d.$t("general.settings"),type:"primary",onClick:g[1]||(g[1]=m=>P(o).give("settings"))},{default:se(()=>[z(yn,{icon:"fa-cog"})]),_:1},8,["title"])]),_:1}),z(jz,{class:"w-[100%] block mb-1"})]))]))}});class Kz{constructor(e,t,r=!1){this.basePatron=e,this.guest=t,this.refWatcherCreated=r}ref(){return this.basePatron.ref()}get value(){return this.basePatron.value}introduction(){return this.basePatron.introduction()}give(e){return this.basePatron.give(e),this.refWatcherCreated||(this.refWatcherCreated=!0,_l(this.basePatron.ref(),t=>{t&&this.guest.give(t)},{deep:!0})),this}}class Yz{constructor(e){this.baseSource=e}value(e){return this.baseSource.value(new Yo(e,t=>{zi(JSON.stringify(t),e)})),this}give(e){return this.value(t=>{e!==t&&this.baseSource.give(JSON.parse(e))}),this}pool(){return this.baseSource.pool()}}class qz{constructor(e,t){this.baseGuest=e,this.baseGuestAware=t}value(e){return this.baseGuestAware.value(e),this}give(e){return zi(e,this.baseGuest),this}pool(){throw Error("No pool in SourceDynamic")}}const Xz={class:"AppPresets"},Jz=ie("div",{class:"text-md font-bold mb-2"},"\\  ",-1),Qz={class:"flex flex-col gap-2"},Zz=Ge({__name:"AppExport",setup(n){const{mapFile:e,mapCurrent:t}=Ct(),r=new qz(t,new Pm(a=>{e.currentMap(new Cu(a))})),i=new Yz(r),s=new Kz(new Be,i);i.value(s);const o=s.ref();return(a,l)=>(K(),mt(zs,{name:"export"},{default:se(()=>[ie("div",Xz,[Jz,ie("div",Qz,[z(yx,{modelValue:P(o),"onUpdate:modelValue":l[0]||(l[0]=c=>bt(o)?o.value=c:null)},null,8,["modelValue"])])])]),_:1}))}}),eG={class:"bg-body absolute top-0 left-0 w-full h-full"},tG={class:"grid grid-cols-[200px_1fr] grid-rows-[50px_1fr] h-dvh relative"},nG=Ge({__name:"PatronSchemeEditor",props:{modelValue:{type:String,required:!0},readonly:{type:Boolean,default:!1},presets:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,r=e,{fileContent:i,settings:s}=Ct(),{guest:o,patron:a}=En();return s.value(l=>{s.give({...l,readonly:t.readonly,presets:t.presets})}),_l(()=>t.modelValue,l=>{i.value(o.create(c=>{l!==c&&i.give(l)}))},{immediate:!0}),i.value(a.create(l=>{r("update:modelValue",l)})),(l,c)=>(K(),te("div",eG,[ie("div",tG,[z(pz,{class:"col-span-2"}),z(Uz),z(oz,{class:"w-auto col-auto h-full"}),z(xz)]),z(RV),z(jV),z(Rz),z(GH),z(sV),z(Zz),z(PH),z(Cz),z(ZH),z(kH)]))}});De.debug("FileSystemContent");De.debug("FirstPossibleFileContent");De.debug("UrlContent");new yf;const rG={__name:"App",setup(n){const e=bn(window.content??"");return(t,r)=>(K(),mt(P(nG),{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=i=>e.value=i),readonly:""},null,8,["modelValue"]))}};Promise.all([fetch("https://raw.githubusercontent.com/kosukhin/patron-scheme-editor/refs/heads/main/src/locales/ru.json").then(n=>n.json()),fetch("https://raw.githubusercontent.com/kosukhin/patron-scheme-editor/refs/heads/main/src/locales/en.json").then(n=>n.json())]).then(([n,e])=>{q2(rG).use(eT({legacy:!1,locale:"ru",fallbackLocale:"ru",globalInjection:!0,messages:{ru:n,en:e}})).mount("#app")});
